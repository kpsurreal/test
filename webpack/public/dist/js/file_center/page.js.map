{"version":3,"sources":["file_center/page.js"],"names":["reportFileCenterFn","Vue","component","props","template","data","select_id","currentDate","moment","format","init_obj","allSelected","noMatchesFound","placeholder","batch_down_fn","computed","options","report_file_center","window","LOGIN_INFO","org_info","theme","value","label","num","watch","$emit","methods","refresh","Object","prototype","toString","call","$root","doRefresh","batch_down","_this","undefined","batch_down_list","$","omsAlert","down_url_arr","forEach","e","product_list","i","id","obj","down_url","split","push","decodeURI","ajax","url","type","user_id","file_name","join","date","product_data","success","code","msg","location","href","error","change_model","change_model_id","reportItem","change_selected_id","index","splice","reportAllSelected","status","change_selected_model","disabledFn","reportStatus","itemId","deleteReport","item","confirm","title","content","closeIcon","columnClass","confirmButton","confirmButtonClass","startLoading","clearLoading","cancelButton","reportDoenLoad","report_name","regenerate","each","request_url","key","val","str","key1","val1","file_id","report_form","el","chgSelected","batchFn","getProductList","current_data","reportType","parseFloat"],"mappings":";;;;AAAA,SAASA,kBAAT,GAA+B;;AAE7B;AACAC,MAAIC,SAAJ,CAAc,kBAAd,EAAkC;AAChCC,WAAO,CAAC,cAAD,EAAiB,iBAAjB,EAAoC,cAApC,CADyB;AAEhCC,g7BAFgC;AAqBhCC,UAAM,gBAAY;AAChB,aAAO;AACL;AACAC,mBAAW,EAFN;AAGLC,qBAAc,YAAU;AAAC,iBAAOC,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,SAAjD,EAHR;AAILC,kBAAU;AACRC,uBAAa,MADL;AAERC,0BAAgB,SAFR;AAGRC,uBAAa;AAHL,SAJL;AASLC,uBAAe;AATV,OAAP;AAWD,KAjC+B;AAkChCC,cAAU;AACRC,eAAS,mBAAY;AACnB,YAAIC,qBAAqB,EAAzB;AACA;AACA,YAAI,KAAKC,OAAOC,UAAP,CAAkBC,QAAlB,CAA2BC,KAApC,EAA2C;AACzCJ,+BAAqB,CACnB;AACEK,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WADmB,EAMnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WANmB,EAWnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WAXmB,EAgBnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WAhBmB,EAqBnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WArBmB,CAArB;AA2BD,SA5BD,MA4BO;AACLP,+BAAqB,CACnB;AACEK,mBAAO,MADT;AAEEC,mBAAO,MAFT;AAGEC,iBAAK;AAHP,WADmB,EAMnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WANmB,EAWnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WAXmB,EAgBnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WAhBmB,EAqBnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WArBmB,EA0BnB;AACEF,mBAAO,QADT;AAEEC,mBAAO,QAFT;AAGEC,iBAAK;AAHP,WA1BmB,CAArB;AAgCD;AACD,eAAOP,kBAAP;AACD;AAnEO,KAlCsB;AAuGhCQ,WAAO;AACLnB,iBAAW,qBAAY;AACrB,aAAKoB,KAAL,CAAW,kBAAX,EAA+B,KAAKpB,SAApC;AACD,OAHI;AAILC,mBAAa,uBAAY;AACvB,aAAKmB,KAAL,CAAW,qBAAX,EAAkC,KAAKnB,WAAvC;AACD,OANI;AAOLO,qBAAe,yBAAY;AACzB,aAAKY,KAAL,CAAW,yBAAX,EAAsC,KAAKZ,aAA3C;AACD;AATI,KAvGyB;AAkHhCa,aAAS;AACPC,eAAS,mBAAY;AACnB;AACA,YAAI,uBAAuBC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+B,KAAKC,KAAL,CAAWC,SAA1C,CAA3B,EAAiF;AAC/E,eAAKD,KAAL,CAAWC,SAAX,CAAqB,IAArB;AACD;AACF,OANM;AAOPC,kBAAY,sBAAY;AAAA;;AACtB,YAAIC,QAAQ,IAAZ;AACA,aAAKtB,aAAL,GAAqB,IAArB;AACA;AACA,YAAIuB,aAAa,KAAKC,eAAlB,IAAqC,MAAM,KAAKA,eAApD,EAAqE;AACnEC,YAAEC,QAAF,CAAW,QAAX;AACA,iBAAO,KAAP;AACD;;AAED,YAAIC,eAAe,EAAnB;AACA,aAAKH,eAAL,CAAqBI,OAArB,CAA6B,UAACC,CAAD,EAAO;AAClCP,gBAAMQ,YAAN,CAAmBF,OAAnB,CAA2B,UAACG,CAAD,EAAO;AAChC,gBAAIF,KAAKE,EAAEC,EAAX,EAAe;AACb,kBAAIC,MAAM,EAAV;AACAA,oBAAMF,EAAEG,QAAF,CAAWC,KAAX,CAAiB,UAAjB,EAA6B,CAA7B,CAAN;AACAR,2BAAaS,IAAb,CAAkBC,UAAUJ,GAAV,CAAlB;AACD;AACF,WAND;AAOD,SARD;;AAUAR,UAAEa,IAAF,CAAO;AACLC,eAAK,sBADA;AAELC,gBAAM,KAFD;AAGLjD,gBAAM;AACJkD,qBAASrC,OAAOC,UAAP,CAAkBoC,OADvB;AAEJC,uBAAUf,aAAagB,IAAb,CAAkB,GAAlB,CAFN;AAGJC,kBAAM,KAAKC,YAAL,CAAkBV,KAAlB,CAAwB,GAAxB,EAA6BQ,IAA7B,CAAkC,EAAlC;AAHF,WAHD;AAQLG,mBAAS,uBAAqB;AAAA,gBAAnBC,IAAmB,QAAnBA,IAAmB;AAAA,gBAAdC,GAAc,QAAdA,GAAc;AAAA,gBAAVzD,IAAU,QAAVA,IAAU;;AAC5Ba,mBAAO6C,QAAP,CAAgBC,IAAhB,GAAuB,kCAAgC9C,OAAOC,UAAP,CAAkBoC,OAAlD,GAA0D,aAA1D,GAAwEd,aAAagB,IAAb,CAAkB,GAAlB,CAAxE,GAA+F,QAA/F,GAAwG,OAAKE,YAAL,CAAkBV,KAAlB,CAAwB,GAAxB,EAA6BQ,IAA7B,CAAkC,EAAlC,CAA/H;AACA,mBAAO,KAAP;AACD,WAXI;AAYLQ,iBAAO,iBAAM;AACX1B,cAAEC,QAAF,CAAW,UAAX;AACD;AAdI,SAAP;AAiBD;AA5CM;AAlHuB,GAAlC;AAiKA;AACAvC,MAAIC,SAAJ,CAAc,uBAAd,EAAuC;AACrCC,WAAO,CAAC,YAAD,EAAe,mBAAf,EAAoC,oBAApC,CAD8B;AAErCC,+MAFqC;AAQrCC,UAAM,gBAAY;AAChB,aAAO;AACL6D,sBAAc,KADT,EACiB;AACtBC,yBAAiB,KAAKC,UAAL,CAAgBtB,EAF5B,CAEgC;AAFhC,OAAP;AAID,KAboC;AAcrCrB,WAAO;AACLyC,oBAAc,wBAAY;AAAG;AAC3B,YAAI9B,QAAQ,IAAZ;AACA,YAAI,SAAS,KAAK8B,YAAlB,EAAgC;AAC9B,eAAKG,kBAAL,CAAwB3B,OAAxB,CAAgC,UAACC,CAAD,EAAG2B,KAAH,EAAa;AAC3C,gBAAIlC,MAAMgC,UAAN,CAAiBtB,EAAjB,IAAuBH,CAA3B,EAA8B;AAC5BP,oBAAMiC,kBAAN,CAAyBE,MAAzB,CAAgCD,KAAhC,EAAsC,CAAtC;AACD;AACF,WAJD;AAKD,SAND,MAMO;AACL,eAAKD,kBAAL,CAAwBnB,IAAxB,CAA6B,KAAKkB,UAAL,CAAgBtB,EAA7C;AACD;AACD,aAAKpB,KAAL,CAAW,qBAAX,EAAkC,KAAKwC,YAAvC;AACD,OAbI;AAcLC,uBAAiB,2BAAY;AAC3B,aAAKzC,KAAL,CAAW,wBAAX,EAAqC,KAAKyC,eAA1C;AACD,OAhBI;AAiBLK,yBAAmB,6BAAY;AAAE;AAC/B,YAAI,KAAK,KAAKJ,UAAL,CAAgBK,MAAzB,EAAiC;AAC/B,iBAAO,KAAP;AACD;AACD,aAAKP,YAAL,GAAoB,KAAKM,iBAAzB;AACD;AAtBI,KAd8B;AAsCrC7C,aAAS;AACP+C,6BAAuB,iCAAY;AACjC,YAAI,SAAS,KAAKR,YAAlB,EAAgC;AAC9B,iBAAO,KAAKA,YAAL,GAAoB,KAA3B;AACD;AACD,eAAO,KAAKA,YAAL,GAAoB,IAA3B;AACD,OANM;AAOPS,kBAAY,oBAAUP,UAAV,EAAsB;AAChC,YAAI,KAAKA,WAAWK,MAApB,EAA4B;AAC1B,iBAAO,UAAP;AACD;AACF;AAXM;AAtC4B,GAAvC;;AAqDAxE,MAAIC,SAAJ,CAAc,qBAAd,EAAqC;AACnCC,WAAO,CAAC,cAAD,EAAiB,cAAjB,CAD4B;AAEnCC,67CAFmC;AA6BnCC,UAAM,gBAAU;AACd,aAAO;AACLmE,2BAAmB,KADd,EACsB;AAC3BH,4BAAoB;AAFf,OAAP;AAID,KAlCkC;AAmCnC5C,WAAO;AACL4C,0BAAoB,8BAAY;AAC9B,aAAK3C,KAAL,CAAW,sBAAX,EAAmC,KAAK2C,kBAAxC;AACD;AAHI,KAnC4B;AAwCnC1C,aAAS;AACPiD,oBAAc,sBAAUC,MAAV,EAAkB;AAC9B,YAAI,KAAKA,OAAOJ,MAAhB,EAAwB;AACtB,iBAAO,KAAP;AACD,SAFD,MAEO,IAAI,KAAKI,OAAOJ,MAAhB,EAAwB;AAC7B,iBAAO,KAAP;AACD,SAFM,MAEA,IAAI,KAAKI,OAAOJ,MAAhB,EAAwB;AAC7B,iBAAO,KAAP;AACD;AACF,OATM;AAUPK,oBAAc,sBAAUC,IAAV,EAAgB;AAAG;AAC/B,YAAI3C,QAAQ,IAAZ;AACAG,UAAEyC,OAAF,CAAU;AACRC,iBAAO,MADC;AAERC,qPAFQ;AAORC,qBAAW,IAPH;AAQRC,uBAAa,qBARL;AASRC,yBAAe,IATP;AAURC,8BAAoB,2BAVZ;AAWRN,mBAAS,mBAAU;AACjBzC,cAAEgD,YAAF;AACAhD,cAAEa,IAAF,CAAO;AACLC,mBAAK,6BADA;AAELC,oBAAM,MAFD;AAGLjD,oBAAM;AACJyC,oBAAIiC,KAAKjC;AADL,eAHD;AAMLc,uBAAS,wBAAqB;AAAA,oBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,oBAAdC,GAAc,SAAdA,GAAc;AAAA,oBAAVzD,IAAU,SAAVA,IAAU;;AAC5B,oBAAI,KAAKwD,IAAT,EAAe;AACb;AACA,sBAAI,uBAAuBhC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BI,MAAMH,KAAN,CAAYC,SAA3C,CAA3B,EAAkF;AAChFE,0BAAMH,KAAN,CAAYC,SAAZ,CAAsB,IAAtB;AACD;AACDK,oBAAEiD,YAAF;AACAjD,oBAAEC,QAAF,CAAW,MAAX;AACD;AACF,eAfI;AAgBLyB,qBAAO,iBAAM;AACX1B,kBAAEC,QAAF,CAAW,MAAX;AACD;AAlBI,aAAP;AAoBD,WAjCO;AAkCRiD,wBAAc;AAlCN,SAAV;AAqCD,OAjDM;AAkDPC,sBAAgB,wBAAUtB,UAAV,EAAsB;AAAE;AACtC,YAAIhC,QAAQ,IAAZ;AACA,YAAI,KAAKgC,WAAWK,MAApB,EAA4B;AAAG;AAC7B,iBAAO,KAAP;AACD;AACDvD,eAAO6C,QAAP,CAAgBC,IAAhB,GAAuBI,WAAWpB,QAAX,GAAoB,KAApB,GAA0BoB,WAAWuB,WAA5D;AACD,OAxDM;AAyDPC,kBAAY,oBAAUxB,UAAV,EAAsB;AAAA;;AAChC,YAAI,KAAKA,WAAWK,MAAhB,IAA0B,KAAKL,WAAWK,MAA9C,EAAsD;AAAE;AACtD,iBAAO,KAAP;AACD;AACD;AACA,YAAKpE,OAAO,EAAZ;AACAkC,UAAEsD,IAAF,CAAOzB,WAAW0B,WAAX,CAAuBzF,IAA9B,EAAoC,UAAC0F,GAAD,EAAMC,GAAN,EAAc;AAChD,cAAIC,MAAM,EAAV;AACA,cAAI,YAAa,OAAOD,GAAxB,EAA8B;AAC5BC,kBAAMF,MAAI,GAAJ,GAAQC,GAAd;AACA3F,iBAAK6C,IAAL,CAAU+C,GAAV;AACD,WAHD,MAGO,IAAI,oBAAoBD,GAApB,yCAAoBA,GAApB,EAAJ,EAA6B;AAClCzD,cAAEsD,IAAF,CAAOG,GAAP,EAAY,UAACE,IAAD,EAAOC,IAAP,EAAgB;AAC1B,kBAAI,YAAa,OAAOA,IAAxB,EAA+B;AAC7BF,sBAAMC,OAAO,GAAP,GAAaC,IAAnB;AACA9F,qBAAK6C,IAAL,CAAU+C,GAAV;AACD;AACF,aALD;AAMD;AACF,SAbD;AAcA1D,UAAEa,IAAF,CAAO;AACLC,eAAKe,WAAW0B,WAAX,CAAuBzC,GAAvB,GAA2B,GAA3B,GAA+BhD,KAAKoD,IAAL,CAAU,GAAV,CAD/B;AAELH,gBAAM,KAFD;AAGLjD,gBAAM;AACJ+F,qBAAShC,WAAWtB;AADhB,WAHD;AAMLc,mBAAS,wBAAqB;AAAA,gBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,gBAAdC,GAAc,SAAdA,GAAc;AAAA,gBAAVzD,IAAU,SAAVA,IAAU;;AAC5B,gBAAI,KAAKwD,IAAT,EAAe;AACbtB,gBAAEC,QAAF,CAAW,QAAX;AACA;AACA,kBAAI,uBAAuBX,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+B,OAAKC,KAAL,CAAWC,SAA1C,CAA3B,EAAiF;AAC/E,uBAAKD,KAAL,CAAWC,SAAX,CAAqB,IAArB;AACD;AACF,aAND,MAMO;AACLK,gBAAEC,QAAF,CAAWsB,GAAX;AACD;AACF,WAhBI;AAiBLG,iBAAO,iBAAM;AACX1B,cAAEC,QAAF,CAAW,UAAX;AACD;AAnBI,SAAP;AAqBD;AAlGM;AAxC0B,GAArC;;AA8IA,MAAI6D,cAAc,IAAIpG,GAAJ,CAAQ;AACxBqG,QAAI,cADoB;AAExBjG,UAAM;AACJ;AACAuC,oBAAc,EAFV;AAGJ;AACA2D,mBAAa,EAJT;AAKJjE,uBAAiB,EALb;AAMJ;AACAkE,eAAS,KAPL;AAQJ;AACA7C,oBAAe,YAAU;AAAC,eAAOnD,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,OAAjD;AATV,KAFkB;AAaxBkB,aAAS;AACP;AACA8E,sBAAgB,wBAASC,YAAT,EAAsBC,UAAtB,EAAiC;AAC/C,YAAIvE,QAAQ,IAAZ;AACA,YAAIsB,OAAOgD,aAAazD,KAAb,CAAmB,GAAnB,EAAwBQ,IAAxB,CAA6B,EAA7B,CAAX;AACAlB,UAAEgD,YAAF,CAAe,MAAf;AACAhD,UAAEa,IAAF,CAAO;AACLC,eAAK,oCAAmCuD,WAAWlD,IAAX,CAAnC,GAAoD,YAApD,GAAiEiD,UADjE;AAELrD,gBAAM,KAFD;AAGLM,mBAAS,wBAAqB;AAAA,gBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,gBAAdC,GAAc,SAAdA,GAAc;AAAA,gBAAVzD,IAAU,SAAVA,IAAU;;AAC5B,gBAAI,KAAKwD,IAAT,EAAe;AACbzB,oBAAMQ,YAAN,GAAqBvC,IAArB;AACD,aAFD,MAEO;AACLkC,gBAAEC,QAAF,CAAWsB,GAAX;AACD;AACDvB,cAAEiD,YAAF;AACD,WAVI;AAWLvB,iBAAO,iBAAM;AACX1B,cAAEC,QAAF,CAAW,MAAX;AACAD,cAAEiD,YAAF;AACD;AAdI,SAAP;AAgBD,OAtBM;AAuBPtD,iBAAW,qBAAY;AAAE;AACvB,aAAKuE,cAAL,CAAoB,KAAK9C,YAAzB,EAAsC,KAAK4C,WAA3C;AACD;AAzBM,KAbe;AAwCxB9E,WAAO;AACL8E,mBAAa,uBAAY;AACvB,aAAKE,cAAL,CAAoB,KAAK9C,YAAzB,EAAsC,KAAK4C,WAA3C;AACD,OAHI;AAIL5C,oBAAc,wBAAY;AACxB,aAAK8C,cAAL,CAAoB,KAAK9C,YAAzB,EAAsC,KAAK4C,WAA3C;AACD;AANI;AAxCiB,GAAR,CAAlB;AAiDD","file":"page.js","sourcesContent":["function reportFileCenterFn () {\n\n  //页面头部\n  Vue.component('file-center-head', {\n    props: ['product_list', 'batch_down_list', 'product_data'],\n    template: `\n      <div class=\"file-center-head\">\n        <h1 class=\"file-center-head__title\">文件中心</h1>\n        <div class=\"file-center-head__report\">\n          <vue-multiple_select :options=\"options\" :flag_check_all=\"true\" :checked_arr=\"select_id\" :init_obj=\"init_obj\" v-on:multiple_select=\"select_id = ($event)\"></vue-multiple_select>\n        </div>\n        <div class=\"file-center-head__data\">\n          <vue-zebra_date_picker :value=\"currentDate\" v-on:select=\"currentDate = ($event)\"  :min_date=\"'2015-01-01'\" :max_date=\"currentDate\"></vue-zebra_date_picker>\n        </div>\n\n        <div style=\"flex-grow: 1;\"></div>\n\n        <button class=\"file-center-head__botchDown\" @click=\"batch_down()\">批量下载</button>\n\n        <a v-on:click=\"refresh()\" class=\"custom-grey-btn custom-grey-btn__refresh\">\n          <i class=\"oms-icon refresh\"></i>刷新\n        </a>\n      </div>\n    `,\n    data: function () {\n      return {\n        // options: '',\n        select_id: '',\n        currentDate: (function(){return moment().format('YYYY-MM-DD')})(),\n        init_obj: {\n          allSelected: '全部报表',\n          noMatchesFound: '未选择任何报表',\n          placeholder: '请先选择报表'\n        },\n        batch_down_fn: false\n      }\n    },\n    computed: {\n      options: function () {\n        let report_file_center = [];\n        //机构版专户版报表\n        if (3 == window.LOGIN_INFO.org_info.theme) {\n          report_file_center = [\n            {\n              value: '资产查询数据',\n              label: '资产查询数据',\n              num: '0'\n            },\n            {\n              value: '持仓查询数据',\n              label: '持仓查询数据',\n              num: '1'\n            },\n            {\n              value: '委托查询数据',\n              label: '委托查询数据',\n              num: '2'\n            },\n            {\n              value: '成交查询数据',\n              label: '成交查询数据',\n              num: '3'\n            },\n            {\n              value: '清算查询数据',\n              label: '清算查询数据',\n              num: '4'\n            }\n          ];\n        } else {\n          report_file_center = [\n            {\n              value: '产品报表',\n              label: '产品报表',\n              num: '0'\n            },\n            {\n              value: '股票持仓报表',\n              label: '股票持仓报表',\n              num: '1'\n            },\n            {\n              value: '资产查询数据',\n              label: '资产查询数据',\n              num: '2'\n            },\n            {\n              value: '持仓查询数据',\n              label: '持仓查询数据',\n              num: '3'\n            },\n            {\n              value: '委托查询数据',\n              label: '委托查询数据',\n              num: '4'\n            },\n            {\n              value: '成交查询数据',\n              label: '成交查询数据',\n              num: '5'\n            }\n          ];\n        }\n        return report_file_center;\n      }\n    },\n    watch: {\n      select_id: function () {\n        this.$emit('select_report_id', this.select_id);\n      },\n      currentDate: function () {\n        this.$emit('current_date_change', this.currentDate);\n      },\n      batch_down_fn: function () {\n        this.$emit('batch_down_change_click', this.batch_down_fn);\n      }\n    },\n    methods: {\n      refresh: function () {\n        //刷新页面,方便组件重复利用\n        if (\"[object Function]\" == Object.prototype.toString.call(this.$root.doRefresh)) {\n          this.$root.doRefresh(true);\n        }\n      },\n      batch_down: function () {\n        let _this = this;\n        this.batch_down_fn = true;\n        // 如果没有选中的报表id,禁止点击\n        if (undefined == this.batch_down_list || '' == this.batch_down_list) {\n          $.omsAlert('请先选择报表');\n          return false;\n        }\n\n        var down_url_arr = [];\n        this.batch_down_list.forEach((e) => {\n          _this.product_list.forEach((i) => {\n            if (e == i.id) {\n              let obj = '';\n              obj = i.down_url.split('storage/')[1];\n              down_url_arr.push(decodeURI(obj));\n            }\n          })\n        })\n\n        $.ajax({\n          url: '/utility/downloadzip',\n          type: 'GET',\n          data: {\n            user_id: window.LOGIN_INFO.user_id,\n            file_name:down_url_arr.join(','),\n            date: this.product_data.split('-').join('')\n          },\n          success: ({code,msg,data}) => {\n            window.location.href = '/utility/downloadzip?user_id='+window.LOGIN_INFO.user_id+'&file_name='+down_url_arr.join(',')+'&date='+this.product_data.split('-').join('');\n            return false;\n          },\n          error: () => {\n            $.omsAlert('网络异常，请尝试');\n          }\n        })\n\n      }\n    }\n  })\n  //input 点击事件，方便传值全选\n  Vue.component('report-input-checkout', {\n    props: ['reportItem', 'reportAllSelected', 'change_selected_id'],\n    template: `\n      <div>\n        <input type=\"checkbox\" v-model=\"change_model\" :disabled=\"disabledFn(reportItem)\" @click=\"change_selected_model()\"/>\n        {{reportItem.category}}\n      </div>\n    `,\n    data: function () {\n      return {\n        change_model: false,  //单个报表选中判断\n        change_model_id: this.reportItem.id  //当前报表id\n      }\n    },\n    watch: {\n      change_model: function () {  //通过是否勾选来得到选中的报表id\n        let _this = this;\n        if (false == this.change_model) {\n          this.change_selected_id.forEach((e,index) => {\n            if (_this.reportItem.id == e) {\n              _this.change_selected_id.splice(index,1);\n            }\n          })\n        } else {\n          this.change_selected_id.push(this.reportItem.id);\n        }\n        this.$emit('change_model_report', this.change_model);\n      },\n      change_model_id: function () {\n        this.$emit('change_model_report_id', this.change_model_id);\n      },\n      reportAllSelected: function () { //通过是否勾选来判断是否全部选中报表\n        if (1 != this.reportItem.status) {\n          return false;\n        }\n        this.change_model = this.reportAllSelected;\n      }\n    },\n    methods: {\n      change_selected_model: function () {\n        if (false == this.change_model) {\n          return this.change_model = false;\n        }\n        return this.change_model = true;\n      },\n      disabledFn: function (reportItem) {\n        if (1 != reportItem.status) {\n          return 'disabled';\n        }\n      }\n    }\n  })\n\n  Vue.component('file-center-content', {\n    props: ['product_list', 'product_data'],\n    template: `\n      <table class=\"file-center-content\">\n        <tr>\n          <th><input type=\"checkbox\" v-model=\"reportAllSelected\"/>类别</th>\n          <th>报表名</th>\n          <th>状态</th>\n          <th>生成时间</th>\n          <th></th>\n          <th></th>\n          <th></th>\n        </tr>\n        <tr v-for=\"reportItem in product_list\">\n          <td>\n            <report-input-checkout :change_selected_id=\"change_selected_id\" :reportAllSelected=\"reportAllSelected\" :reportItem=\"reportItem\"></report-input-checkout>\n          </td>\n          <td>{{reportItem.report_name}}</td>\n          <td v-text=\"reportStatus(reportItem)\"></td>\n          <td>{{reportItem.down_time}}</td>\n          <td><a :id=\"'report_id'+reportItem.id\" :class=\"{click_change: 1==reportItem.status,no_click_change:1!=reportItem.status}\" @click=\"reportDoenLoad(reportItem)\">下载</a></td>\n          <td><a class=\"file-center-content__reGenerate\" :class=\"{click_change: 1!=reportItem.status,no_click_change:1==reportItem.status || 0 == reportItem.status}\" @click=\"regenerate(reportItem)\">重新生成</a></td>\n          <td><a class=\"file-center-content__delete\" @click=\"deleteReport(reportItem)\">删除</a></td>\n        </tr>\n        <tr v-if=\"0 == product_list.length\">\n          <td colspan=\"7\">该时段暂无匹配记录</td>\n        </tr>\n      </table>\n    `,\n    data: function(){\n      return {\n        reportAllSelected: false,  //全选\n        change_selected_id: []\n      }\n    },\n    watch: {\n      change_selected_id: function () {\n        this.$emit('batch_down_report_id', this.change_selected_id);\n      }\n    },\n    methods: {\n      reportStatus: function (itemId) {\n        if (0 == itemId.status) {\n          return '生成中';\n        } else if (1 == itemId.status) {\n          return '已生成';\n        } else if (2 == itemId.status) {\n          return '已失败';\n        }\n      },\n      deleteReport: function (item) {  //删除报表文件\n        let _this = this;\n        $.confirm({\n          title: '退出确认',\n          content: `\n            <div class=\"vue-confirm\">\n              <div style=\"font-size: 14px; text-align: center; color: #000000; padding: 60px 0;\">确认删除该文件？</div>\n            </div>\n          `,\n          closeIcon: true,\n          columnClass: 'custom-window-width',\n          confirmButton: '确定',\n          confirmButtonClass: 'vue-confirm__btns--cancel',\n          confirm: function(){\n            $.startLoading();\n            $.ajax({\n              url: '/bms-pub/report/file_delete',\n              type: 'POST',\n              data: {\n                id: item.id\n              },\n              success: ({code,msg,data}) => {\n                if (0 == code) {\n                  //刷新页面,方便组件重复利用\n                  if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.doRefresh)) {\n                    _this.$root.doRefresh(true);\n                  }\n                  $.clearLoading();\n                  $.omsAlert('删除成功');\n                }\n              },\n              error: () => {\n                $.omsAlert('网络异常');\n              }\n            })\n          },\n          cancelButton: false\n        })\n\n      },\n      reportDoenLoad: function (reportItem) { //下载\n        let _this = this;\n        if (1 != reportItem.status) {  //如果是生成不成功的报表，下载不可点击\n          return false;\n        }\n        window.location.href = reportItem.down_url+'?n='+reportItem.report_name;\n      },\n      regenerate: function (reportItem) {\n        if (1 == reportItem.status || 0 == reportItem.status) { //如果是报表生成成功的时候，重新生成不可点\n          return false;\n        }\n        //由于各种类型的报表的参数结构不一致，与后台确认，只能根据数据的类型来得到数据\n        let  data = [];\n        $.each(reportItem.request_url.data, (key, val) => {\n          let str = '';\n          if ('string' == (typeof val)) {\n            str = key+'='+val;\n            data.push(str);\n          } else if ('object' == (typeof val)){\n            $.each(val, (key1, val1) => {\n              if ('string' == (typeof val1)) {\n                str = key1 + '=' + val1;\n                data.push(str);\n              }\n            })\n          }\n        })\n        $.ajax({\n          url: reportItem.request_url.url+'?'+data.join('&'),\n          type: 'GET',\n          data: {\n            file_id: reportItem.id\n          },\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              $.omsAlert('重新生成成功');\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(this.$root.doRefresh)) {\n                this.$root.doRefresh(true);\n              }\n            } else {\n              $.omsAlert(msg);\n            }\n          },\n          error: () => {\n            $.omsAlert('网络异常，请重试');\n          }\n        })\n      }\n    }\n  })\n\n  var report_form = new Vue({\n    el: '#file_center',\n    data: {\n      // 产品组列表数据\n      product_list: [],\n      //选中的报表类型\n      chgSelected: '',\n      batch_down_list: [],\n      //批量下载\n      batchFn: false,\n      //当前日期\n      product_data: (function(){return moment().format('YYYY-MM-DD')})()\n    },\n    methods: {\n      //下拉列表中产品的数据\n      getProductList: function(current_data,reportType){\n        let _this = this;\n        let date = current_data.split('-').join('');\n        $.startLoading('正在查询');\n        $.ajax({\n          url: '/bms-pub/report/file_list?date='+ parseFloat(date)+'&category='+reportType,\n          type: 'GET',\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              _this.product_list = data;\n            } else {\n              $.omsAlert(msg);\n            }\n            $.clearLoading();\n          },\n          error: () => {\n            $.omsAlert('网络异常');\n            $.clearLoading();\n          }\n        })\n      },\n      doRefresh: function () { //刷新\n        this.getProductList(this.product_data,this.chgSelected);\n      }\n    },\n    watch: {\n      chgSelected: function () {\n        this.getProductList(this.product_data,this.chgSelected);\n      },\n      product_data: function () {\n        this.getProductList(this.product_data,this.chgSelected);\n      }\n    }\n  });\n}\n"]}
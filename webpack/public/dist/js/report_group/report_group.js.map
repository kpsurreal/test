{"version":3,"sources":["report_group/report_group.js"],"names":["reportGroupFn","productSortData","field_sort","comGridSortData","order","order_by","display_rules","id","label","format","class","addition_icon","unit","positionSortData","style","positionModel","positionGridSortData","reportActive","window","LOGIN_INFO","role_permission","GV","permissions","Vue","component","props","template","data","show_remark","remark_modify","methods","toggle","_this","remark","undefined","$nextTick","$","$el","find","focus","change_show","onBlur","security_remark","save","length","omsAlert","startLoading","ajax","url","ajax_url","remark_name","type","ajax_data","success","code","msg","Object","prototype","toString","call","$root","customRefreshAfterModified","positionDoRefresh","clearLoading","error","mounted","vm","selectize","delimiter","persist","placeholder","place_holder","valueField","labelField","onChange","v","$emit","render","option","item","escape","color","addOption","options","setValue","watch","value","clearOptions","computed","dragOptions","animation","ghostClass","display_position","rtn","position_list","forEach","e","obj","security_type","security_type_name","arrSecurityId","security_id","split","security_name","pos_direction_name","hold_volume","parseIntNumber","exclude_sub","market_value","suspension_info","status","valuation","market_status","market_value_before","contract_value","profit_rate","weight","push","VUECOMPONENT","sort","getRemarksUrl","getReportRemark","remark_id","get_remark","current_product_remark","product_id","stock_id","chgSort","map","common_storage","setItem","displayValue","sub_value","rule","Array","Function","args","concat","slice","apply","onMove","relatedContext","draggedContext","element","relatedElement","draggedElement","fixed","onEnd","getDescInfo","product_info","sub_product","REQUEST_PREFIX","net_pos","num","parseInt","onmousePromit","pos_total","numeralNumber","arg","str","i","numeral","checkPositive","parseFloat","checkNegative","subData_str","show","fund_content","language_show","css","addClass","removeClass","language_hide","hide","currentDate","moment","chgSelected","checked_arr","chgSignSelected","checked_sign_arr","cal_expect","end_product","all_show_describle","show_open_close","select_id","show_type","disabled_type","tip_show","product_list","name","filter","sign_arr","product_current_sign","keyword","sign_id","sign_color","init_obj","allSelected","noMatchesFound","show_tip","hide_tip","all_show","export_report","current_procut_id","_change_id_type","lists_id","hasClass","_security_summary","product_sign","productAarr","product_sign_arr","join","sorted","include_sub","arr","product_info_arr","group","product_sign_id","date","security_summary","refresh","checkbox_pos_total","checkbox_cal_expect","judge_date","Date","getFullYear","getMonth","getDate","val","display_detail","chang_sub_id","change_sign_show","add_sign_popup","product_scrible_hover","is_pole","addCustomShow","customDescrible","modify_sign_value","control_show","signPupManager","currentData","current_data","poleDeviation","deviation","signDelete","product_scrible_content","sign_keyword","signProductArr","product_sign_pole_all","signTotal","total_assets","product_sign_pole","is_benchmarking","product_type_id","addProductSign","each","html","customFocus","customBlur","currentKeyword","modifyPole","setTimeout","productSignDelete","customDelete","change_sign_list","signItem_describle","signItem","change_sign_color","getAdjustValue","getAdjustVolume","getAdjustAssetsUrl","getAdjustVolumeUrl","toggleDisplay","showSubFund","fund","adjust_assets","volume","adjust_volume","sub_show","sub_fund_id","curren_sign_pole","pole_style","productSelectShow","product_select_sign","change_sub_data","main_product","update_time","defaultSelected","user_stock_display","user_id","stock_total","position_show","position_user_name","user_name","componey_upDate","managerItem","userId","stock_arr","position_stock_data","upDate","key","updated_time","dataTime","hour","getHours","minutes","getMinutes","seconds","getSeconds","position_stock_volume","position_user_stock","position_acc_1","position_acc_2","position_acc_3","position_acc_4","position_acc_5","stocks","togglePositionUserDisplay","position_data_display","stock_name","stockCode","stock_code","stock_code_full_name","position_acc","is_star","total_share_capital","proportion_capital","position_capital_5","position_placards","positionDataShowSort","styleType","getPositionRemarksUrl","follow_text","followFn","target_id","_is_val","positionSort","position_user_display_detail","modelOptions","moving","managerOptions","totalCapitalOptions","init_capital_obj","init_manager_obj","managerSelected","totalSelected","concernStock","position_describle","position_display_detail","componeyUpDate","componey_stock","commoney_data","total","scroll","scrollSensitivity","handle","position_real_name","userArr","real_name","isConcernStock","positionExpert","ManagerSelectedArr","only_star","position_data_show_sort","change_position_users","position_rate","is_only_star","is_tiny","is_explode_mode","positionRefresh","position_all_show","togglePositionDisplay","add_follow_all","manager_follow_id","stocks_arr","temp_arr","temp_len","Math","ceil","n","startFn","oldIndex","newIndex","moveId","cursorId","cursorIndex","indexOf","moveIndex","unshift","splice","componey_stock_volume","position_acc_","componeyDate","ajaxTime","report_form","el","active","position_form_data","changeManagerSelected","modelPositionId","is_starter","product_promise","checkDisplay","reportChange","change","doRefresh","onStart","getProductSign","getProductList","permission_id","res","product","product_report_info","_data","clearTimeout","getItem","j","verify_id","cur_info","sign_product_arr","all_sign_arr0","atr_sign","index","ele","getPositionData","users","reports","key1","val1","reportData","selectedArr"],"mappings":"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","file":"report_group.js","sourcesContent":["function reportGroupFn () {\n  /*报表页面*/\n  // 综合报表页面\n  // Author: xueke.song, andrew.liu\n\n  // 产品组排序的公共数据\n  // 每一次ajax获取到产品组信息时，获取保存的排序规则进行排序       已实现\n  // 每一次用户拖动之后，计算出交换的步骤，修改后保存               保存已实现，但是计算过程还没有\n  let productSortData = {\n    field_sort: []\n  };\n  // 表格列拖动的公共数据\n  // 每一次ajax获取到产品组信息时，获取保存的排序规则进行排序       已实现\n  // 每一次用户拖动之后（或者点击排序方式修改），修改保存           已实现\n  let comGridSortData = {\n    // field_sort 变量在显示时无用，只是保存及与后端交互时需要用到该变量名。保存的field_sort是要用来决定display_rules的数组元素顺序的。\n    // 譬如，可以在浏览器console中执行“comGridSortData.display_rules.shift()”，可以看到表格的动态变化\n    // field_sort: ['security_type_name', 'security_id', 'security_name', 'security_market', 'pos_direction_name', 'hold_volume', 'market_value', 'contract_value', 'profit_rate', 'weight'],\n    order: '',\n    order_by: '',\n    display_rules: [{\n      id: 'security_type_name', // 变量id\n      label: '证券类别',         // 变量显示名称\n      format: '',               // 格式化处理函数，不能提前进行处理，因为数据还要用来排序什么的。此处的处理理解为只为显示，脱离于逻辑 （函数定义于vue中）\n      class: 'left60'           // 样式\n    },{\n      id: 'security_id',\n      label: '证券代码',\n      format: '',\n      class: 'left60'\n    },{\n      id: 'security_name',\n      label: '证券名称',\n      format: '',\n      class: 'left60'\n    },{\n      id: 'pos_direction_name',\n      label: '持仓方向',\n      format: '',\n      class: 'left60'\n    },{\n      id: 'hold_volume',\n      label: '持仓数量',\n      format: '',\n      class: 'right60'\n    },{\n      id: 'market_value',\n      label: '持仓市值',\n      format: ['numeralNumber', 2],\n      addition_icon: 'market_value_icon',\n      class: 'right60'\n    },{\n      id: 'contract_value',\n      label: '合约价值',\n      format: ['numeralNumber', 2],\n      class: 'right60'\n    },{\n      id: 'profit_rate',\n      label: '浮盈率',\n      format: ['numeralNumber', 2],\n      class: 'right60',\n      unit: '%'\n    },{\n      id: 'weight',\n      label: '权重',\n      format: ['numeralNumber', 2],\n      class: 'right60',\n      unit: '%'                   // 附带后缀单位\n    },\n    {\n      id: 'remark_change',\n      label: '备注',\n      class: 'remark_left'\n    }]\n  };\n\n  //持仓股票 完整模式,含有positionModel:1代表是精简模式\n  let positionSortData = {\n    order: 'desc',  //默认按降序排列，desc降序，asc升序\n    order_by: 'proportion_capital',  //默认按照什么进行排序，这儿填写的是display_rules下的某一个id名\n    display_rules: [{\n      id: 'stock_code',\n      label: '证券代码',\n      format: '',\n      class: 'left60',\n      style: 'padding-left:40px;'\n    },{\n      id: 'stock_name',\n      label: '证券名称',\n      format: '',\n      class: 'left60',\n      positionModel: 1,\n      style: 'padding-left:40px;'\n    },{\n      id: 'hold_volume',\n      label: '持仓数量',\n      format: '',\n      class: 'right60',\n      style: 'padding-right:40px;'\n    },{\n      id: 'market_value',\n      label: '持仓市值',\n      format: ['numeralNumber', 2],\n      addition_icon: 'market_value_icon',\n      class: 'right60',\n      style: 'padding-right:40px;'\n    },\n    {\n      id: 'proportion_capital',\n      label: '占总股本',\n      format: ['numeralNumber', 2],\n      class: 'right60',\n      unit: '%',\n      positionModel: 1,\n      style: ''\n    },\n    {\n      id: 'position_capital_5',\n      label: '5%总股本',\n      format: ['numeralNumber', 2],\n      class: 'right60',\n      style: 'padding-right:40px;'\n    },\n    {\n      id: 'total_share_capital',\n      label: '总股本量',\n      format: ['numeralNumber', 2],\n      class: 'right60',\n      style: 'padding-right:40px;'\n    },\n    {\n      id: 'position_placards',\n      label: '举牌差值',\n      format: ['numeralNumber', 2],\n      addition_icon: 'market_value_icon',\n      class: 'right60',\n      style: 'padding-right:40px;'\n    },\n    {\n      id: 'remark',\n      label: '备注',\n      class: 'remark_left ',\n      positionModel: 1\n    }]\n  };\n\n  let positionGridSortData = {\n    field_sort: []\n  }\n\n  let reportActive = '';\n  if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_PISITION_REPORT_VIEW']]) {  //持仓报表\n    reportActive = 'position';\n  }\n  if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_REPORT_VIEW']]) {  //产品报表\n    reportActive = 'product';\n  }\n  //修改备注新样式\n  Vue.component('vue-remark-modify',{\n    props: ['remark', 'ajax_url', 'ajax_data', 'remark_name'],\n    template: `\n      <div class=\"modify-remark\">\n        <div class=\"modify-remark__content\">\n          <span class=\"modify-remark__content__value\" v-text=\"security_remark()\" :title=\"remark\"></span>\n          <a class=\"modify-remark__content__icon\" v-on:click=\"toggle()\"></a>\n        </div>\n        <div class=\"modify-remark__describle\" v-show=\"show_remark\">\n    \t    <input type=\"text\" :value=\"remark_modify\" v-on:input=\"remark_modify = $event.target.value\" class=\"modify-remark__describle__input\" v-on:blur=\"onBlur()\"/>\n    \t    <a v-on:mousedown=\"save()\" class=\"modify-remark__describle__determine\">确定</a>\n    \t    <a v-on:click=\"change_show()\" class=\"modify-remark__describle__cancel\">取消</a>\n    \t  </div>\n      </div>\n    `,\n    data: function () {\n    \treturn {\n    \t  show_remark: false,\n        remark_modify: ''\n    \t}\n    },\n    methods: {\n    \ttoggle: function () { //当点击输入文字的icon时，应该只能显示修改框，不能隐藏\n    \t  this.show_remark = true;\n        let _this = this;\n        if ('' == this.remark || undefined == this.remark) {\n          this.remark_modify = '';\n        } else {\n          this.remark_modify = this.remark;\n        }\n        this.$nextTick(function(){\n          $(_this.$el).find('input.modify-remark__describle__input').focus();\n        })\n    \t},\n    \tchange_show: function () {\n        this.show_remark = false;\n    \t},\n      onBlur: function () {\n        this.show_remark = false;\n      },\n      security_remark: function () {\n        if ('' == this.remark || undefined == this.remark) {\n          return '--';\n        } else {\n          return this.remark;\n        }\n      },\n    \tsave: function () {\n        var _this = this;\n        if (this.remark_modify.length > 200) {\n          $.omsAlert('最多支持输入200个字');\n          return false;\n        }\n\n        $.startLoading('正在查询');\n\n    \t  $.ajax({\n    \t    url: this.ajax_url+'?'+this.remark_name+'=' + this.remark_modify,\n    \t    type: 'POST',\n    \t    data: this.ajax_data,\n    \t  \tsuccess:function ({code,msg,data}) {\n            if (0 == code) {\n              _this.show_remark = false;\n              $.omsAlert('修改成功');\n\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n                _this.$root.customRefreshAfterModified(true);\n              }\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.positionDoRefresh)) {\n                _this.$root.positionDoRefresh(true);\n              }\n            } else {\n              $.omsAlert(msg);\n            }\n            $.clearLoading();\n    \t  \t},\n    \t  \terror:function () {\n            $.omsAlert('网络异常，请重试');\n            $.clearLoading();\n    \t  \t}\n    \t  })\n    \t}\n    }\n  })\n\n  // 下拉框插件 selectize  专属于产品标记\n  Vue.component('vue-selectize-sign', {\n    props: ['options', 'value', 'place_holder'],\n    template: `\n        <select>\n          <slot></slot>\n        </select>\n    `,\n    mounted: function () {\n      var vm = this;\n      var selectize = $(this.$el).selectize({\n        delimiter: ',',\n        persist: true,\n        placeholder: this.place_holder,\n        valueField: 'value',\n        labelField: 'label',\n        onChange: function(v){\n          vm.$emit('input', v);\n        },\n        render: {\n          option: function (item,escape) {\n            let label = item.label;\n            return '<div class=\"option select_sign\">' +\n                '<span class=\"select_sign_icon '+item.color+'\"></span>'+\n                '<span class=\"label\">'+escape(label)+'</span>'+\n                '</div>';\n          }\n        }\n      })[0].selectize;\n      selectize.addOption(this.options);\n      selectize.setValue('all');\n      selectize = null;\n    },\n    watch: {\n      value: function (value) {\n        // update value\n        $(this.$el).selectize()[0].selectize.setValue(value);\n      },\n      options: function (options) {\n        // // update options\n        var value = this.value;\n        var selectize = $(this.$el).selectize()[0].selectize;\n        selectize.clearOptions(true);\n        selectize.clearOptions(true);\n        selectize.addOption(this.options);\n        selectize.setValue(value);\n        selectize = null;\n      }\n    }\n  });\n\n  //子基金产品详细内容\n  Vue.component('report-table-sub-funds', {\n    props: ['position_list', 'pos_total', 'product_info', 'current_product_remark'],\n    template: `\n    <table class=\"journel-sheet-grid\">\n      <draggable :list=\"display_rules\" element=\"tr\" :options=\"dragOptions\" :move=\"onMove\" @end=\"onEnd\">\n        <th v-bind:class=\"rule.class\" v-for=\"rule in display_rules\">\n          <span>{{rule.label}}</span>\n          <a class=\"icon-sortBy\" v-on:click=\"chgSort(rule.id)\" v-if=\"rule.label != '备注'\">\n            <i class=\"icon-asc\" :class=\"{active: (order_by == rule.id && order == 'asc')}\"></i>\n            <i class=\"icon-desc\" :class=\"{active: (order_by == rule.id && order == 'desc')}\"></i>\n          </a>\n        </th>\n      </draggable>\n      <tbody>\n        <tr v-for=\"sub_value in display_position\" :class=\"{lavender: sub_value.security_type==5&&pos_total==true, light_blue: sub_value.security_type==2&&pos_total==true, asset_yellow: sub_value.security_type==4&&pos_total==true}\" :title=\"onmousePromit(sub_value)\">\n          <td v-for=\"rule in display_rules\" v-bind:class=\"rule.class\">\n            <vue-remark-modify v-if=\"rule.class=='remark_left'\" :remark_name=\"'remark'\" :remark=\"getReportRemark(product_info.id,sub_value.security_id,product_info.type)\" :ajax_url=\"getRemarksUrl()\" :ajax_data=\"{stock_id:sub_value.security_id,product_id:product_info.id,type:product_info.type}\"></vue-remark-modify>\n            <span v-else>\n              {{displayValue(sub_value, rule)}}\n              <prompt-language v-if=\"'market_value_icon' == rule.addition_icon && 1== sub_value.market_status\" :language_val=\"'系统已对其中'+sub_value.hold_volume+'股进行停牌股票估值调整，停牌日市值为'+numeralNumber(sub_value.market_value_before,2)+'，调整后市值为'+numeralNumber(sub_value.market_value,2)\" style=\"width: 15px;display: inline-block;left: 0;\"></prompt-language>\n            </span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    `,\n    data: function () {\n      return comGridSortData;\n    },\n    computed: {\n      // 可拖动插件的入参\n      dragOptions () {\n        return  {\n          animation: 0,\n          // group: 'description',\n          // disabled: !this.editable,\n          ghostClass: 'ghost'\n        };\n      },\n      // 显示数据准备\n      display_position: function(){\n        let _this = this;\n        let rtn = [];\n        this.position_list.forEach(function(e){\n          let obj = {};\n          obj.security_type = e.security_type;\n\n          // 证券类别\n          obj.security_type_name = e.security_type_name;\n          // 证券代码\n          let arrSecurityId = e.security_id.split(/\\..*/);\n          obj.security_id = arrSecurityId[0];\n          // 证券名称\n          obj.security_name = e.security_name;\n          // 持仓方向\n          obj.pos_direction_name = e.pos_direction_name\n          // 持仓数量\n          obj.hold_volume = _this.parseIntNumber(e.exclude_sub && e.exclude_sub.hold_volume);\n\n          // 持仓市值 针对股票，需要判断是否计算停牌股票\n          if (e.security_type_name == '期货') {\n            obj.market_value = '--';\n          }else{\n            if(e.exclude_sub.suspension_info.status == 1){\n              obj.market_value = e.exclude_sub && e.exclude_sub.suspension_info.valuation;  //停牌估值后的市值\n              obj.market_status = e.exclude_sub.suspension_info.status;  //是否停牌估值1停牌估值\n              obj.market_value_before = e.exclude_sub && e.exclude_sub.market_value;\n            }else{\n              obj.market_value = e.exclude_sub && e.exclude_sub.market_value;\n            }\n          }\n\n          // 合约价值\n          // obj.contract_value = e.exclude_sub && e.exclude_sub.contract_value;\n          if (e.security_type_name == '期货') {\n            obj.contract_value = e.exclude_sub && e.exclude_sub.market_value;\n          }else{\n            obj.contract_value = '--';\n          }\n\n          // 浮盈率\n          if (e.exclude_sub.profit_rate == '--') {\n            obj.profit_rate = '--';\n          }else{\n            obj.profit_rate = e.exclude_sub.profit_rate*100;\n          }\n\n          // 权重\n          if (1 == e.exclude_sub.suspension_info.status == 1) {\n            obj.weight = e.exclude_sub.suspension_info.weight*100;\n          }else{\n            obj.weight = e.exclude_sub.weight*100;\n          }\n\n          rtn.push(obj);\n        });\n\n        // 步骤2，根据排序逻辑进行排序\n        rtn = VUECOMPONENT.sort(rtn, _this.order, _this.order_by);\n        return rtn;\n      }\n    },\n    methods: {\n      getRemarksUrl: function(){\n        return '/bms-pub/report/remark/add_remark';\n      },\n      getReportRemark: function (remark_id,security_id,type) {  //通过方法得到相对应的备注  remark_id是产品id security_id是股票id\n        var get_remark;\n        this.current_product_remark.forEach(function (e) {\n          if (remark_id == e.product_id && security_id == e.stock_id && type == e.type) {\n            get_remark = e.remark;\n          }\n        })\n        return get_remark;\n      },\n      chgSort: function(id){\n        if (id == this.order_by) {\n          if (this.order == 'asc') {\n            this.order = 'desc';\n          }else if(this.order == 'desc'){\n            this.order = '';\n          }else{\n            this.order = 'asc'\n          }\n        }else{\n          this.order_by = id;\n          this.order = 'asc';\n        }\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.display_rules.map(function(e){\n          return e.id;\n        });\n        obj.order_by = this.order_by;\n        obj.order = this.order;\n        common_storage.setItem('report_group__grid_order', obj);\n      },\n      displayValue: function(sub_value, rule){\n        let value = sub_value[rule.id];\n        if ((rule.format != '') && (rule.format instanceof Array) && (this[rule.format[0]] instanceof Function)) {\n          // value = this[rule.format].call(this, value, )\n          let args = [value].concat(rule.format.slice(1))\n          value = this[rule.format[0]].apply(this, args);\n\n        }\n        if (rule.unit) {\n          return value + rule.unit;\n        }else{\n          return value;\n        }\n      },\n      onMove ({relatedContext, draggedContext}) {\n        if ('备注' == draggedContext.element.label) {\n          return false;\n        }\n        const relatedElement = relatedContext.element;\n        const draggedElement = draggedContext.element;\n\n        return (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      },\n      onEnd ({}){\n        // 用户切换表格排序，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.display_rules.map(function(e){\n          return e.id\n        });\n        obj.order_by = this.order_by;\n        obj.order = this.order;\n        common_storage.setItem('report_group__grid_order', obj);\n      },\n      getDescInfo: function () { //备注\n        var _this = this;\n        this.product_info.sub_product.forEach(function (e) {\n          _this.id = e.id;\n          if (_this.id == e.id) {\n            _this.ajax_url = window.REQUEST_PREFIX + 'omsv2/report/product_group_report_remark?id='+e.id+'&type='+e.type+'&stock_id='+e.net_pos.stock_id+'&desc='+_this.value\n          }\n        })\n      },\n      parseIntNumber: function (num) { //将数字变为整数\n        return parseInt(num);\n      },\n      onmousePromit: function (sub_value) { //\n        if (this.pos_total == false) {\n          return false;\n        } else {\n          if (sub_value.security_type == 5) {\n            return '定增持仓';\n          } else if (sub_value.security_type == 2) {\n            return '收益互换持仓';\n          } else if (sub_value.security_type == 4) {\n            return '场外货币基金';\n          }\n        }\n      },\n      numeralNumber: function(arg, num){\n        if ('--' == arg || '' === arg || undefined == arg) {\n          return '--'\n        }\n        if (undefined != num) {\n          var str = '0.'\n          for (var i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      },\n      checkPositive: function(num){\n        return parseFloat(num) > 0;\n      },\n      checkNegative: function(num){\n        return parseFloat(num) < 0;\n      }\n    }\n  })\n\n  //基金产品详情\n  Vue.component('report-table-securities', {\n    props: ['product_info', 'show', 'pos_total', 'current_product_remark'],\n    template: `\n      <table class=\"journel-sheet-grid\">\n        <draggable :list=\"display_rules\" element=\"tr\" :options=\"dragOptions\" :move=\"onMove\" @end=\"onEnd\">\n          <th v-bind:class=\"rule.class\" v-for=\"rule in display_rules\">\n            <span>{{rule.label}}</span>\n            <a class=\"icon-sortBy\" v-on:click=\"chgSort(rule.id)\" v-if=\"rule.label != '备注'\">\n              <i class=\"icon-asc\" :class=\"{active: (order_by == rule.id && order == 'asc')}\"></i>\n              <i class=\"icon-desc\" :class=\"{active: (order_by == rule.id && order == 'desc')}\"></i>\n            </a>\n          </th>\n        </draggable>\n        <tbody>\n          <tr v-for=\"fund_content in display_position\" :class=\"{lavender:  fund_content.security_type==5&&pos_total==true, light_blue: fund_content.security_type==2&&pos_total==true, asset_yellow: fund_content.security_type==4&&pos_total==true}\" :title=\"onmousePromit(fund_content)\" v-if=\"show || (!show && !(fund_content.hold_volume == 0 && fund_content.market_value == 0))\">\n            <td v-for=\"rule in display_rules\" v-bind:class=\"rule.class\">\n              <vue-remark-modify  v-if=\"rule.class=='remark_left'\" :remark_name=\"'remark'\" :remark=\"getReportRemark(product_info.id,fund_content.security_id,product_info.type)\" :ajax_url=\"getRemarksUrl()\" :ajax_data=\"{stock_id:fund_content.security_id,product_id:product_info.id,type:product_info.type}\"></vue-remark-modify>\n              <span v-else>\n                {{displayValue(fund_content, rule)}}\n                <prompt-language v-if=\"'market_value_icon' == rule.addition_icon && 1== fund_content.market_status\" :language_val=\"'系统已对其中'+fund_content.hold_volume+'股进行停牌股票估值调整，停牌日市值为'+numeralNumber(fund_content.market_value_before,2)+'，调整后市值为'+numeralNumber(fund_content.market_value,2)\" style=\"width: 15px;display: inline-block;left: 0;\"></prompt-language>\n              </span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    `,\n    data: function () {\n      return comGridSortData\n    },\n    computed: {\n      // 可拖动插件的入参\n      dragOptions () {\n        return  {\n          animation: 0,\n          // group: 'description',\n          // disabled: !this.editable,\n          ghostClass: 'ghost'\n        };\n      },\n      // 显示数据准备\n      display_position: function(){\n        let _this = this;\n        let rtn = [];\n        let subData_str = '';\n        if (this.show) {\n          subData_str = 'include_sub';\n        }else{\n          subData_str = 'exclude_sub';\n        }\n\n        // 步骤1，根据接口数据进行准备\n        this.product_info.position_list.forEach(function(e){\n          let obj = {};\n          obj.security_type = e.security_type;\n\n          // 证券类别\n          obj.security_type_name = e.security_type_name;\n          // 证券代码\n          let arrSecurityId = e.security_id.split(/\\..*/);\n          obj.security_id = arrSecurityId[0];\n          // 证券名称\n          obj.security_name = e.security_name;\n          // 持仓方向\n          obj.pos_direction_name = e.pos_direction_name\n          // 持仓数量\n          obj.hold_volume = _this.parseIntNumber(e[subData_str] && e[subData_str].hold_volume);\n\n          // 持仓市值 针对股票，需要判断是否计算停牌股票\n          if (e.security_type_name == '期货') {\n            obj.market_value = '--';\n          }else{\n            if(e[subData_str].suspension_info.status == 1){\n              obj.market_value = e[subData_str] && e[subData_str].suspension_info.valuation;\n              obj.market_status = e[subData_str] && e[subData_str].suspension_info.status;\n              obj.market_value_before = e[subData_str] && e[subData_str].market_value;\n            }else{\n              obj.market_value = e[subData_str] && e[subData_str].market_value;\n            }\n          }\n\n          // 合约价值\n          // obj.contract_value = e[subData_str].market_value;\n          if (e.security_type_name == '期货') {\n            obj.contract_value = e[subData_str].market_value;\n          }else{\n            obj.contract_value = '--';\n          }\n\n          // 浮盈率\n          if (e[subData_str].profit_rate == '--') {\n            obj.profit_rate = '--';\n          }else{\n            obj.profit_rate = e[subData_str].profit_rate*100;\n          }\n\n          // 权重\n          if (1 == e[subData_str].suspension_info.status == 1) {\n            obj.weight = e[subData_str].suspension_info.weight*100;\n          }else{\n            obj.weight = e[subData_str].weight*100;\n          }\n\n          rtn.push(obj);\n        });\n\n        // 步骤2，根据排序逻辑进行排序\n        rtn = VUECOMPONENT.sort(rtn, _this.order, _this.order_by);\n        return rtn;\n        // if (_this.order == 'asc' || _this.order == 'desc') {\n        //   rtn.sort((a, b) => {\n        //     let x = a[_this.order_by];\n        //     let y = b[_this.order_by];\n        //     if ( !isNaN(parseFloat(x)) && !isNaN(parseFloat(y)) ) {\n        //       x = parseFloat(x);\n        //       y = parseFloat(y);\n        //     }\n        //     if (x == '--') {\n        //       return -1\n        //     }\n        //     if (y == '--') {\n        //       return 1\n        //     }\n        //     if (x > y) {\n        //       return 1;\n        //     }\n        //     if (x < y) {\n        //       return -1;\n        //     }\n        //     return 0;\n        //   })\n\n        //   if ('desc' == _this.order) {\n        //     rtn.reverse();\n        //   }\n        //   return rtn;\n        // }else{\n        //   return rtn;\n        // }\n      }\n    },\n    methods: {\n      getRemarksUrl: function(){\n        return '/bms-pub/report/remark/add_remark';\n      },\n      getReportRemark: function (remark_id,security_id,type) {  //通过方法得到相对应的备注  remark_id是产品id security_id是股票id\n        var get_remark;\n        this.current_product_remark.forEach(function (e) {\n          if (remark_id == e.product_id && security_id == e.stock_id && type == e.type) {\n            get_remark = e.remark;\n          }\n        })\n        return get_remark;\n      },\n      chgSort: function(id){\n\n        if (id == this.order_by) {\n          if (this.order == 'asc') {\n            this.order = 'desc';\n          }else if(this.order == 'desc'){\n            this.order = '';\n          }else{\n            this.order = 'asc'\n          }\n        }else{\n          this.order_by = id;\n          this.order = 'asc';\n        }\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.display_rules.map(function(e){\n          return e.id\n        });\n        obj.order_by = this.order_by;\n        obj.order = this.order;\n        common_storage.setItem('report_group__grid_order', obj);\n      },\n      displayValue: function(sub_value, rule){\n        let value = sub_value[rule.id];\n        if ((rule.format != '') && (rule.format instanceof Array) && (this[rule.format[0]] instanceof Function)) {\n          // value = this[rule.format].call(this, value, )\n          let args = [value].concat(rule.format.slice(1))\n          value = this[rule.format[0]].apply(this, args);\n\n        }\n        if (rule.unit) {  //针对浮盈率和权重\n          if ('--' == value) {\n            return value;\n          } else {\n            return value + rule.unit\n          }\n        }else{\n          return value;\n        }\n      },\n      onMove ({relatedContext, draggedContext}) {\n        if ('备注' == draggedContext.element.label) {\n          return false;\n        }\n        const relatedElement = relatedContext.element;\n        const draggedElement = draggedContext.element;\n\n        return (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      },\n      onEnd (){\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.display_rules.map(function(e){\n          return e.id\n        });\n        obj.order_by = this.order_by;\n        obj.order = this.order;\n        common_storage.setItem('report_group__grid_order', obj);\n      },\n      getDescInfo: function () {\n        var _this = this;\n        this.product_info.forEach(function (e) {\n          _this.id = e.id;\n          if (_this.id == e.id) {\n            _this.ajax_url = window.REQUEST_PREFIX + 'omsv2/report/product_group_report_remark?id='+e.id+'&type='+e.type+'&stock_id='+e.net_pos.stock_id+'&desc='+_this.value;\n          }\n        })\n      },\n      onmousePromit: function (fund_content) {  //判断基金类型\n        if (this.pos_total == false) {\n          return false;\n        } else {\n          if (fund_content.security_type == 5) {\n              return '定增持仓';\n          } else if (fund_content.security_type == 2) {\n              return '收益互换持仓';\n          } else if (fund_content.security_type == 4) {\n              return '场外货币基金';\n          }\n        }\n      },\n      parseIntNumber: function (num) {\n        return parseInt(num);\n      },\n      numeralNumber: function(arg, num){\n        if ('--' == arg || '' === arg || undefined == arg) {\n          return '--'\n        }\n        if (undefined != num) {\n          var str = '0.'\n          for (var i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      },\n      checkPositive: function(num){\n        return parseFloat(num) > 0;\n      },\n      checkNegative: function(num){\n        return parseFloat(num) < 0;\n      }\n    }\n  })\n\n  //hover提示语\n  Vue.component('prompt-language', {\n    props: ['language_val'],\n    template: `<span class=\"dot-tip exclamation\">\n      <div v-on:mouseover=\"language_show()\" v-on:mouseout=\"language_hide()\">\n        <em>i</em>\n        <div class=\"str\" style=\"display:none;\">\n          <span class=\"msg\">\n            <span>{{language_val}}</span>\n          </span>\n        </div>\n      </div>\n    </span>`,\n    methods: {\n      language_show: function () {\n        $(this.$el).find('.str').show();\n        if ($(this.$el).find('.str .msg').css('width').split('px')[0] > 300) {\n          $(this.$el).find('.str .msg').addClass('hover-tip-width');\n        } else {\n          $(this.$el).find('.str .msg').removeClass('hover-tip-width');\n        }\n      },\n      language_hide: function () {\n        $(this.$el).find('.str').hide();\n        $(this.$el).find('.str .msg').removeClass('hover-tip-width');\n      }\n    }\n  })\n\n  //页面头部\n  Vue.component('report-table-head', {\n    props: ['product_list', 'current_data', 'current_procut_id', 'product_info_arr', 'product_current_sign', 'product_sign_pole_all', 'product_sign_arr'],  //slot 具名标签\n    template: `\n      <div class=\"journel_sheet_head\" style=\"display:block;padding-bottom:10px;\">\n        <div style=\"display:flex;\">\n            <select name=\"product_type\" class=\"journel_sheet_head--select\" v-model=\"show_type\">\n              <option value=\"running\">运行中</option>\n              <option value=\"end\">已结束</option>\n              <option value=\"\">全部状态</option>\n            </select>\n          <div class=\"journel_sheet_head--select\">\n            <vue-multiple_select :options=\"options\" :flag_check_all=\"true\" :chg_opt_flag_check_all=\"true\" :checked_arr=\"chgSelected\" :init_obj=\"init_obj\" v-on:multiple_select=\"chgSelected = ($event)\"></vue-multiple_select>\n          </div>\n          <div class=\"journel_sheet_head--date\">\n            <vue-zebra_date_picker :value=\"currentDate\" v-on:select=\"currentDate = ($event)\"  :min_date=\"'2015-01-01'\" :max_date=\"currentDate\"></vue-zebra_date_picker>\n          </div>\n          <div class=\"report_form_head_security\">\n            <input id=\"pos_total\" type=\"checkbox\" v-model=\"pos_total\" style=\"margin-right: 5px;\" /><label v-on:click=\"checkbox_pos_total()\" style=\"margin-right:10px;\">区分场外持仓</label>\n            <template v-if=\"!disabled_type\">\n              <input id=\"cal_expect\" type=\"checkbox\" v-model=\"cal_expect\" style=\"margin-right: 5px;\" /><label v-on:click=\"checkbox_cal_expect()\" style=\"margin-right:10px;\">展示预估值</label>\n            </template>\n            <template v-else>\n              <div style=\"display: inline-block;\" @mouseenter=\"show_tip\" @mouseleave=\"hide_tip\">\n                <input id=\"cal_expect\" type=\"checkbox\" v-model=\"cal_expect\" style=\"margin-right: 5px;\" disabled /><label style=\"margin-right:10px;position: relative;\"  >展示预估值\n                  <div v-show=\"tip_show\" style=\"position: absolute;width: 160px;border: 1px solid  #d7d5d5;text-align: center;border-radius: 4px;left: -20px;position: absolute;diplay:block\">仅支持查看当天预估值</div>\n                </label>\n              </div>\n            </template> \n          </div>\n          <div style=\"flex-grow: 1;\"></div>\n          <div class=\"journel_sheet_head--select\">\n            <vue-selectize-sign :options=\"sign_arr\" :placeholder=\"'请选择标记产品'\" :value=\"select_id\" v-on:input=\"select_id = ($event)\"></vue-selectize-sign>\n          </div>\n          <a v-on:click=\"export_report()\" :class=\"'custom-grey-btn custom-grey-btn__export'\" style=\"margin-right:15px;\">\n            <i class=\"oms-icon oms-icon-export\"></i>导出\n          </a>\n          <a v-on:click=\"refresh()\" class=\"custom-grey-btn custom-grey-btn__refresh\">\n            <i class=\"oms-icon refresh\"></i>刷新\n          </a>\n        </div>\n        <div class=\"journel_sheet_head__types\">\n          <div class=\"journel_sheet_head__type3\">\n            <i></i>货币基金\n          </div>\n          <div class=\"journel_sheet_head__type2\">\n            <i></i>收益互换\n          </div>\n          <div class=\"journel_sheet_head__type1\">\n            <i></i>场外定增\n          </div>\n        </div>\n        <div class=\"open-close\" v-on:click=\"all_show()\">\n          <span class=\"open-close__icon\">\n            <i class=\"open-close__icon__bgd\"></i>\n          </span>\n          <p class=\"open-close__describle\" v-text=\"all_show_describle\"></p>\n        </div>\n      </div>\n    `,\n    data: function(){\n      return {\n        currentDate: (function(){return moment().format('YYYY-MM-DD')})(),\n        chgSelected: '',\n        checked_arr: '',\n        chgSignSelected: '',\n        checked_sign_arr: '',\n        pos_total: true,\n        cal_expect: false,\n        end_product: true,  //是否隐藏已结束产品\n        all_show_describle: '收起全部',\n        show_open_close: true,  //是否全部展开\n        // init_obj: {\n        //   allSelected: '全部产品',\n        //   noMatchesFound: '未选择任何产品',\n        //   placeholder: '请选择产品'\n        // },\n        select_id: '',\n        show_type: this.$root.end_product,\n        disabled_type:false,\n        tip_show:false,\n      }\n    },\n    computed: {\n      options: function(){\n        var rtn = [];\n        this.product_list.forEach(function(e){\n          var obj = {\n            type: e.type,\n            label: e.name,\n            status: e.status,\n            value: e.id+'&'+e.type\n          }\n          rtn.push(obj);\n        })\n        if (this.$root.end_product === 'running') {\n          rtn = rtn.filter(function(item) {\n            if (item.status == 5) {\n              return item;\n            }\n          })\n        } else if (this.$root.end_product === 'end') {\n          rtn = rtn.filter(function(item) {\n            if (item.status == 6) {\n              return item;\n            }\n          })\n        }\n        return rtn;\n      },\n      sign_arr: function () {\n        var sign_arr = [{'value':'all','label':'查看\"全部标记\"','color':'hide'}];\n        this.product_current_sign.forEach((e) => {\n          var obj = {\n            type: e.status,\n            label: '查看\"'+e.keyword+'\"标记',\n            value: e.sign_id,\n            color: e.sign_color\n          }\n          if (1 == obj.value) {\n            obj.label = '查看\"'+e.keyword+'\"';\n          }\n          sign_arr.push(obj);\n        })\n        return sign_arr;\n      },\n      init_obj: function() {\n        var obj = {\n          allSelected: '全部基金',\n          noMatchesFound: '未选择任何基金',\n          placeholder: '请选择基金'\n        }\n        if (this.$root.end_product === 'running') {\n          obj['allSelected'] = '全部运行中基金';\n        } else if (this.$root.end_product === 'end') {\n          obj['allSelected'] = '全部已结束基金';\n        }\n        return obj;\n      }\n    },\n    methods: {\n      show_tip(){\n        this.tip_show = true;\n      },\n      hide_tip(){\n        this.tip_show = false;\n      },\n      all_show: function () {\n        if (true == this.show_open_close) {\n          this.show_open_close = false;\n          this.all_show_describle = '展开全部';\n          $(\".open-close__icon__bgd\").css('transform','rotate(180deg)');\n        } else {\n          this.show_open_close = true;\n          this.all_show_describle = '收起全部';\n          $(\".open-close__icon__bgd\").css('transform','rotate(0deg)');\n        }\n      },\n      export_report: function(){\n        //导出\n        var _this = this;\n        if ( this.current_procut_id.length == 0) {\n          $.omsAlert('请先选择产品组或账户');\n        } else {\n          var _change_id_type = '';\n          //lists下面的id存储数组\n          var lists_id = [];\n          //base下面的id存储数组\n          var product_id = [];\n          //根据到处按钮的背景色来判断是否导出报表\n          if ($(\".custom-grey-btn__export\").hasClass('doBtnExport_bgd')) {\n            return false;\n          }\n          //是否汇总证券\n          var _security_summary;\n          if (_this.pos_total == false) {\n            _security_summary = 1;\n          } else if (_this.pos_total == true) {\n            _security_summary = 0;\n          }\n\n          var cal_expect; //是否掺看预期变化\n          if (false == this.cal_expect) {\n            cal_expect = 0;\n          }else{\n            cal_expect = 1;\n          }\n\n          var end_product;  //是否隐藏已结束产品\n          if (false == this.end_product) {\n            end_product = '';\n          } else {\n            end_product = 'running';\n          }\n\n          let product_sign;//由于标记筛选需要特殊处理\n          let productAarr = [];\n          this.product_sign_arr.forEach((e) => {\n            if (1 == e.type) {\n              productAarr.push(e.id+\"&group\");\n            } else if (2 == e.type) {\n              productAarr.push(e.id+\"&base\");\n            }\n          })\n          //如果标记为空或者all时，导出所选中的产品id\n          if (this.select_id == '' || 'all' == this.select_id) {\n            product_sign = _this.current_procut_id;\n          } else {\n            product_sign = productAarr;\n          }\n          product_sign.forEach(function (i) {\n            if ('group' == i.split('&')[1]) {\n              lists_id.push(i.split('&')[0]);\n            }\n            if ('base' == i.split('&')[1]) {\n              product_id.push(i.split('&')[0])\n            }\n          })\n          if (lists_id.length === 0) {\n            _change_id_type = 'product_id=' + product_id.join(',');\n          }\n          if (product_id.length === 0) {\n            _change_id_type = 'group_id=' + lists_id.join(',');\n          }\n\n          if (lists_id.length > 0 && product_id.length > 0) {\n            _change_id_type ='group_id=' + lists_id.join(',') + '&product_id=' + product_id.join(',');\n          }\n\n          //\n          let sorted = {};\n          sorted.field_sort = comGridSortData.display_rules.map(function(e){\n            return e.id\n          });\n          sorted.order = comGridSortData.order;\n          sorted.order_by = comGridSortData.order_by;\n          sorted.include_sub = 1; //是否包含子产品\n          let arr = [];\n          this.product_info_arr.forEach((e) => {\n            let id = '';\n            if (e.type == 1) {\n              id += 'g';    // group 产品组\n            }else if(e.type == 2){\n              id += 'b';    // base 底层账户\n            }else{\n              ;             // 匹配失败，不带前缀\n            }\n\n            id += e.id;\n            arr.push(id);\n          });\n          sorted.group = arr;\n\n          //筛选标记\n          let product_sign_id;\n          if ('all' == this.select_id) {\n            product_sign_id = '';\n          } else {\n            product_sign_id = this.select_id;\n          }\n          $.startLoading();\n          $.ajax({\n            url: '/bms-pub/report/export_product_group_report?'+_change_id_type+'&date='+this.currentDate +\n              '&sorted[field_sort]='+ sorted.field_sort.join(',') +'&sorted[order]=' + sorted.order +\n              '&sorted[order_by]=' + sorted.order_by + '&sorted[group]=' + sorted.group.join(','),\n            type: 'GET',\n            data: {\n              date: _this.currentDate,\n              cal_expect: cal_expect,\n              security_summary: _security_summary,\n              end_product: this.show_type,\n              product_sign_id: product_sign_id\n            },\n            success: ({code,msg,data}) => {\n              $.clearLoading();\n              $.omsAlert('正为您生成报表，成功后可进入文件中心下载');\n            },\n            error: () => {\n              $.omsAlert('网络异常，请重试');\n            }\n          })\n        }\n      },\n      refresh: function(){  //刷新\n        if ($('.refresh-btn').hasClass('loading')) {\n          return;\n        }\n        $('.refresh-btn').addClass('loading');\n        //刷新页面,方便组件重复利用\n        if (\"[object Function]\" == Object.prototype.toString.call(this.$root.customRefreshAfterModified)) {\n          this.$root.customRefreshAfterModified(true);\n        }\n      },\n      checkbox_pos_total: function () { //汇总证券的点击区域扩大\n        if (true == this.pos_total) {\n          this.pos_total = false;\n        } else {\n          this.pos_total = true;\n        }\n      },\n      checkbox_cal_expect: function(){  //展示预期变化\n        if (true == this.cal_expect) {\n          this.cal_expect = false;\n        } else {\n          this.cal_expect = true;\n        }\n      },\n      judge_date(){\n        //判断是否当前时间 \n        let date = new Date;\n        let arr = this.currentDate.split('-');\n        if(date.getFullYear() == arr[0] && (date.getMonth()+1) == arr[1] && date.getDate() == arr[2]){\n          //时间为当前时间\n          return true;\n        }else{\n          return false;\n        }\n      }\n    },\n    watch: {  //监听数据变化\n      currentDate: function(){  //获取时间\n        if(!this.judge_date()){\n          this.disabled_type = true;\n          this.cal_expect = false;\n        }else{\n          this.disabled_type = false;\n\n        }\n        this.$emit('change_begin_data', this.currentDate);\n      },\n      chgSelected: function(){  //获取选中基金产品的id\n        this.$emit('change_selected', this.chgSelected);\n      },\n      pos_total: function () {  //是否汇总基金\n        this.$emit('change_total', this.pos_total);\n      },\n      cal_expect: function(){\n        //是否按预期汇总\n        this.$emit('cal_expect', this.cal_expect);\n      },\n      end_product: function () { //是否隐藏已结束产品\n        this.$emit('change_end_product', this.end_product);\n      },\n      show_open_close() {\n        this.$emit('control_show_hide', this.show_open_close);\n      },\n      select_id: function () {\n        this.$emit('select_sign_id',this.select_id);\n      },\n      show_type(val){\n        //显示产品的状态  running 运行中 空 所有   end结束\n        this.end_product = val;\n      }\n    }\n  })\n  //基金自身\n  Vue.component('report-table-content', {\n    props: ['product_info', 'current_data','pos_total', 'moving', 'control_show', 'cal_expect', 'current_product_remark', 'product_current_sign', 'curren_sign_pole', 'product_sign_pole_all', 'product_info_arr'],\n    template: `\n    <div>\n      <div class=\"journel-sheet-content__head\" style=\"position: relative;\" :class=\"{'journel-sheet-content__head--display': display_detail}\">\n        <dl style=\"width:22%;\">\n          <dt>\n            <span :title=\"product_info.name\">{{product_info.name}}(<span v-text=\"currentData()\">{{current_data}}</span>)</span>\n            <a class=\"icon-display-hide\" :class=\"{'icon-display-hide__display': display_detail, 'icon-display-hide__hide': !display_detail}\" v-on:click=\"toggleDisplay()\"><i></i></a>\n          </dt>\n          <dd>数据更新时间：{{product_info.update_time}}</dd>\n        </dl>\n\n        <div style=\"width:16%;\">\n          <vue-custom_v2-dl-modify v-if=\"cal_expect\" :name=\"'预估净资产'\" :adjust_value=\"product_info.adjust_assets\" :current_value=\"product_info.total_assets\" :value=\"product_info.estimate_asset\" :id=\"'adjust_assets'\" :ajax_url=\"getAdjustAssetsUrl()\" :ajax_data=\"{group_id: product_info.id, type: (1==product_info.type)?'group':'base'}\"></vue-custom_v2-dl-modify>\n          <vue-custom-dl v-else :name=\"'净资产'\" :value=\"numeralNumber(product_info.total_assets,2)\"></vue-custom-dl>\n        \n        </div>\n        <div style=\"width:14%;\">\n          <vue-custom_v2-dl-modify v-if=\"cal_expect\" :name=\"'预估份额'\" :adjust_value=\"product_info.adjust_volume\" :current_value=\"product_info.volume\" :value=\"product_info.estimate_volume\" :id=\"'adjust_volume'\" :ajax_url=\"getAdjustVolumeUrl()\" :ajax_data=\"{group_id: product_info.id, type: (1==product_info.type)?'group':'base'}\"></vue-custom_v2-dl-modify>\n          <vue-custom-dl v-else :name=\"'份额'\" :value=\"numeralNumber(product_info.volume,0)\" v-if=\"\"></vue-custom-dl>\n        \n        </div>\n        <div style=\"width:8%;\">\n          <vue-custom-dl  v-if=\"cal_expect\" :name=\"'预估净值'\" :value=\"numeralNumber(product_info.estimate_net_value,4)\"></vue-custom-dl>\n          <vue-custom-dl v-else :name=\"'单位净值'\" :value=\"numeralNumber(product_info.net_value,4)\"></vue-custom-dl>\n        </div>\n        <div style=\"width:7%;\">\n          <vue-custom-dl :name=\"'股票仓位'\" :value=\"numeralNumber(product_info.stock_position*100,2)+'%'\"></vue-custom-dl>\n        </div>\n        <div style=\"width:6%;\">\n          <vue-custom-dl :name=\"'净多头'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.net_bullish*100,2)+'%'\"></vue-custom-dl>\n          <vue-custom-dl :name=\"'净多头'\" v-if=\"product_info.type == '2'\" :value=\"'--'\"></vue-custom-dl>\n        </div>\n        <div style=\"width:8%;\">\n          <vue-custom-dl :name=\"'偏离度'\" :value=\"poleDeviation(product_info.deviation_degree)\">\n            <div class=\"start-sign\">\n              <span v-if=\"undefined != curren_sign_pole.sign_color\" :class=\"'start-sign__product productInfoId_'+product_info.id+' '+curren_sign_pole.sign_color\" v-on:click=\"change_sign_list()\" @mouseenter=\"product_scrible_hover=true\" @mouseleave=\"product_scrible_hover=false\"></span>\n              <span v-if=\"undefined == curren_sign_pole.sign_color\" :class=\"'start-sign__product productInfoId_'+product_info.id+' sign_normal'\" v-on:click=\"change_sign_list()\" @mouseenter=\"product_scrible_hover=true\" @mouseleave=\"product_scrible_hover=false\"></span>\n\n              <span v-if=\"1 == curren_sign_pole.is_benchmarking\" :class=\"'start-sign__pole pole_start_light'\" v-on:click=\"product_sign_pole(curren_sign_pole.sign_id,curren_sign_pole.is_benchmarking)\"></span>\n              <span v-else :class=\"'start-sign__pole pole_normal'\" v-on:click=\"product_sign_pole(curren_sign_pole.sign_id,curren_sign_pole.is_benchmarking)\"></span>\n\n              <p class=\"start-sign__hover\" v-show=\"product_scrible_hover\" v-text=\"product_scrible_content(curren_sign_pole.sign_id)\"></p>\n              <div class=\"start-sign__change\" v-show=\"change_sign_show\">\n                <ul class=\"start-sign__change__list\" @mouseleave=\"change_sign_show=false\">\n                  <li>选择标记<a class=\"start-sign__change__list__management\" v-on:click=\"add_sign_popup=true,change_sign_show=false\">标记管理</a></li>\n                  <li v-for=\"signItem in product_current_sign\" v-on:click=\"change_sign_color(signItem)\"><span :class=\"'start-sign__change__list__type '+signItem.sign_color\"></span><span v-text=\"signItem_describle(signItem,curren_sign_pole.is_benchmarking)\"></span></li>\n                </ul>\n              </div>\n            </div>\n          </vue-custom-dl>\n        </div>\n        <div style=\"width:11%;\">\n          <vue-custom-dl-slot-modify :name=\"'备注'\">\n            <vue-remark-modify :remark_name=\"'remarks'\" :remark=\"product_info.remarks\" :ajax_url=\"getRemarksUrl()\" :ajax_data=\"{group_id:product_info.id,type:(1 == product_info.type)?'group':'base'}\"></vue-remark-modify>\n          </vue-custom-dl-slot-modify>\n        </div>\n        <div style=\"text-align: right;width:8%;z-index:10;position:relative;\">\n          <label :for=\"'showSubProduct_' + product_info.id\">\n            <input v-model=\"show\" type=\"checkbox\" :id=\"'showSubProduct_' + product_info.id\" />含子产品\n          </label>\n        </div>\n\n        <div class=\"journel-sheet-content__head--move\"></div>\n      </div>\n      <div v-show=\"display_detail && (true != moving)\" class=\"journel-sheet-content__detail\" :class=\"{'journel-sheet-content__detail--display': display_detail}\">\n        <!-- <vue-custom-dl :name=\"'场内期货资产'\" :value=\"numeralNumber(product_info.futures_assets,2)\"></vue-custom-dl> -->\n        <vue-custom-dl :name=\"'股票市值'\" :value=\"numeralNumber(product_info.stock_market_value,2)\"></vue-custom-dl>\n        <vue-custom-dl :name=\"'A股仓位'\" :value=\"numeralNumber(product_info.stock_A_position*100,2)+ '%'\"></vue-custom-dl>\n\n        <vue-custom-dl :name=\"'A股净多头'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.A_net_bullish*100,2)+'%'\"></vue-custom-dl>\n        <vue-custom-dl :name=\"'A股净多头'\" v-if=\"product_info.type == '2'\" :value=\"'--'\"></vue-custom-dl>\n\n        <vue-custom-dl :name=\"'风险度'\" :value=\"numeralNumber(product_info.risk_degree*100,2)+'%'\"></vue-custom-dl>\n\n        <vue-custom-dl :name=\"'收益互换资产'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.income_swap_assets,2)\">\n          <prompt-language v-show=\"'' != product_info.income_swap_error_tip\" :language_val=\"product_info.income_swap_error_tip\"></prompt-language>\n        </vue-custom-dl>\n        <vue-custom-dl :name=\"'收益互换资产'\" v-if=\"product_info.type == '2'\" :value=\"'--'\">\n          <prompt-language v-show=\"'' != product_info.income_swap_error_tip\" :language_val=\"product_info.income_swap_error_tip\"></prompt-language>\n        </vue-custom-dl>\n\n        <vue-custom-dl :name=\"'收益互换仓位'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.income_swap_position*100,2)+'%'\">\n          <prompt-language v-show=\"'' != product_info.income_swap_error_tip\" :language_val=\"product_info.income_swap_error_tip\"></prompt-language>\n        </vue-custom-dl>\n        <vue-custom-dl :name=\"'收益互换仓位'\" v-if=\"product_info.type == '2'\" :value=\"'--'\">\n          <prompt-language v-show=\"'' != product_info.income_swap_error_tip\" :language_val=\"product_info.income_swap_error_tip\"></prompt-language>\n        </vue-custom-dl>\n\n        <vue-custom-dl :name=\"'场外货币基金'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.monetary_fund_assets,2)\"></vue-custom-dl>\n        <vue-custom-dl :name=\"'场外货币基金'\" v-if=\"product_info.type == '2'\" :value=\"'--'\"></vue-custom-dl>\n\n        <vue-custom-dl :name=\"'场外货币基金仓位'\" v-if=\"product_info.type == '1'\" :value=\"numeralNumber(product_info.monetary_fund_position*100,2)+'%'\"></vue-custom-dl>\n        <vue-custom-dl :name=\"'场外货币基金仓位'\" v-if=\"product_info.type == '2'\" :value=\"'--'\"></vue-custom-dl>\n      </div>\n      <report-table-securities :current_product_remark=\"current_product_remark\" v-show=\"display_detail && (true != moving)\" :product_info=\"product_info\" v-if=\"product_info.position_list.length > 0\" :pos_total=\"pos_total\" :show=\"show\"></report-table-securities>\n      <div v-if=\"0 == product_info.position_list.length\" v-show=\"display_detail && (true != moving)\" class=\"journel-sheet-content__no-detail\">\n        <span>该时段暂无匹配记录</span>\n      </div>\n      <div class=\"report-sign-popup\" v-show=\"add_sign_popup\">\n        <div class=\"report-sign-popup__content\">\n          <h2 class=\"report-sign-popup__content__title\">标记管理</h2>\n          <span class=\"report-sign-popup__content__closeBtn\" v-on:click=\"signPupManager()\">x</span>\n          <div class=\"report-sign-popup__content__describle\">\n            <dl class=\"report-sign__modify\">\n              <dt class=\"report-sign__modify__dt\">标记符号</dt>\n              <dd class=\"report-sign__modify__dd\">标记名称</dd>\n            </dl>\n            <div class=\"report-sign-popup__content__describle__auto\">\n              <dl class=\"report-sign__modify\" v-for=\"signManager in product_current_sign\">\n                <dt class=\"report-sign__modify__dt\" v-if=\"signManager.sign_id > 1\">\n                  <span :class=\"'report-sign__modify__dt_color '+signManager.sign_color \"></span>\n                </dt>\n                <dd class=\"report-sign__modify__dd\" v-if=\"signManager.sign_id > 1\">\n                  <input type=\"text\" :value=\"signManager.keyword\" v-on:input=\"modify_sign_value = $event.target.value\" @focus=\"signDelete(signManager.sign_id,signManager.keyword)\" @blur=\"modifyPole(signManager.sign_id,signManager.keyword)\" :class=\"'report-sign__modify__dd__describle modifyPole_'+signManager.sign_id\"/>\n                  <a v-if=\"signManager.sign_id > 100\" :class='\"hide report-sign__modify__dd__delete signManager_\"+signManager.sign_id' v-on:mousedown=\"productSignDelete(signManager.sign_id)\">删除</a>\n                  <p :class='\" hide signPole_\"+signManager.sign_id'></p>\n                </dd>\n              </dl>\n              <dl class=\"report-sign__modify addReport\" v-show=\"addCustomShow\">\n                <dt class=\"report-sign__modify__dt\">\n                  <span class=\"report-sign__modify__dt_color sign_product_add\"></span>\n                </dt>\n                <dd class=\"report-sign__modify__dd\">\n                  <input type=\"text\" v-model=\"customDescrible\" class=\"report-sign__modify__dd__describle addReportDescrible\" v-on:focus=\"customFocus()\" v-on:blur=\"customBlur()\"/>\n                  <a class=\"report-sign__modify__dd__delete addReportDelete\" v-on:mousedown=\"customDelete()\">删除</a>\n                  <p class=\"addReportName\" style=\"color:#F44048;\">请输入标记名称</p>\n                </dd>\n              </dl>\n              <dl class=\"report-sign__modify addReportSign\">\n                <dt class=\"report-sign__modify__dt\"></dt>\n                <dd class=\"report-sign__modify__dd\"><button class=\"report-sign-popup__content__describle__add\" v-on:click=\"addProductSign()\">添加新标记</button></dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>`,\n    data: function () {\n      return {\n        display_detail: true,\n        show: true,\n        chang_sub_id: '',\n        change_sign_show: false, //产品标记选择列表是否显示\n        add_sign_popup: false,  //标记管理的弹窗，可增加标记\n        product_scrible_hover: false,  //当hover当前产品标记的时候显示文案\n        is_pole: false,\n        addCustomShow: false,  //是否自定义添加的\n        customDescrible: '',    //自定义添加的input内容\n        modify_sign_value: ''\n      }\n    },\n    watch: {\n      control_show(){\n        this.display_detail = this.control_show;\n      },\n      show: function () {\n        this.$emit('change_sub_fund', this.show);\n      },\n      chang_sub_id: function () {\n        this.$emit('change_sub_fund_id', this.chang_sub_id);\n      },\n      cal_expect(){\n      }\n    },\n    methods: {\n      signPupManager: function () {\n        this.add_sign_popup = false;\n        //刷新页面,方便组件重复利用\n        if (\"[object Function]\" == Object.prototype.toString.call(this.$root.customRefreshAfterModified)) {\n          this.$root.customRefreshAfterModified(true);\n        }\n      },\n      currentData: function () {  //数据更新时间处理\n        return this.current_data.split('-').join('/');\n      },\n      poleDeviation: function (deviation) {  //得到偏离度\n        if (-1 == deviation) {\n          return '--';\n        } else {\n          return this.numeralNumber(deviation*100,1)+'%';\n        }\n      },\n      signDelete: function (sign_id,keyword) {\n        $(\".signManager_\"+sign_id).show();\n        this.modify_sign_value = keyword;\n      },\n      product_scrible_content: function (sign_id) {  //标记产品的hover内容\n        let _this = this;\n        if (1 == sign_id) {\n          return '点击可对产品进行标记';\n        } else {\n          let sign_keyword = '';\n          this.product_current_sign.forEach((e) => {\n            if (sign_id == e.sign_id) {\n              sign_keyword = e.keyword;\n            }\n          })\n          let signProductArr = [];  //通过判断标记id是否相同得到一致的产品id和type\n          this.product_sign_pole_all.forEach((e) => {\n            let obj = {};\n            if (e.sign_id == sign_id) {\n              obj.product_id = e.product_id;\n              obj.type = e.type;\n            }\n            signProductArr.push(obj);\n          })\n\n          let signTotal = 0;  //相同标记的总资产\n          signProductArr.forEach((i) => {\n            _this.product_info_arr.forEach((e) => {\n              if (i.product_id == e.id && i.type == e.type) {\n                signTotal += e.total_assets;\n              }\n            })\n          })\n          //需要获取相同标记id下的所有产品的id和type类型，然后获取他们各自的总资产\n          return '\"'+sign_keyword+'\"，该标记所有产品总资产为'+this.numeralNumber(signTotal,2);\n        }\n      },\n      product_sign_pole: function (sign_id, is_benchmarking) {  //标杆产品\n        let _this = this;\n        let str = '';\n\n        if (1 == sign_id || undefined == sign_id) {\n          $.omsAlert('请先选择产品标记');\n          return false;\n        }\n        let product_type_id = {};\n        if (1 == _this.product_info.type) {\n          product_type_id = {\n            'group_id': _this.product_info.id,\n            'type': _this.product_info.type,\n            'sign_id': sign_id,\n            'is_benchmarking': (0 == is_benchmarking) ? 1 : 0\n          }\n        } else if (2 == _this.product_info.type){\n          product_type_id = {\n            'product_id': _this.product_info.id,\n            'type': _this.product_info.type,\n            'sign_id': sign_id,\n            'is_benchmarking': (0 == is_benchmarking) ? 1 : 0\n          }\n        }\n        $.startLoading('正在修改');\n        $.ajax({\n          url: '/bms-pub/report/add_sign',\n          type: 'POST',\n          data: product_type_id,\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              if (0 == is_benchmarking) {  //0不是标杆产品，1是标杆产品\n                str = '标杆产品设置成功';\n              } else if (1 == is_benchmarking){\n                str = '标杆产品取消成功';\n              }\n              $.omsAlert(str);\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n                _this.$root.customRefreshAfterModified(true);\n              }\n              $.clearLoading();\n            }\n          },\n          error: ({code,msg,data}) => {\n            $.omsAlert(msg);\n          }\n        })\n      },\n      addProductSign: function () {  //用户自定义添加产品\n        let _this = this;\n        $(\".report-sign__modify__dd__describle\").each(function () {\n          if ('' == $(this).val() || undefined == $(this).val()) {\n            return false;\n          }\n        })\n        this.addCustomShow = true;\n\n        this.$nextTick(function(){\n          $(_this.$el).find('input.addReportDescrible').focus();\n        })\n        this.customDescrible = '';\n        $(\".addReportName\").html('请输入标记名称').show();\n      },\n      customFocus: function () {  //自定义添加的input的focus\n        $(\".addReportDelete\").show();\n      },\n      customBlur: function () {  //自定义添加的input 的blur\n        $(\".addReportDelete\").hide();\n        let val = this.customDescrible;\n        let _this = this;\n        if ('' == val || undefined == val) {\n          $(\".addReportName\").html('请输入标记名称');\n          $(\".addReportDescrible\").css('border','1px solid #F44048');\n          return false;\n        }\n\n        let currentKeyword; //判断是否重名\n        this.product_current_sign.forEach(function (e) {\n          if (e.keyword == val) {\n            currentKeyword = e.keyword;\n          }\n        })\n\n        if (val == currentKeyword) {\n          $(\".addReportName\").html('标记不得重名');\n          $(\".addReportDescrible\").css('border','1px solid #F44048');\n          return false;\n        }\n        //标记成功\n        $(\".addReportName\").hide();\n        $(\".addReportDescrible\").css('border','1px solid #BEBEBE');\n        $.ajax({\n          url: '/bms-pub/report/add_sign_group',\n          type: 'POST',\n          data: {\n            keyword: val\n          },\n          success: ({code,msg,data}) => {\n            $.omsAlert('标记创建成功');\n            //刷新页面,方便组件重复利用\n            if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n              _this.$root.customRefreshAfterModified(true);\n            }\n            _this.addCustomShow = false;\n          }\n        })\n      },\n      modifyPole: function (sign_id,sign_keyword) {  //修改标记的信息\n        let val = this.modify_sign_value;\n        let _this = this;\n        let currentKeyword;\n        $(\".signManager_\"+sign_id).hide();\n\n        if ('' == val || undefined == val) {\n          $(\".signPole_\"+sign_id).html('请输入标记名称').css('color', '#F44048').show();\n          $(\".modifyPole_\"+sign_id).css('border', '1px solid #F44048');\n          return false;\n        }\n\n        if (val == sign_keyword) {\n          return false;\n        }\n\n        if (val.length > 20) {\n          $.omsAlert('最多支持输入20个字');\n          $(\".modifyPole_\"+sign_id).css('border', '1px solid #F44048');\n          $(\".signPole_\"+sign_id).html('最多支持输入20个字').css('color', '#F44048').show();\n          return false;\n        }\n\n        this.product_current_sign.forEach(function (e) {\n          if (val == e.keyword) {\n            currentKeyword = e.keyword;\n          }\n        })\n\n        if (val == currentKeyword) {\n          $(\".signPole_\"+sign_id).html('标记不得重名').css('color', '#F44048').show();\n          $(\".modifyPole_\"+sign_id).css('border', '1px solid #F44048');\n          return false;\n        }\n        $(\".modifyPole_\"+sign_id).css('border', '1px solid #BEBEBE');\n        $(\".signPole_\"+sign_id).hide();\n        $.ajax({\n          url: '/bms-pub/report/add_sign_group',\n          type: 'POST',\n          data: {\n            sign_id: sign_id,\n            keyword: val\n          },\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n                _this.$root.customRefreshAfterModified(true);\n              }\n\n              $(\".signPole_\"+sign_id).show().html('标记\"'+val+'\"修改成功').css({'color':'#FB8927'});//成功\n              setTimeout(function () {\n                $(\".signPole_\"+sign_id).hide();\n              },3000);\n            } else {\n              $(\".modifyPole_\"+sign_id).show().css({'border':'1px solid #F44048'});\n              $(\".signPole_\"+sign_id).html('<span class=\"sign_error\"></span>标记\"'+val+'\"修改失败').css({'color':'#FC2727'}); //失败\n            }\n          },\n          error: function () {\n\n          }\n        })\n      },\n      productSignDelete: function (sign_id) {  //删除用户添加的标记\n        var _this = this;\n        $.ajax({\n          url: '/bms-pub/report/del_sign_group',\n          type: 'POST',\n          data: {\n            sign_id: sign_id\n          },\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              $.omsAlert('标记删除成功');\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n                _this.$root.customRefreshAfterModified(true);\n              }\n            }\n          }\n        })\n      },\n      customDelete: function () {  //自定义删除\n        this.addCustomShow = false;\n        //刷新页面,方便组件重复利用\n        if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n          _this.$root.customRefreshAfterModified(true);\n        }\n      },\n      change_sign_list: function () {\n        if (false == this.change_sign_show) {\n          this.change_sign_show = true;\n        } else {\n          this.change_sign_show = false;\n        }\n        this.product_scrible_hover = false;\n      },\n      signItem_describle: function (signItem) {\n        if (1 == signItem.id) {\n          return signItem.keyword;\n        } else {\n          return '\"'+signItem.keyword+'\"标记';\n        }\n      },\n      change_sign_color: function (signItem) {  //修改产品的标记\n        $.startLoading('正在修改');\n        let _this = this;\n\n        let product_type_id = {};\n        if (1 == _this.product_info.type) {\n          product_type_id = {\n            'group_id': _this.product_info.id,\n            'type': _this.product_info.type,\n            sign_id: signItem.sign_id,\n            is_benchmarking: 0\n          }\n        } else if (2 == _this.product_info.type){\n          product_type_id = {\n            'product_id': _this.product_info.id,\n            'type': _this.product_info.type,\n            sign_id: signItem.sign_id,\n            is_benchmarking: 0\n          }\n        }\n\n        $.ajax({\n          url: '/bms-pub/report/add_sign',\n          type: 'POST',\n          data: product_type_id,\n          success: ({code,msg,data}) => {\n            $.clearLoading();\n\n            if (0 == code) {\n              this.change_sign_show = false;\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.customRefreshAfterModified)) {\n                _this.$root.customRefreshAfterModified(true);\n              }\n              $.omsAlert('标记修改成功');\n            } else {\n              $.omsAlert(msg);\n            }\n          },\n          error: ({code,msg,data}) => {\n            $.clearLoading();\n            $.omsAlert(msg);\n          }\n        })\n      },\n      getAdjustValue: function () { //当前净资产\n        // if (true == this.cal_expect) {\n        //   return this.product_info.total_assets-this.product_info.adjust_assets;\n        // }\n        // if (false == this.cal_expect){\n        //   return this.product_info.total_assets;\n        // }\n      },\n      getAdjustVolume: function () { //当前份额\n        // if (true == this.cal_expect) {\n        //   return parseFloat(this.product_info.volume)-parseFloat(this.product_info.adjust_volume);\n        // }\n        // if (false == this.cal_expect){\n        //   return this.product_info.volume;\n        // }\n      },\n      getAdjustAssetsUrl: function(){\n        return '/bms-pub/report/modify_product_assets';\n      },\n      getAdjustVolumeUrl: function(){\n        return '/bms-pub/report/modify_product_volume';\n      },\n      getRemarksUrl: function(){\n        return '/bms-pub/report/modify_product_remarks';\n      },\n      toggleDisplay: function(){\n        this.display_detail = !this.display_detail;\n        this.$emit('display_detail', this.display_detail);\n      },\n      numeralNumber: function(arg, num){\n        if (undefined != num) {\n          var str = '0.'\n          for (var i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      },\n      showSubFund: function () {\n        if (this.show == true) {\n          this.show = false;\n          $(\".closebtn .show_sub_fund\"+(this.product_info.id)).css('transform', 'rotate(180deg)');\n        } else {\n          this.show = true;\n          $(\".closebtn .show_sub_fund\"+(this.product_info.id)).css('transform', 'rotate(360deg)');\n        }\n      }\n    }\n  })\n  //基金子基金部分\n  Vue.component('report-sub-content', {\n    props: ['product_info', 'pos_total', 'current_product_remark', 'cal_expect'],\n    template: `<div class=\"report_form_sub_funds\" v-if=\"product_info.sub_product != ''\">\n      <ul class=\"report_form_sub_funds_content journel-sheet-sub-funds\">\n        <li v-for=\"fund in product_info.sub_product\" class=\"journel-sheet-sub-fund\">\n          <div class=\"journel-sheet-sub-fund__header\">\n            <div class=\"journel-sheet-sub-fund__header--main\">\n              <div style=\"width: 250px;\">\n                <div class=\"journel-sheet-sub-fund__header--title\" style=\"overflow:hidden;text-overflow: ellipsis;white-space: nowrap;\" :title=\"fund.name\">{{fund.name}}</div>\n              </div>\n              <vue-custom_v2-dl-modify v-if=\"cal_expect\" :name=\"'预估净资产'\" :adjust_value=\"fund.adjust_assets\" :current_value=\"fund.estimate_asset\" :value=\"fund.estimate_asset\" :id=\"'adjust_assets'\" :ajax_url=\"getAdjustAssetsUrl()\" :ajax_data=\"{group_id: fund.id, type: (1==fund.type)?'group':'base'}\"></vue-custom_v2-dl-modify>\n              <vue-custom-dl v-else :name=\"'净资产'\" :value=\"numeralNumber(fund.total_assets,2)\"></vue-custom-dl>\n             \n              <vue-custom_v2-dl-modify v-if=\"cal_expect\" :name=\"'预估份额'\" :adjust_value=\"fund.adjust_volume\" :current_value=\"fund.volume\" :value=\"fund.estimate_volume\"  :id=\"'adjust_volume'\" :ajax_url=\"getAdjustVolumeUrl()\" :ajax_data=\"{group_id: fund.id, type: (1==fund.type)?'group':'base'}\"></vue-custom_v2-dl-modify>\n              <vue-custom-dl v-else :name=\"'份额'\" :value=\"numeralNumber(fund.volume,0)\" v-if=\"\"></vue-custom-dl>\n            \n\n              <vue-custom-dl v-if=\"cal_expect\" :name=\"'预估净值'\" :value=\"numeralNumber(fund.estimate_net_value,4)\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'单位净值'\" :value=\"numeralNumber(fund.net_value,4)\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'股票仓位'\" :value=\"numeralNumber(fund.stock_position*100,2)+'%'\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'净多头'\" :value=\"numeralNumber(fund.net_bullish*100,2)+'%'\"></vue-custom-dl>\n\n              <!-- <vue-custom-dl :name=\"'备注'\" :value=\"fund.remark\"></vue-custom-dl> -->\n              <!-- <vue-custom-dl-modify :name=\"'备注'\" :value=\"fund.remarks\" :id=\"'remarks'\" :ajax_url=\"getRemarksUrl()\" :ajax_data=\"{group_id: fund.id, type: (1==fund.type)?'group':'base'}\"></vue-custom-dl-modify> -->\n              <vue-custom-dl-slot-modify :name=\"'备注'\">\n                <vue-remark-modify :remark_name=\"'remarks'\" :remark=\"fund.remarks\" :ajax_url=\"getRemarksUrl()\" :ajax_data=\"{group_id:fund.id,type:(1 == fund.type)?'group':'base'}\"></vue-remark-modify>\n              </vue-custom-dl-slot-modify>\n\n              <div style=\"visibility: hidden;\">\n                <label>\n                  <input type=\"checkbox\" />含子产品\n                </label>\n              </div>\n            </div>\n            <div class=\"journel-sheet-sub-fund__header--detail\">\n              <vue-custom-dl :name=\"'股票市值'\" :value=\"numeralNumber(fund.stock_market_value,2)\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'A股仓位'\" :value=\"numeralNumber(fund.stock_A_position*100,2)+'%'\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'A股净多头'\" :value=\"numeralNumber(fund.A_net_bullish*100,2)+'%'\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'风险度'\" :value=\"numeralNumber(fund.risk_degree*100,2)+'%'\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'收益互换资产'\" :value=\"numeralNumber(fund.income_swap_assets,2)\">\n                <prompt-language v-show=\"'' != fund.income_swap_error_tip\" :language_val=\"fund.income_swap_error_tip\"></prompt-language>\n              </vue-custom-dl>\n              <vue-custom-dl :name=\"'收益互换仓位'\" :value=\"numeralNumber(fund.income_swap_position*100,2)+ '%'\">\n                <prompt-language v-show=\"'' != fund.income_swap_error_tip\" :language_val=\"fund.income_swap_error_tip\"></prompt-language>\n              </vue-custom-dl>\n              <vue-custom-dl :name=\"'场外货币基金'\" :value=\"numeralNumber(fund.monetary_fund_assets,2)\"></vue-custom-dl>\n              <vue-custom-dl :name=\"'场外货币基金仓位'\" :value=\"numeralNumber(fund.monetary_fund_position*100,2)+'%'\"></vue-custom-dl>\n            </div>\n          </div>\n\n          <report-table-sub-funds :current_product_remark=\"current_product_remark\" :product_info=\"product_info\" :position_list=\"fund.position_list\" v-if=\"fund.position_list != ''\" :pos_total=\"pos_total\"></report-table-sub-funds>\n        </li>\n      </ul>\n    </div>`,\n    methods: {\n      getAdjustAssetsUrl: function(){\n        return '/bms-pub/report/modify_product_assets';\n      },\n      getAdjustVolumeUrl: function(){\n        return '/bms-pub/report/modify_product_volume';\n      },\n      getRemarksUrl: function(){\n        return '/bms-pub/report/modify_product_remarks';\n      },\n      getAdjustValue: function (fund) { //当前净资产\n        if (true == this.cal_expect) {\n          return fund.total_assets-fund.adjust_assets;\n        }\n        if (false == this.cal_expect){\n          return fund.total_assets;\n        }\n      },\n      getAdjustVolume: function (fund) { //当前份额\n        if (true == this.cal_expect) {\n          return parseFloat(fund.volume)-parseFloat(fund.adjust_volume);\n        }\n        if (false == this.cal_expect){\n          return fund.volume;\n        }\n      },\n      numeralNumber: function(arg, num){\n        if (undefined != num) {\n          var str = '0.'\n          for (var i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      }\n    }\n  })\n\n  //基金主体\n  Vue.component('report-content', {\n    props: ['product_info', 'current_data', 'pos_total', 'moving', 'control_show', 'cal_expect', 'current_product_remark', 'product_current_sign', 'product_sign_pole_all','product_select_sign', 'product_info_arr'],\n    template: `\n      <div class=\"journel-sheet-content\" v-show=\"productSelectShow()\">\n        <report-table-content :curren_sign_pole=\"curren_sign_pole\" :product_current_sign=\"product_current_sign\" :product_sign_pole_all=\"product_sign_pole_all\" :current_product_remark=\"current_product_remark\" :product_info_arr=\"product_info_arr\" :cal_expect=\"cal_expect\" :control_show=\"control_show\" :moving=\"moving\" :product_info=\"change_sub_data()\" :current_data=\"current_data\" v-on:change_sub_fund=\"sub_show = $event\" v-on:change_sub_fund_id=\"sub_fund_id = $event\" :pos_total=\"pos_total\" v-on:display_detail=\"display_detail = $event\"></report-table-content>\n        <report-sub-content :cal_expect=\"cal_expect\" :current_product_remark=\"current_product_remark\" :control_show=\"control_show\" v-show=\"display_detail && sub_show && (true !== moving)\" :product_info=\"product_info\" v-if=\"product_info.sub_product != ''\" :pos_total=\"pos_total\"></report-sub-content>\n      </div>\n    `,\n    data: function () {\n      return {\n        display_detail: true,\n        sub_show: true,\n        sub_fund_id: '',\n        // curren_sign_pole: {}\n      }\n    },\n    computed: {\n      curren_sign_pole: function () {\n        var _this = this;\n        var obj = {'sign_id': 1};\n        this.product_sign_pole_all.forEach((e) => {\n          if (e.product_id == _this.product_info.id && e.type == _this.product_info.type) {\n            obj = e;\n            if (e.sign_id <= 100) {\n              if (1 == e.sign_id) {\n                obj.sign_color = 'sign_normal';\n              } else if (2 == e.sign_id) {\n                obj.sign_color = 'sign_red';\n              } else if (3 == e.sign_id) {\n                obj.sign_color = 'sign_pink';\n              } else if (4 == e.sign_id) {\n                obj.sign_color = 'sign_citrus';\n              } else if (5 == e.sign_id) {\n                obj.sign_color = 'sign_orange';\n              } else if (6 == e.sign_id) {\n                obj.sign_color = 'sign_yellow';\n              } else if (7 == e.sign_id) {\n                obj.sign_color = 'sign_dlackish_green';\n              } else if (8 == e.sign_id) {\n                obj.sign_color = 'sign_green';\n              } else if (9 == e.sign_id) {\n                obj.sign_color = 'sign_indigo';\n              } else if (10 == e.sign_id) {\n                obj.sign_color = 'sign_blue';\n              } else if (11 == e.sign_id) {\n                obj.sign_color = 'sign_cyan';\n              } else if (12 == e.sign_id) {\n                obj.sign_color = 'sign_purple';\n              } else if (13 == e.sign_id) {\n                obj.sign_color = 'sign_brown';\n              } else if (14 == e.sign_id) {\n                obj.sign_color = 'sign_gray';\n              } else if (15 == e.sign_id) {\n                obj.sign_color = 'sign_black';\n              }\n            } else if (e.sign_id > 100) {\n              obj.sign_color = 'sign_product_add';\n            }\n            if (0 == e.is_benchmarking) {\n              obj.pole_style = 'pole_normal';\n            } else if (1 == e.is_benchmarking) {\n              obj.pole_style = 'pole_start_light';\n            }\n          }\n        });\n        if ('' == obj) {\n          obj.sign_id = 1;\n        }\n        return obj;\n      }\n    },\n    watch: {\n      control_show: function () {\n        this.display_detail = this.control_show;\n      }\n    },\n    methods: {\n      productSelectShow: function () {\n        if (('' == this.product_select_sign || 'all' == this.product_select_sign) || (this.product_select_sign == this.curren_sign_pole.sign_id)) {\n          return true;\n        } else {\n          return false;\n        }\n      },\n      change_sub_data: function () {\n        if (true == this.sub_show) {\n          return this.product_info;\n        } else {\n          //由于底层账户是不存在子产品的，所以再次要加一个判断（查看是否包含main_product）\n          if (2 == this.product_info.type) {\n            return this.product_info;\n          } else {\n            this.product_info.main_product.update_time = this.product_info.update_time;\n            return this.product_info.main_product;\n          }\n        }\n      }\n    }\n  })\n\n\n  // 上面部分是产品报表，下面是持仓报表\n  //单选，默认选中某一个\n  Vue.component('vue-selectize-radio-selected', {\n    props: ['options', 'value', 'place_holder', 'defaultSelected'],\n    template: `\n        <select>\n          <slot></slot>\n        </select>\n    `,\n    mounted: function () {\n      var vm = this;\n      var selectize = $(this.$el).selectize({\n        delimiter: ',',\n        persist: true,\n        placeholder: this.place_holder,\n        valueField: 'value',\n        labelField: 'label',\n        onChange: function(v){\n          vm.$emit('input', v);\n        }\n      })[0].selectize;\n      selectize.addOption(this.options);\n      selectize.setValue(this.defaultSelected);  //默认选中某一个,填写相对应的value\n      selectize = null;\n    },\n    watch: {\n      value: function (value) {\n        // update value\n        $(this.$el).selectize()[0].selectize.setValue(value);\n      },\n      options: function (options) {\n        // // update options\n        var value = this.value;\n        var selectize = $(this.$el).selectize()[0].selectize;\n        selectize.clearOptions(true);\n        selectize.clearOptions(true);\n        selectize.addOption(this.options);\n        selectize.setValue(value);\n        selectize = null;\n      }\n    }\n  });\n\n  //各基金经理持仓股票\n  Vue.component('report-position-stock', {\n    props: ['managerItem','totalCapitalOptions', 'is_starter','position_show','position_stock_data', 'position_user_display_detail', 'moving', 'select_id', 'positionDataShowSort'],\n    template: `\n      <div class=\"journel-sheet-content\">\n        <div class=\"journel-sheet-content__head\" :class=\"{'journel-sheet-content__head--display': user_stock_display}\" style=\"position: relative;\">\n          <dl style=\"width:22%;\">\n            <dt>\n              <span v-text=\"position_user_name(managerItem)\"></span>\n              <a class=\"icon-display-hide\" :class=\"{'icon-display-hide__display': user_stock_display, 'icon-display-hide__hide': !user_stock_display}\" v-on:click=\"togglePositionUserDisplay()\"><i></i></a>\n            </dt>\n            <dd>数据更新时间：<span v-text=\"componey_upDate(managerItem)\"></span></dd>\n          </dl>\n\n          <div>\n            <vue-custom-dl :name=\"'股票持仓（只）'\" :value=\"stock_total.length\"></vue-custom-dl>\n          </div>\n          <div v-for=\"stock_num in totalCapitalOptions\">\n            <vue-custom-dl v-if=\"stock_num.value > 0\" :name=\"'持仓超过'+stock_num.value+'%总股本（只）'\" :value=\"position_stock_volume(managerItem,stock_num.value)\"></vue-custom-dl>\n          </div>\n          <div class=\"journel-sheet-content__head--move\"></div>\n        </div>\n        <report-position-securities v-show=\"user_stock_display && (true !== moving)\" :is_starter=\"is_starter\" :user_id=\"user_id\" :select_id=\"select_id\" :managerItem=\"managerItem\" :position_user_display_detail=\"position_user_display_detail\" :moving=\"moving\" :position_stock_data=\"position_stock_data\" :positionDataShowSort=\"positionDataShowSort\"></report-position-securities>\n      </div>\n    `,\n    data: function () {\n      return {\n        user_stock_display: true,\n        user_id: '',\n        stock_total: []\n      }\n    },\n    watch: {\n      position_show: function () {\n        this.user_stock_display = this.position_show;\n      },\n      user_stock_display: function () {\n        this.$emit('display_stock_change', this.user_stock_display);\n      }\n    },\n    methods: {\n      position_user_name: function (user_name) {  //基金经理名称处理\n        let _this = this;\n        this.user_id = user_name.id;\n        if ('total' == user_name.id) {\n          return '公司持仓';\n        } else {\n          return user_name.name+'持仓';\n        }\n      },\n      componey_upDate: function (managerItem) {\n        let userId = managerItem.id;  //相对应的基金经理\n        let stock_arr = this.position_stock_data; //所有基金经理的股票\n        let upDate = ''; // 数据更新时间\n        $.each(stock_arr, (key, value) => {\n          if (userId == key) {\n            upDate = value.updated_time;  //只需要获取第一只股票下的时间就可以\n          }\n        })\n        //时间处理\n        let dataTime = new Date(upDate*1000);\n        let hour = (dataTime.getHours() < 10) ? '0'+dataTime.getHours() : dataTime.getHours();\n        let minutes = (dataTime.getMinutes() < 10) ? '0'+dataTime.getMinutes() : dataTime.getMinutes();\n        let seconds = (dataTime.getSeconds() < 10) ? '0'+dataTime.getSeconds() : dataTime.getSeconds();\n        return hour+':'+minutes+':'+seconds;\n      },\n      position_stock_volume: function (managerItem,item) {  //item代表持仓超过item%总股本，item没传值为undefined代表股票之和\n        let userId = managerItem.id;  //相对应的基金经理\n        let stock_arr = this.position_stock_data; //所有基金经理的股票\n        let position_user_stock = [];  //各个基金经理自己名下的股票\n        let _this = this;\n        let position_acc_1 = 0,\n            position_acc_2 =  0,\n            position_acc_3 = 0,\n            position_acc_4 = 0,\n            position_acc_5 = 0;\n        $.each(stock_arr, (key, val) => {\n          if (userId == key) {\n            position_user_stock = val.stocks;\n            _this.stock_total = val.stocks;\n          }\n        })\n        position_user_stock.forEach((e) => {\n          if (e.position_acc_1 <= 0) {\n            position_acc_1 += 1;\n          }\n          if (e.position_acc_2 <= 0) {\n            position_acc_2 += 1;\n          }\n          if (e.position_acc_3 <= 0) {\n            position_acc_3 += 1;\n          }\n          if (e.position_acc_4 <= 0) {\n            position_acc_4 += 1;\n          }\n          if (e.position_acc_5 <= 0) {\n            position_acc_5 += 1;\n          }\n        })\n\n        if (1 == item) {\n          return position_acc_1;\n        } else if (2 == item) {\n          return position_acc_2;\n        } else if (3 == item) {\n          return position_acc_3;\n        } else if (4 == item) {\n          return position_acc_4;\n        } else if (5 == item) {\n          return position_acc_5;\n        }\n\n      },\n      togglePositionUserDisplay: function () {\n        this.user_stock_display = !this.user_stock_display;\n      }\n    }\n  })\n\n  Vue.component('report-position-securities', {\n    props: ['moving', 'position_stock_data','managerItem', 'is_starter', 'position_user_display_detail', 'select_id', 'positionDataShowSort', 'user_id'],\n    template: `\n      <div>\n        <table class=\"journel-sheet-grid\" v-if=\"position_data_display.length>0\">\n          <draggable :list=\"positionDataShowSort.display_rules\" element=\"tr\" :options=\"dragOptions\" :move=\"onMove\" @end=\"onEnd\">\n            <th v-bind:class=\"rule.class\" v-for=\"rule in positionDataShowSort.display_rules\" v-if=\"(1 == select_id && rule.positionModel) || (0 == select_id)\" :class=\"styleType(select_id,rule)\" v-bind:style=\"rule.style\">\n              <span>{{rule.label}}</span>\n              <a class=\"icon-sortBy\" @click=\"positionSort(rule.id)\" v-if=\"rule.label != '备注'\">\n                <i class=\"icon-asc\" :class=\"{active: (positionDataShowSort.order_by == rule.id && positionDataShowSort.order == 'asc')}\"></i>\n                <i class=\"icon-desc\" :class=\"{active: (positionDataShowSort.order_by == rule.id && positionDataShowSort.order == 'desc')}\"></i>\n              </a>\n              <prompt-language v-if=\"'position_placards' == rule.id\" :language_val=\"'举牌差值＝5%总股本－持仓数量'\" style=\"width: 15px;display: inline-block;left: 0;\"></prompt-language>\n            </th>\n            <th v-if=\"true == is_starter\" style=\"width:10%;\"></th>\n          </draggable>\n          <tbody>\n            <tr v-for=\"sub_value in position_data_display\">\n              <td v-for=\"rule in positionDataShowSort.display_rules\" v-bind:class=\"rule.class\" v-if=\"(1 == select_id && rule.positionModel) || (0 == select_id)\"  :class=\"styleType(select_id,rule)\" v-bind:style=\"rule.style\">\n                <vue-remark-modify  v-if=\"'remark' == rule.id\" :remark_name=\"'msg'\" :remark=\"sub_value.remark\" :ajax_url=\"getPositionRemarksUrl()\" :ajax_data=\"{stock_code:sub_value.stock_code_full_name,target_id:user_id}\"></vue-remark-modify>\n                <span v-else>{{displayValue(sub_value, rule)}}</span>\n              </td>\n              <td  v-if=\"true == is_starter\" style=\"width:10%;\" class=\"leftRightPadding\"><button style=\"margin-right:20px;\" :class=\"{'add_follow':0 ==sub_value.is_star,'cancel_follow':1 ==sub_value.is_star}\" v-text=\"follow_text(sub_value.is_star)\" @click=\"followFn(sub_value.stock_code_full_name,user_id,sub_value.is_star)\"></button></td>\n            </tr>\n          </tbody>\n        </table>\n        <div v-if=\"0 == position_data_display.length\" class=\"journel-sheet-content__no-detail\">\n          <span>该时段暂无匹配记录</span>\n        </div>\n      </div>\n    `,\n    data: function () {\n      return {\n\n      }\n    },\n    computed: {\n      // 可拖动插件的入参\n      dragOptions: function () {\n        return  {\n          animation: 0,\n          // group: 'description',\n          // disabled: !this.editable,\n          ghostClass: 'ghost'\n        };\n      },\n      // 显示数据准备\n      position_data_display: function(){\n        let _this = this;\n        let rtn = [];\n        let userId = this.managerItem.id;\n        let stock_arr = this.position_stock_data; //所有基金经理的股票\n        let position_user_stock = [];  //各个基金经理自己名下的股票\n        $.each(stock_arr, (key, value) => {\n          if (userId == key) {\n            position_user_stock = value.stocks;\n          }\n        })\n        position_user_stock.forEach((e) => {\n          let obj = {};\n          //证券名称\n          obj.stock_name = e.stock_name;\n          //持仓数量\n          obj.hold_volume = e.hold_volume;\n          //持仓市值\n          obj.market_value = e.market_value;\n          //证券代码\n          let stockCode = (''+e.stock_code).split(/\\..*/);\n          obj.stock_code = stockCode[0];\n\n          obj.stock_code_full_name = e.stock_code;\n          obj.position_acc = e.position_acc;\n          obj.position_acc_1 = e.position_acc_1;\n          obj.position_acc_2 = e.position_acc_2;\n          obj.position_acc_3 = e.position_acc_3;\n          obj.position_acc_4 = e.position_acc_4;\n          obj.position_acc_5 = e.position_acc_5;\n          obj.is_star = e.is_star;\n          //总股本量\n          obj.total_share_capital = e.total_share_capital;\n          //占总股本\n          obj.proportion_capital = e.proportion_capital;\n          //5%总股本\n          obj.position_capital_5 = e.position_capital_5;\n          //备注\n          obj.remark = e.remark;\n          //举牌差值\n          obj.position_placards = obj.position_acc_5;\n          rtn.push(obj);\n        })\n\n        // 步骤2，根据排序逻辑进行排序\n        rtn = VUECOMPONENT.sort(rtn, _this.positionDataShowSort.order, _this.positionDataShowSort.order_by);\n        return rtn;\n      }\n    },\n    methods: {\n      styleType: function (select_id, rule) {\n        if (1 == select_id && 1 == rule.positionModel) {\n          if ('stock_name' == rule.id) {\n            return 'width_30';\n          }\n          if ('proportion_capital' == rule.id) {\n            return 'width_30_right';\n          }\n          if ('remark' == rule.id) {\n            return 'width_30_left';\n          }\n        } else {\n          return rule.class;\n        }\n      },\n      getPositionRemarksUrl: function () {\n        return '/bms-pub/report/stats/set_stock_position_remark';\n      },\n      follow_text: function (is_star) {\n        if (1 == parseFloat(is_star)) {\n          return '取消关注';\n        } else {\n          return '添加关注';\n        }\n      },\n      followFn: function (stock_code,target_id,is_star) {\n        let _this = this;\n        let _is_val;\n        if (0 == is_star) {\n          _is_val = 1;\n        } else {\n          _is_val = 0;\n        }\n        let stock_arr = [target_id+'-'+stock_code];\n        $.ajax({\n          url: '/bms-pub/report/stats/set_stock_position_star',\n          type: 'POST',\n          data: {\n            target_id: stock_arr,\n            val: _is_val\n          },\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(this.$root.positionDoRefresh)) {\n                this.$root.positionDoRefresh(true);\n              }\n            }\n          },\n          error: ({code,msg,data}) => {\n\n          }\n        })\n      },\n      positionSort: function(id){\n        if (id == this.positionDataShowSort.order_by) {\n          if ('asc' == this.positionDataShowSort.order) {\n            this.positionDataShowSort.order = 'desc';\n          }else if('desc' == this.positionDataShowSort.order){\n            this.positionDataShowSort.order = '';\n          }else{\n            this.positionDataShowSort.order = 'asc'\n          }\n        }else{\n          this.positionDataShowSort.order_by = id;\n          this.positionDataShowSort.order = 'asc';\n        }\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.positionDataShowSort.display_rules.map(function(e){\n          return e.id;\n        });\n        obj.order_by = this.positionDataShowSort.order_by;\n        obj.order = this.positionDataShowSort.order;\n        common_storage.setItem('report_position__grid_order', obj);\n      },\n      displayValue: function(sub_value, rule){\n        let value = sub_value[rule.id];\n        if ((rule.format != '') && (rule.format instanceof Array) && (this[rule.format[0]] instanceof Function)) {\n          // value = this[rule.format].call(this, value, )\n          let args = [value].concat(rule.format.slice(1))\n          value = this[rule.format[0]].apply(this, args);\n\n        }\n        if (rule.unit) {  //针对浮盈率和权重\n          if ('--' == value) {\n            return value;\n          } else {\n            return value + rule.unit\n          }\n        }else{\n          return value;\n        }\n      },\n      onMove: function ({relatedContext, draggedContext}) {\n        if ('备注' == draggedContext.element.label) {\n          return false;\n        }\n        //目前暂时先把拖动去掉\n        return false;\n\n        const relatedElement = relatedContext.element;\n        const draggedElement = draggedContext.element;\n        return (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      },\n      onEnd: function () {\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.positionDataShowSort.display_rules.map(function(e){\n          return e.id;\n        });\n\n        obj.order_by = this.positionDataShowSort.order_by;\n        obj.order = this.positionDataShowSort.order;\n        common_storage.setItem('report_position__grid_order', obj);\n      },\n      togglePositionUserDisplay: function () {\n        this.position_user_display_detail = !this.position_user_display_detail;\n      },\n      numeralNumber: function(arg, num){\n        if (undefined != num) {\n          var str = '0.'\n          for (var i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      }\n    }\n  })\n\n  //持仓报表汇总\n  Vue.component('report-position-form', {\n    props: ['position_real_name', 'position_stock_data', 'is_starter', 'change_position_users','position_data_show_sort', 'position_form_data'],\n    template: `\n      <div class=\"report-position-form\">\n        <div class=\"report-position-form__header\">\n          <div class=\"report-position-form__header__selecte\">\n            <vue-selectize-radio-selected :options=\"modelOptions\" :place_holder=\"'请选择模式'\" :defaultSelected=\"'0'\" :value=\"select_id\" v-on:input=\"select_id = $event\"></vue-selectize-radio-selected>\n          </div>\n          <div class=\"report-position-form__header__selecte\">\n            <vue-multiple_select :options=\"managerOptions\" :flag_check_all=\"true\" :checked_arr=\"managerSelected\" :init_obj=\"init_manager_obj\" v-on:multiple_select=\"managerSelected = ($event)\"></vue-multiple_select>\n          </div>\n          <div class=\"report-position-form__header__selecte\">\n            <vue-selectize-radio-selected :options=\"totalCapitalOptions\" :place_holder=\"'请选择持仓量'\" :defaultSelected=\"'0'\" :value=\"totalSelected\" v-on:input=\"totalSelected = $event\"></vue-selectize-radio-selected>\n          </div>\n          <div class=\"report-position-form__header__label\">\n            <input id=\"concern\" type=\"checkbox\" v-model=\"concernStock\"/><label @click=\"isConcernStock()\">只展示关注股票</label>\n          </div>\n\n          <div style=\"flex-grow: 1;\"></div>\n\n          <a @click=\"positionExpert()\" :class=\"'custom-grey-btn custom-grey-btn__export'\" style=\"margin-right:15px;line-height:34px;\">\n            <i class=\"oms-icon oms-icon-export\"></i>导出\n          </a>\n          <a @click=\"positionRefresh()\" class=\"custom-grey-btn custom-grey-btn__refresh\" style=\"line-height:34px;\">\n            <i class=\"oms-icon refresh\"></i>刷新\n          </a>\n        </div>\n        <div class=\"report-position-form__banner\">\n          <div class=\"report-position-form__banner__products\">\n            <div class=\"open-close\" @click=\"position_all_show()\">\n              <span class=\"open-close__icon\">\n                <i class=\"open-close__icon__bgd\"></i>\n              </span>\n              <p class=\"open-close__describle\" v-text=\"position_describle\"></p>\n            </div>\n          </div>\n\n          <div style=\"flex-grow: 1;\"></div>\n\n          <button v-if=\"true == is_starter\" class=\"report-position-form__banner__concern add_concern\" @click=\"add_follow_all('1')\">全部添加关注</button>\n          <button v-if=\"true == is_starter\" class=\"report-position-form__banner__concern cancel_concern\" @click=\"add_follow_all('0')\">全部取消关注</button>\n        </div>\n        <!-- <draggable :list=\"change_position_users\" :options=\"dragOptions\" @start=\"startFn\" :move=\"onMove\" @end=\"onEnd\"> -->\n          <div class=\"journel-sheet-content\" style=\"margin-bottom:10px;\" v-for=\"managerItem in change_position_users\">\n            <report-position-stock :moving=\"moving\" :is_starter=\"is_starter\" :select_id=\"select_id\" :positionDataShowSort=\"position_data_show_sort\" :position_user_display_detail=\"position_user_display_detail\" :position_show=\"position_show\" :managerItem=\"managerItem\" :position_stock_data=\"position_stock_data\" :totalCapitalOptions=\"totalCapitalOptions\"></report-position-stock>\n          </div>\n        <!-- </draggable> -->\n      </div>\n    `,\n    data: function () {\n      return {\n        modelOptions: [{  //模式筛选\n          value: '0',\n          label: '详细数据'\n        },{\n          value: '1',\n          label: '精简数据'\n        }],\n        moving: false,\n        managerOptions: [],  //基金经理筛选\n        totalCapitalOptions: [  //总股本筛选\n          {\n            value: '0',\n            label: '不限持仓量'\n          },\n          {\n            value: '1',\n            label: '持仓≥1%总股本股票'\n          },\n          {  //总股本筛选\n            value: '2',\n            label: '持仓≥2%总股本股票'\n          },\n          {  //总股本筛选\n            value: '3',\n            label: '持仓≥3%总股本股票'\n          },\n          {  //总股本筛选\n            value: '4',\n            label: '持仓≥4%总股本股票'\n          },\n          {  //总股本筛选\n            value: '5',\n            label: '持仓≥5%总股本股票'\n          }\n        ],\n        init_capital_obj: {\n          allSelected: '不限持仓量',\n          noMatchesFound: '未选择任何股本股票',\n          placeholder: '请选择股本股票'\n        },\n        init_manager_obj: {\n          allSelected: '全部基金经理',\n          noMatchesFound: '未选择任何基金经理',\n          placeholder: '请选择基金经理'\n        },\n        select_id: '',  //模式选中id\n        managerSelected: '',  //基金经理选中id\n        totalSelected: '',  //持仓占股本\n        concernStock: false, //是否关注股票\n        position_show: true,\n        position_describle: '收起全部产品',\n        // componey_stock: [], //公司股票   持仓报表\n        position_display_detail: true,  //股票收起与展示 公司\n        position_user_display_detail: true,  //基金经理的股票收起与展示\n        componeyUpDate: ''  //公司数据更新时间\n      }\n    },\n    computed: {\n      // managerOptions: function () {  //下拉框－－基金经理\n      //   let userArr = [];\n      //   let _this = this;\n      //   let real_name = _this.position_real_name;\n      //   if (undefined == real_name) {\n      //     return userArr;\n      //   }\n      //   $.each(real_name, (key, val) => {\n      //     let obj = {\n      //       value: key+'&'+val.real_name,\n      //       label: val.real_name,\n      //       type: key\n      //     }\n      //     userArr.push(obj);\n      //   })\n      //   return userArr;\n      // },\n      componey_stock: function () {\n        let commoney_data = this.position_stock_data.total;\n        return commoney_data;\n      },\n      dragOptions: function () {  //拖动的详细设置\n        return {\n          animation: 150,\n          scroll: true,\n          scrollSensitivity: 100,\n          handle: '.journel-sheet-content__head--move',  //拖动句柄选择器\n          ghostClass: 'ghost'\n        }\n      }\n    },\n    watch: {\n      position_real_name: function(){\n        if (undefined == this.position_real_name) {\n          return [];\n        }\n        // 规避循环刷新的问题，options只需要查到一次就可以了。\n        if (this.managerOptions.length > 0) {\n          return;\n        }\n        let userArr = [];\n        $.each(this.position_real_name, (key, val) => {\n          let obj = {\n            value: key+'&'+val.real_name,\n            label: val.real_name,\n            type: key\n          }\n          userArr.push(obj);\n        })\n        this.managerOptions = userArr;\n      },\n      select_id: function () {\n        this.$emit('select_position_id',this.select_id);\n      },\n      managerSelected: function(){  //获取选中基金产品的id\n        this.$emit('change_manager_selected', this.managerSelected);\n      },\n      totalSelected: function(){  //获取选中基金产品的id\n        this.$emit('change_total_selected', this.totalSelected);\n      },\n      position_show: function () {  //全部展开与收起\n        this.position_display_detail = this.position_show;  //公司\n        this.position_user_display_detail = this.position_show;  //基金经理\n      },\n      concernStock: function () {  // 是否显示全部股票\n        this.$emit('change_concern_stock', this.concernStock);\n      }\n    },\n    methods: {\n      isConcernStock: function () { //是否关注股票\n        this.concernStock = !this.concernStock;\n      },\n      positionExpert: function () {  //导出\n        $.startLoading();\n        let ManagerSelectedArr = ['total'];\n        let _this = this;\n        this.managerSelected.forEach((e) => {\n          ManagerSelectedArr.push(e.split('&')[0]);\n        })\n        //totalSelected持仓比例筛选\n        //ManagerSelectedArr选中的基金经理id\n        //concernStock  只显示关注股票\n        let only_star = 0;\n        if (true == this.concernStock) {\n          only_star = 1;\n        } else {\n          only_star = 0;\n        }\n\n        let sorted = {};\n        sorted.field_sort = this.position_data_show_sort.display_rules.map(function(e){\n          return e.id\n        });\n        sorted.order = this.position_data_show_sort.order;\n        sorted.order_by = this.position_data_show_sort.order_by;\n        let arr = [];\n        this.change_position_users.forEach((e) => {\n          let id = '';\n          id = e.id;\n          arr.push(id);\n        });\n        sorted.user_id = arr;\n\n        $.ajax({\n          //当产品可以拖动的时候导出需要传值\n          // url: '/bms-pub/report/stats/get_stock_position?sorted[field_sort]=' +\n          //   sorted.field_sort.join(',') + '&sorted[order]=' + sorted.order + '&sorted[order_by]=' + sorted.order_by + '&sorted[user_id]=' + sorted.user_id.join(','),\n          url: '/bms-pub/report/stats/get_stock_position?sorted[order]=' + sorted.order + '&sorted[order_by]=' + sorted.order_by,\n          type: 'GET',\n          data: {\n            user_id: ManagerSelectedArr.join(','),\n            position_rate: _this.totalSelected,\n            is_only_star: only_star,\n            is_tiny: _this.select_id,\n            is_explode_mode: 1\n          },\n          success: ({code,msg,data}) => {  //因为在文件中心不管文件生成与否都会显示，故再次不需要判断0==code\n            $.clearLoading();\n            $.omsAlert('正为您生成报表，成功后可进入文件中心下载');\n          },\n          error: () => {\n            $.omsAlert('网络异常，请重试');\n          }\n        })\n      },\n      positionRefresh: function () { //刷新\n        if ($('.refresh-btn').hasClass('loading')) {\n          return;\n        }\n\n        //刷新页面,方便组件重复利用\n        if (\"[object Function]\" == Object.prototype.toString.call(this.$root.positionDoRefresh)) {\n          this.$root.positionDoRefresh(true);\n        }\n\n        $('.refresh-btn').addClass('loading');\n      },\n      position_all_show: function () {  //展开／收起全部产品\n        if (true == this.position_show) {\n          this.position_show = false;\n          this.position_describle = '展开全部产品';\n          $(\".open-close__icon__bgd\").css('transform','rotate(180deg)');\n        } else {\n          this.position_show = true;\n          this.position_describle = '收起全部产品';\n          $(\".open-close__icon__bgd\").css('transform','rotate(0deg)');\n        }\n      },\n      togglePositionDisplay: function () {  //是否展示公司股票\n        this.position_display_detail = !this.position_display_detail;\n      },\n      togglePositionUserDisplay: function () {  //基金经理股票是否收缩\n        this.position_user_display_detail = !this.position_user_display_detail;\n      },\n      add_follow_all: function (val) {  //全部添加关注\n        let manager_follow_id = ['total'];\n        this.managerOptions.forEach((e) => {\n          manager_follow_id.push(e.type);\n        })\n        let _this = this;\n        let stocks_arr = [];\n        $.each(this.position_stock_data, (key, val) => {\n          if (val.stocks.length > 0) {\n            val.stocks.forEach((e) => {\n              stocks_arr.push(key+'-'+e.stock_code);\n            })\n          }\n        })\n        //分批处理\n        let temp_arr = [];\n        let temp_len = Math.ceil(stocks_arr.length/200);\n        for(let i = 0; i<temp_len;i++){\n          if ( ( i+1 ) * 200 > stocks_arr.length ) {\n            temp_arr.push( stocks_arr.slice( i*200, stocks_arr.length));\n          }else{\n            temp_arr.push( stocks_arr.slice( i*200, (i+1) *200));\n          }\n        }\n        for(let n = 0 ;n<temp_arr.length;n++){\n          $.ajax({\n            url: '/bms-pub/report/stats/set_stock_position_star',\n            type: 'POST',\n            data: {\n              target_id: temp_arr[n],\n              val: val\n            },\n            success: ({code,msg,data}) => {\n              if (0 == code) {\n                //刷新页面,方便组件重复利用\n                // if (\"[object Function]\" == Object.prototype.toString.call(this.$root.positionDoRefresh)) {\n                //   this.$root.positionDoRefresh(true);\n                // }\n                _this.$root.positionDoRefresh(true);\n              }\n            },\n            error: ({code,msg,data}) => {\n              $.omsAlert('网络异常');\n            }\n          })\n        }\n      },\n      startFn: function () {\n        this.moving = true;\n      },\n      onMove: function ({relatedContext, draggedContext}) {\n        return true;\n      },\n      onEnd: function ({oldIndex, newIndex}){\n        this.moving = false;\n        // onEnd函数执行时，this.product_info_arr已经是调整过后的数组。\n        // 判断oldIndex与newIndex的大小值，决定是如何修改\n        let moveId ='';\n        let cursorId = ''\n        moveId += this.change_position_users[newIndex].id;\n\n        if (oldIndex == newIndex) {\n          return;\n        }\n\n        if (oldIndex > newIndex) {\n          cursorId += this.change_position_users[newIndex + 1].id;\n        }else{\n          cursorId += this.change_position_users[newIndex - 1].id;\n        }\n\n        // 因为每次修改都会保存，所以当成this.product_info_arr 与 productSortData.field_sort 的差别只是修改内容的差别。如果有this.product_info_arr拥有更多数据的情况，在 field_sort 后面push进去即可。\n\n        let cursorIndex = positionGridSortData.field_sort.indexOf(cursorId);\n        if (-1 == cursorIndex) {\n          // 当标尺不存在时，列表中删除需要移动的节点，再将其添加到队列头或者尾部\n          let moveIndex = positionGridSortData.field_sort.indexOf(moveId);\n          if (-1 == moveIndex) {\n            if (oldIndex > newIndex) {\n              positionGridSortData.field_sort.unshift(cursorId);\n              positionGridSortData.field_sort.unshift(moveId);\n            }else{\n              positionGridSortData.field_sort.push(moveId);\n              positionGridSortData.field_sort.push(cursorId);\n            }\n          }else{\n            if (oldIndex > newIndex) {\n              positionGridSortData.field_sort.splice(moveIndex, 1);\n              positionGridSortData.field_sort.unshift(moveId);\n            }else{\n              positionGridSortData.field_sort.splice(moveIndex, 1);\n              positionGridSortData.field_sort.push(moveId);\n            }\n          }\n        }else{\n          let moveIndex = positionGridSortData.field_sort.indexOf(moveId);\n          if (-1 == moveIndex) {\n            // positionDataShowSort.field_sort.splice(moveIndex, 1);\n            // 重新计算cursorIndex\n            cursorIndex = positionGridSortData.field_sort.indexOf(cursorId);\n            if (oldIndex > newIndex) {\n              positionGridSortData.field_sort.splice(cursorIndex, 0, moveId)\n            }else{\n              positionGridSortData.field_sort.splice(cursorIndex + 1, 0, moveId)\n            }\n          }else{\n            positionGridSortData.field_sort.splice(moveIndex, 1);\n            // 重新计算cursorIndex\n            cursorIndex = positionGridSortData.field_sort.indexOf(cursorId);\n            if (oldIndex > newIndex) {\n              positionGridSortData.field_sort.splice(cursorIndex, 0, moveId)\n            }else{\n              positionGridSortData.field_sort.splice(cursorIndex + 1, 0, moveId)\n            }\n          }\n        }\n\n        let arr = [].concat(positionGridSortData.field_sort);\n\n        this.change_position_users.forEach((e) => {\n          let id = e.id;\n\n          if (arr.indexOf(id) == -1) {\n            arr.push(id);\n          }\n        });\n        common_storage.setItem('report_position_group_order', {field_sort: arr});\n      },\n      componey_stock_volume: function (item) {  //item代表持仓超过item%总股本，item没传值为undefined代表股票之和\n        let stock_arr = this.componey_stock; //所有基金经理的股票\n        let num = 0;\n        stock_arr.forEach((e) => {\n          if (parseFloat(e.position_acc_+item) <= 0) {\n            num ++;\n          }\n        })\n        if (undefined == item) {\n          num = stock_arr.length;\n        }\n        return num;\n      },\n      componeyDate: function () {\n        let upDate = this.componey_stock[0].updated_time; // 数据更新时间\n        //时间处理\n        let dataTime = new Date(upDate*1000);\n        let hour = (dataTime.getHours() < 10) ? '0'+dataTime.getHours() : dataTime.getHours();\n        let minutes = (dataTime.getMinutes() < 10) ? '0'+dataTime.getMinutes() : dataTime.getMinutes();\n        let seconds = (dataTime.getSeconds() < 10) ? '0'+dataTime.getSeconds() : dataTime.getSeconds();\n        return hour+':'+minutes+':'+seconds;\n      }\n    }\n  })\n\n  var ajaxTime = null;\n\n  var report_form = new Vue({\n    el: '#report_form',\n    data: {\n      moving: false,\n      // 产品组列表数据\n      product_list: [],\n      // 查询日期\n      current_data: (function(){return moment().format('YYYY-MM-DD')})(),\n      // 当前选中产品id\n      current_procut_id: [],\n      // 当前产品信息\n      product_info_arr: [],\n      //是否汇总基金  0 不汇总   1  汇总\n      pos_total: true,\n      //是否查看预期变化  0 否   1  是\n      cal_expect: false,\n      //是否全部收起/展开\n      control_show: true,\n      //是否隐藏已结束产品\n      end_product: \"running\",\n      //根据当前选中的产品id获取备注信息\n      current_product_remark: [],\n      //获取最新的产品标记\n      product_current_sign: [],\n      //获取所有的产品的标杆和标记信息\n      product_sign_pole_all: [],\n      //筛选标记产品\n      product_select_sign: '',\n      //标记筛选之后的产品数组\n      product_sign_arr: [],\n      //active 控制显示哪份报表  //此处为分界线   以上的变量是产品报表的，，active以下是持仓列表的\n      active: reportActive,\n      position_form_data: {},  //持仓报表获取数据\n      changeManagerSelected: [],  //基金经理选中id\n      modelPositionId: '',  //模式id\n      position_rate: '',  //持仓比例筛选\n      is_only_star: '',  //是否显示全部股票\n      change_position_users: [],  //选中的基金经理名称，为了排序\n      is_starter: true,  //是否有关注股票权限\n      position_data_show_sort: positionSortData,  //由于模式不同数据展示不同，故需要一个变量来接收下面的判断\n      // product_promise: false, //产品报表权限\n      // position_promise: false //持仓报表权限\n    },\n    computed: {\n      dragOptions: function () {\n        return  {\n          animation: 150,\n          scroll: true,\n          scrollSensitivity: 100,\n          // group: 'description',\n          // disabled: !this.editable,\n          handle: '.journel-sheet-content__head--move',\n          ghostClass: 'ghost'\n        };\n      },\n      // 虽然没有用到product_promise，但是里面的处理逻辑修改了active和is_starter，所以暂时不能去掉\n      product_promise: function () {\n        if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_REPORT_VIEW']]) {  //产品报表\n          // this.product_promise = true;\n          this.active = 'product';\n        }\n        if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_PISITION_REPORT_VIEW']]) {  //持仓报表\n          // this.position_promise = true;\n          this.active = 'position';\n          if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_CONCERN_STOCK']]) {  //关注股票\n            this.is_starter = true;\n          } else {\n            this.is_starter = false;\n          }\n        }\n      }\n    },\n    methods: {\n      checkDisplay: function (active) {\n        if ('product' == active) {\n          return window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_REPORT_VIEW']];\n        }\n        if ('position' == active) {\n          if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_CONCERN_STOCK']]) {  //关注股票\n            this.is_starter = true;\n          } else {\n            this.is_starter = false;\n          }\n          return window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_PISITION_REPORT_VIEW']];\n        }\n      },\n      reportChange: function (change) {  //报表页面切换模式\n        if (change) {\n          $.startLoading('正在查询');\n          this.active = change;\n          if ('product' == change) {\n            this.doRefresh();\n          } else {\n            if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_PISITION_REPORT_VIEW']]) {  //持仓报表\n              // this.position_promise = true;\n              this.active = 'position';\n              if (window.LOGIN_INFO.role_permission[GV.permissions['PERMISSION_CONCERN_STOCK']]) {  //关注股票\n                this.is_starter = true;\n              } else {\n                this.is_starter = false;\n              }\n            }\n            this.positionDoRefresh();\n          }\n          $.clearLoading();\n        }\n      },\n      onStart: function(){\n        this.moving = true;\n      },\n      onMove ({relatedContext, draggedContext}) {\n        const relatedElement = relatedContext.element;\n        const draggedElement = draggedContext.element;\n        return (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      },\n      onEnd ({oldIndex, newIndex}){\n        this.moving = false;\n        // onEnd函数执行时，this.product_info_arr已经是调整过后的数组。\n        // 判断oldIndex与newIndex的大小值，决定是如何修改\n        let moveId ='';\n        let cursorId = ''\n        if (this.product_info_arr[newIndex].type == 1) {\n          moveId += 'g';\n        }else if(this.product_info_arr[newIndex].type == 2){\n          moveId += 'b';\n        }else{\n          ;\n        }\n        moveId += this.product_info_arr[newIndex].id;\n\n        if (oldIndex == newIndex) {\n          return;\n        }\n\n        if (oldIndex > newIndex) {\n          if (this.product_info_arr[newIndex + 1].type == 1) {\n            cursorId += 'g';\n          }else if(this.product_info_arr[newIndex + 1].type == 2){\n            cursorId += 'b';\n          }else{\n            ;\n          }\n          cursorId += this.product_info_arr[newIndex + 1].id;\n        }else{\n          if (this.product_info_arr[newIndex - 1].type == 1) {\n            cursorId += 'g';\n          }else if(this.product_info_arr[newIndex - 1].type == 2){\n            cursorId += 'b';\n          }else{\n            ;\n          }\n          cursorId += this.product_info_arr[newIndex - 1].id;\n        }\n\n        // 因为每次修改都会保存，所以当成this.product_info_arr 与 productSortData.field_sort 的差别只是修改内容的差别。如果有this.product_info_arr拥有更多数据的情况，在 field_sort 后面push进去即可。\n\n        let cursorIndex = productSortData.field_sort.indexOf(cursorId);\n        if (-1 == cursorIndex) {\n          // 当标尺不存在时，列表中删除需要移动的节点，再将其添加到队列头或者尾部\n          let moveIndex = productSortData.field_sort.indexOf(moveId);\n          if (-1 == moveIndex) {\n            if (oldIndex > newIndex) {\n              productSortData.field_sort.unshift(cursorId);\n              productSortData.field_sort.unshift(moveId);\n            }else{\n              productSortData.field_sort.push(moveId);\n              productSortData.field_sort.push(cursorId);\n            }\n          }else{\n            if (oldIndex > newIndex) {\n              productSortData.field_sort.splice(moveIndex, 1);\n              productSortData.field_sort.unshift(moveId);\n            }else{\n              productSortData.field_sort.splice(moveIndex, 1);\n              productSortData.field_sort.push(moveId);\n            }\n          }\n        }else{\n          let moveIndex = productSortData.field_sort.indexOf(moveId);\n          if (-1 == moveIndex) {\n            // productSortData.field_sort.splice(moveIndex, 1);\n            // 重新计算cursorIndex\n            cursorIndex = productSortData.field_sort.indexOf(cursorId);\n            if (oldIndex > newIndex) {\n              productSortData.field_sort.splice(cursorIndex, 0, moveId)\n            }else{\n              productSortData.field_sort.splice(cursorIndex + 1, 0, moveId)\n            }\n          }else{\n            productSortData.field_sort.splice(moveIndex, 1);\n            // 重新计算cursorIndex\n            cursorIndex = productSortData.field_sort.indexOf(cursorId);\n            if (oldIndex > newIndex) {\n              productSortData.field_sort.splice(cursorIndex, 0, moveId)\n            }else{\n              productSortData.field_sort.splice(cursorIndex + 1, 0, moveId)\n            }\n          }\n        }\n\n        let arr = [].concat(productSortData.field_sort);\n        this.product_info_arr.forEach((e) => {\n          let id = '';\n          if (e.type == 1) {\n            id += 'g';    // group 产品组\n          }else if(e.type == 2){\n            id += 'b';    // base 底层账户\n          }else{\n            ;             // 匹配失败，不带前缀\n          }\n\n          id += e.id;\n\n          if (arr.indexOf(id) == -1) {\n            arr.push(id);\n          }\n        });\n\n        common_storage.setItem('report_group__group_order', {field_sort: arr});\n      },\n      //下拉列表中产品标记的信息\n      getProductSign: function () {\n        let _this = this;\n        $.ajax({\n          url: '/bms-pub/report/get_sign_group',  //用户新增加的标记接口\n          type: 'GET',\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              _this.product_current_sign = data;\n              _this.product_current_sign.forEach((e) => {\n                if (e.sign_id <= 100) {\n                  if (1 == e.sign_id) {\n                    e.sign_color = 'sign_normal';\n                  } else if (2 == e.sign_id) {\n                    e.sign_color = 'sign_red';\n                  } else if (3 == e.sign_id) {\n                    e.sign_color = 'sign_pink';\n                  } else if (4 == e.sign_id) {\n                    e.sign_color = 'sign_citrus';\n                  } else if (5 == e.sign_id) {\n                    e.sign_color = 'sign_orange';\n                  } else if (6 == e.sign_id) {\n                    e.sign_color = 'sign_yellow';\n                  } else if (7 == e.sign_id) {\n                    e.sign_color = 'sign_dlackish_green';\n                  } else if (8 == e.sign_id) {\n                    e.sign_color = 'sign_green';\n                  } else if (9 == e.sign_id) {\n                    e.sign_color = 'sign_indigo';\n                  } else if (10 == e.sign_id) {\n                    e.sign_color = 'sign_blue';\n                  } else if (11 == e.sign_id) {\n                    e.sign_color = 'sign_cyan';\n                  } else if (12 == e.sign_id) {\n                    e.sign_color = 'sign_purple';\n                  } else if (13 == e.sign_id) {\n                    e.sign_color = 'sign_brown';\n                  } else if (14 == e.sign_id) {\n                    e.sign_color = 'sign_gray';\n                  } else if (15 == e.sign_id) {\n                    e.sign_color = 'sign_black';\n                  }\n                } else if (e.sign_id > 100) {\n                  e.sign_color = 'sign_product_add';\n                }\n              })\n            } else {\n              $.omsAlert(msg);\n            }\n          },\n          error: ({code,msg,data}) => {\n            $.omsAlert(msg);\n          }\n        })\n      },\n      //下拉列表中产品的数据\n      getProductList: function(){\n        let _this = this;\n        $.ajax({\n          //47 报表权限\n          url: window.REQUEST_PREFIX + '/user/get_products_by_permissions',\n          data: {\n            permission_id: 47\n          },\n          type: 'get',\n          success: function(res){\n            if (0 == res.code) {\n              if (res.data != '') {\n                res.data.group.forEach(function(e){\n                  e.type = 'group';\n                })\n                _this.product_list = res.data.group;\n                res.data.product.forEach(function (e) {\n                  e.type = 'base';\n                  _this.product_list.push(e);//获取下拉列表的信息\n                })\n              }\n            }\n\n            $('.refresh-btn').removeClass('loading');\n          },\n          error: function(){\n            $('.refresh-btn').removeClass('loading');\n          }\n        })\n      },\n      product_report_info: function (_data, _security_summary, cal_expect, end_product) { //通过下拉列表选择的产品获取产品的详细信息\n        clearTimeout(ajaxTime);\n        var _this = this;\n        //产品id 的类型\n        var _change_id_type = '';\n        //lists下面的id存储数组\n        var lists_id = [];\n        //base下面的id存储数组\n        var product_id = [];\n        _this.current_procut_id.forEach(function (i) {\n          if ('group' == i.split('&')[1]) {\n            lists_id.push(i.split('&')[0]);\n          }\n          if ('base' == i.split('&')[1]) {\n            product_id.push(i.split('&')[0])\n          }\n        })\n\n        if (lists_id.length === 0) {\n          _change_id_type = 'product_id=' + product_id.join(',');\n        }\n        if (product_id.length === 0) {\n          _change_id_type = 'group_id=' + lists_id.join(',');\n        }\n        if (lists_id.length > 0 && product_id.length > 0) {\n          _change_id_type ='group_id=' + lists_id.join(',') + '&product_id=' + product_id.join(',');\n        }\n        \n        // 优化 综合报表 - 产品列表 ajax 请求次数，切换下拉框时，请求次数太多。导致数据不正确。\n        ajaxTime = setTimeout(() => {\n          $.startLoading('正在查询');\n          $.ajax({\n            url: '/bms-pub/report/get_product_group_report?'+_change_id_type+'&date='+_data+'&security_summary=' + _security_summary + '&cal_expect=' + cal_expect + '&end_product=' + end_product,\n            type: 'GET',\n            success: function (res) {\n              if (0 == res.code) {\n                _this.product_info_arr = res.data;\n                if (0 == _this.product_info_arr.length) {\n                  $(\".custom-grey-btn__export\").addClass('doBtnExport_bgd');\n                } else {\n                  $(\".custom-grey-btn__export\").removeClass('doBtnExport_bgd');\n                }\n                // 同时获取保存的排序规则。\n                common_storage.getItem('report_group__group_order', (rtn) => {\n                  if (0 == rtn.code) {\n                    productSortData.field_sort = rtn.data.field_sort;\n  \n                    for (let i = productSortData.field_sort.length - 1; i >= 0; i--) {\n                      for (let j = 0, length = _this.product_info_arr.length; j < length; j++) {\n                        let verify_id = '';\n                        let cur_info = _this.product_info_arr[j];\n                        if (cur_info.type == '1') {\n                          verify_id += 'g';\n                        }\n                        if (cur_info.type == '2') {\n                          verify_id += 'b';\n                        }\n                        verify_id += cur_info.id;\n                        if (verify_id == productSortData.field_sort[i]) {\n                          let obj = _this.product_info_arr[j]\n                          _this.product_info_arr.splice(j, 1);\n                          _this.product_info_arr.unshift(obj)\n                        }\n                      }\n                    }\n                  }else{\n                    // 否则覆盖排序信息\n                    let arr = [];\n                    _this.product_info_arr.forEach((e) => {\n                      let id = '';\n                      if (e.type == 1) {\n                        id += 'g';    // group 产品组\n                      }else if(e.type == 2){\n                        id += 'b';    // base 底层账户\n                      }else{\n                        ;             // 匹配失败，不带前缀\n                      }\n  \n                      id += e.id;\n                      arr.push(id);\n                    });\n                    common_storage.setItem('report_group__group_order', {field_sort: arr});\n                  }\n  \n                  common_storage.getItem('report_group__grid_order', (rtn) => {\n                    if (0 == rtn.code) {\n                      comGridSortData.order = rtn.data.order;\n                      comGridSortData.order_by = rtn.data.order_by;\n                      // display_rules 根据保存的field_sort进行排序\n                      // rtn.data.field_sort 从尾到头遍历，一旦匹配则unshift添加到display_rules数组前面，且删除原来那个元素。（注意，display_rules长度及元素位置在变化，所以应该从0开始计数）\n                      for (let i = rtn.data.field_sort.length - 1; i >= 0; i--) {\n                        for (let j = 0, length = comGridSortData.display_rules.length; j < length; j++) {\n                          if (comGridSortData.display_rules[j].id == rtn.data.field_sort[i]) {\n                            let obj = comGridSortData.display_rules[j];\n                            comGridSortData.display_rules.splice(j, 1);\n                            comGridSortData.display_rules.unshift(obj);\n                          }\n                        }\n                      }\n                    }\n                  });\n                });\n              }\n              $.clearLoading();\n            },\n            error: function () {\n              $.clearLoading();\n            }\n          })\n  \n          //下面是为了获取备注信息\n          $.ajax({\n            url: '/bms-pub/report/remark/get_report_remark?'+_change_id_type,\n            type: 'GET',\n            success: ({code,msg,data}) => {\n              if (0 == code) {\n                _this.current_product_remark = data;\n              }\n            }\n          })\n  \n          //下面是为了获取所有产品的标记标杆信息\n          $.ajax({\n            url: '/bms-pub/report/get_sign?'+_change_id_type,\n            type: 'GET',\n            success: ({code,msg,data}) => {\n              _this.product_sign_pole_all = data;\n            }\n          })\n        }, 100)\n        \n      },\n      customRefreshAfterModified: function(){\n        this.doRefresh();\n      },\n      doRefresh: function(){\n        if (this.current_procut_id.length > 0) {\n          var _security_summary, cal_expect, end_product;\n          if (this.pos_total == false) {\n            _security_summary = 1;\n          } else if (this.pos_total == true) {\n            _security_summary = 0;\n          }\n\n          if (this.cal_expect == false) {\n            cal_expect = 0;\n          } else if (this.cal_expect == true) {\n            cal_expect = 1;\n          }\n\n          //是否隐藏已结束产品\n          // if (false == this.end_product) {\n          //   end_product = '';\n          // } else {\n          //   end_product = 'running';\n          // }\n\n          this.getProductSign();\n          this.product_report_info(this.current_data, _security_summary, cal_expect, this.end_product);\n\n          //获取标记筛选下的产品，每次筛选之前首先要清空原有产品\n          let sign_product_arr = [];\n          let _this = this;\n          _this.product_sign_arr = [];\n          let all_sign_arr0 = _this.product_info_arr;\n          let atr_sign = _this.product_sign_pole_all;\n          //特殊情况 0\n          if (1 == _this.product_select_sign) {\n            _this.product_sign_pole_all.forEach( (j, index) => {\n              if (1 == j.sign_id) {\n                atr_sign.splice(index,1);\n              }\n            })\n            all_sign_arr0.forEach(function (e, index) {\n              atr_sign.forEach( (j) => {\n                if (parseFloat(e.id) == parseFloat(j.product_id) && parseFloat(e.type) == parseFloat(j.type)) {\n                  all_sign_arr0.splice(index,1);\n                }\n              })\n            });\n            _this.product_sign_arr = all_sign_arr0;\n          } else {\n            _this.product_info_arr.forEach( (e) => {\n              atr_sign.forEach((ele) => {\n                if (_this.product_select_sign == ele.sign_id && e.id == ele.product_id && e.type == ele.type) {\n                  _this.product_sign_arr.push(e);\n                }\n              })\n            })\n          }\n        }\n      },\n      getPositionData: function (position_rate,is_only_star,is_tiny,user_id) {\n        //position_rate持仓比例筛选条件,is_only_star关注股票筛选条件,is_tiny展示模式,user_id展示指定基金经理的持仓报表\n        let _this = this;\n        $.startLoading('正在查询');\n        $.ajax({\n          url: '/bms-pub/report/stats/get_stock_position?position_rate='+position_rate+'&is_only_star='+is_only_star+'&is_tiny='+is_tiny+'&user_id='+user_id,\n          type: 'GET',\n          success: ({code, msg, data}) => {\n            if (0 == code) {\n              _this.position_form_data = data;\n              if ('' == data.users) {\n                _this.change_position_users = [];\n              } else {\n                _this.change_position_users = [{'id': 'total', 'name': '公司'}];\n              }\n\n              $.each(data.reports, (key, val) => {\n                $.each(data.users, (key1, val1) => {\n                  if (key == key1) {\n                    let obj = {\n                      id: key1,\n                      name: val1.real_name\n                    };\n                    _this.change_position_users.push(obj);\n                  }\n                })\n              })\n              //排序\n              common_storage.getItem('report_position_group_order', (rtn) => {\n                if (0 == rtn.code) {\n                  positionGridSortData.field_sort = rtn.data.field_sort;\n\n                  for (let i = positionGridSortData.field_sort.length - 1; i >= 0; i--) {\n                    for (let j = 0, length = _this.change_position_users.length; j < length; j++) {\n                      let verify_id = '';\n                      let cur_info = _this.change_position_users[j].id;\n                      verify_id += cur_info;\n\n                      if (verify_id == positionGridSortData.field_sort[i]) {\n                        let obj = _this.change_position_users[j]\n                        _this.change_position_users.splice(j, 1);\n                        _this.change_position_users.unshift(obj);\n                      }\n                    }\n                  }\n                } else{\n                  // 否则覆盖排序信息\n                  let arr = [];\n                  let reportData = _this.change_position_users;\n                  reportData.forEach((e) => {\n                    let id = e.id;\n                    arr.push(id);\n                  });\n\n                  common_storage.setItem('report_position_group_order', {field_sort: arr});\n                }\n\n                common_storage.getItem('report_position__grid_order', (rtn) => {\n                  if (0 == rtn.code) {\n                    _this.position_data_show_sort.order = rtn.data.order;\n                    _this.position_data_show_sort.order_by = rtn.data.order_by;\n                    // display_rules 根据保存的field_sort进行排序\n                    // rtn.data.field_sort 从尾到头遍历，一旦匹配则unshift添加到display_rules数组前面，且删除原来那个元素。（注意，display_rules长度及元素位置在变化，所以应该从0开始计数）\n                    for (let i = rtn.data.field_sort.length - 1; i >= 0; i--) {\n                      for (let j = 0, length = _this.position_data_show_sort.display_rules.length; j < length; j++) {\n                        if (_this.position_data_show_sort.display_rules[j].id == rtn.data.field_sort[i]) {\n                          let obj = _this.position_data_show_sort.display_rules[j];\n                          _this.position_data_show_sort.display_rules.splice(j, 1);\n                          _this.position_data_show_sort.display_rules.unshift(obj);\n                        }\n                      }\n                    }\n                  }\n                });\n              })\n            } else {\n              $.omsAlert(msg);\n            }\n\n            $.clearLoading();\n          },\n          error: ({code, msg, data}) => {\n            $.omsAlert(msg);\n            $.clearLoading();\n          }\n        })\n      },\n      positionDoRefresh: function () {\n        // if ('' == this.position_form_data.users) {\n        //   return false;\n        // }\n        let position_rate = this.position_rate;  //持仓比例筛选条件\n        let is_only_star;  //是否显示全部股票\n        if (false == this.is_only_star) {\n          is_only_star = 0;\n        } else {\n          is_only_star = 1;\n        }\n        let selectedArr = [];\n        this.changeManagerSelected.forEach((e) => {\n          selectedArr.push(e.split('&')[0]);\n        })\n        let is_tiny = this.modelPositionId;  //模式筛选id\n        let user_id = selectedArr.join(',');  //基金经理\n        this.getPositionData(position_rate, is_only_star, is_tiny, user_id);\n      }\n    },\n    watch: {\n      //当current_procut_id和current_data改变的时候，里面的函数调用\n      current_procut_id: function () {\n        this.doRefresh();\n      },\n      //当日期变化的时候调用该函数\n      current_data: function () {\n        this.doRefresh();\n      },\n      //当判断是否汇总证券的时候调用该函数\n      pos_total: function () {\n        this.doRefresh();\n      },\n      //查看预期变化\n      cal_expect: function(){\n        this.doRefresh();\n      },\n      //是否隐藏已结束产品\n      end_product: function () {\n        this.doRefresh();\n      },\n      product_select_sign: function () {\n        this.doRefresh();\n      },\n      is_only_star: function () {\n        this.positionDoRefresh();\n      },\n      position_rate: function () {\n        this.positionDoRefresh();\n      },\n      modelPositionId: function () {\n        this.positionDoRefresh();\n      },\n      changeManagerSelected: function () {\n        this.positionDoRefresh();\n      }\n    }\n  });\n\n  //获取下拉列表\n  if (report_form.checkDisplay('position')) {\n    report_form.getPositionData(0,0,0,'');\n  }\n  if (report_form.checkDisplay('product')) {\n    report_form.getProductList();\n  }\n}\n"]}
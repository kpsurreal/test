{"version":3,"sources":["suspension/page.js"],"names":["suspensionFn","comGridSortData","order","order_by","display_rules","id","label","format","class","hideSort","unit","modify_component","suspension","Vue","el","data","active_stock","stock_list","computed","dragOptions","animation","ghostClass","display_stocks","_this","rtn","forEach","e","obj","is_adjust","name","operator","stock_display","stock_name","stock_id","influence_rate","weight","suspend_date","market_value","amac_display","amac_name","amac_index","amac_price","amac_last_price","adjust_market_value","modify_market_value","push","VUECOMPONENT","sort","methods","chgSort","field_sort","map","common_storage","setItem","getAjaxUrl","modify_value","v","console","log","displayValue","sub_value","rule","value","Array","Function","args","concat","slice","apply","onMove","relatedContext","draggedContext","relatedElement","element","draggedElement","fixed","onEnd","numeralNumber","arg","num","undefined","str","i","numeral","numeralPercent","doConfigAdjust","adjustFlag","$","ajax","url","type","success","code","msg","omsAlert","getStockList","error","customRefreshAfterModified","fund_list","getItem","length","j","splice","unshift"],"mappings":"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","file":"page.js","sourcesContent":["// 场外停牌估值调整js\nfunction suspensionFn () {\n  let comGridSortData = {\n    order: '',\n    order_by: '',\n    display_rules: [{\n      id: 'name', // 变量id\n      label: '持仓产品',         // 变量显示名称\n      format: '',               // 格式化处理函数，不能提前进行处理，因为数据还要用来排序什么的。此处的处理理解为只为显示，脱离于逻辑 （函数定义于vue中）\n      class: 'left20'           // 样式\n    },{\n      id: 'operator',\n      label: '基金经理',\n      hideSort: true,\n      format: '',\n      class: 'left20'\n    },{\n      id: 'stock_display',           // stock_id和stock_name拼起来\n      label: '停牌股票',\n      format: '',\n      class: 'left20'\n    },{\n      id: 'influence_rate',\n      label: '指数变动对净值影响比例',\n      format: ['numeralPercent'],\n      class: 'right20'\n    },{\n      id: 'weight',\n      label: '持仓权重',\n      format: ['numeralPercent'],\n      class: 'right20'\n    },{\n      id: 'suspend_date',\n      label: '停牌日',\n      hideSort: true,\n      format: '',                 //['numeralNumber', 2],\n      class: 'right20'\n    },{\n      id: 'market_value',\n      label: '停牌日市值',\n      hideSort: true,\n      format: ['numeralNumber', 2],\n      class: 'right20'\n    },{\n      id: 'amac_display',           // amac_name和amac_index拼起来\n      label: '行业代码',\n      hideSort: true,\n      format: '',\n      class: 'left20'\n    },{\n      id: 'amac_price',\n      label: '今日指数',\n      hideSort: true,\n      format: ['numeralNumber', 4],\n      class: 'left20',\n      unit: ''                   // 附带后缀单位\n    },{\n      id: 'amac_last_price',\n      label: '停牌日指数',\n      hideSort: true,\n      format: ['numeralNumber', 4],\n      class: 'left20',\n      unit: ''                   // 附带后缀单位\n    },{\n    //   id: 'adjust_market_value',\n    //   label: '调整前市值',\n    //   hideSort: true,\n    //   format: ['numeralNumber', 2],\n    //   class: 'left20',\n    //   unit: ''                   // 附带后缀单位\n    // },{\n      id: 'modify_market_value',\n      label: '调整后市值',\n      hideSort: true,\n      // format: ['numeralNumber', 2],\n      class: 'left20',\n      modify_component: true,\n      unit: ''                   // 附带后缀单位\n    }]\n  }\n\n  let suspension = new Vue({\n    el: '#suspension',\n    data: {\n      active_stock: '',\n      display_rules: comGridSortData.display_rules,\n      order: comGridSortData.order,\n      order_by: comGridSortData.order_by,\n      stock_list: []\n    },\n    computed: {\n      dragOptions () {\n        return  {\n          animation: 0,\n          // group: 'description',\n          // disabled: !this.editable,\n          ghostClass: 'ghost'\n        };\n      },\n      display_stocks: function(){\n        let _this = this;\n        let rtn = [];\n        // 步骤1，根据接口数据进行准备\n        this.stock_list.forEach(function(e){\n          let obj = {};\n          // 是否估值调整，1为是，0为否\n          obj.is_adjust = e.is_adjust;\n          // id\n          obj.id = e.id;\n\n          // 持仓产品\n          obj.name = e.name;\n          // 基金经理\n          obj.operator = e.operator;\n          // 停牌股票\n          obj.stock_display = e.stock_name + ' ' + e.stock_id;\n          // 指数变动对净值影响比例\n          obj.influence_rate = e.influence_rate;\n          // 持仓权重\n          obj.weight = e.weight;\n          // 停牌日\n          obj.suspend_date = e.suspend_date;\n          // 停牌日市值\n          obj.market_value = e.market_value;\n          // 行业代码\n          obj.amac_display = e.amac_name + ' ' + e.amac_index\n          // 今日指数\n          obj.amac_price = e.amac_price;\n          // 停牌日指数\n          obj.amac_last_price = e.amac_last_price;\n          // 调整前市值\n          obj.adjust_market_value = e.adjust_market_value;\n          // 调整后市值\n          obj.modify_market_value = e.modify_market_value;\n\n          rtn.push(obj);\n        });\n\n        // 步骤2，根据排序逻辑进行排序\n        rtn = VUECOMPONENT.sort(rtn, _this.order, _this.order_by);\n        return rtn;\n        // if (_this.order == 'asc' || _this.order == 'desc') {\n        //   rtn.sort((a, b) => {\n        //     let x = a[_this.order_by];\n        //     let y = b[_this.order_by];\n        //     if ( !isNaN(parseFloat(x)) && !isNaN(parseFloat(y)) ) {\n        //       x = parseFloat(x);\n        //       y = parseFloat(y);\n        //     }\n        //     if (x > y) {\n        //       return 1;\n        //     }\n        //     if (x < y) {\n        //       return -1;\n        //     }\n        //     return 0;\n        //   })\n\n        //   if ('desc' == _this.order) {\n        //     rtn.reverse();\n        //   }\n        //   return rtn;\n        // }else{\n        //   return rtn;\n        // }\n      }\n    },\n    methods: {\n      chgSort: function(id){\n        if (id == this.order_by) {\n          if (this.order == 'asc') {\n            this.order = 'desc';\n          }else if(this.order == 'desc'){\n            this.order = '';\n          }else{\n            this.order = 'asc'\n          }\n        }else{\n          this.order_by = id;\n          this.order = 'asc';\n        }\n        // 用户切换排序命令，需要保存新的排序\n        let obj = {};\n        obj.field_sort = this.display_rules.map(function(e){\n          return e.id\n        });\n        obj.order_by = this.order_by;\n        obj.order = this.order;\n        common_storage.setItem('suspension_page__grid_order', obj);\n      },\n      getAjaxUrl: function(){\n        return '/bms-pub/suspension/edit_market_value';\n      },\n      modify_value: function(v){\n        console.log('v: ' + v);\n      },\n      displayValue: function(sub_value, rule){\n        let value = sub_value[rule.id];\n        if ((rule.format != '') && (rule.format instanceof Array) && (this[rule.format[0]] instanceof Function)) {\n          // value = this[rule.format].call(this, value, )\n          let args = [value].concat(rule.format.slice(1))\n          value = this[rule.format[0]].apply(this, args);\n        }\n        if (rule.unit) {\n          return value + rule.unit;\n        }else{\n          return value;\n        }\n      },\n      onMove ({relatedContext, draggedContext}) {\n        const relatedElement = relatedContext.element;\n        const draggedElement = draggedContext.element;\n        return (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      },\n      onEnd ({}){\n        // // 用户切换表格排序，需要保存新的排序\n        // let obj = {};\n        // obj.field_sort = this.display_rules.map(function(e){\n        //   return e.id\n        // });\n        // obj.order_by = this.order_by;\n        // obj.order = this.order;\n        // common_storage.setItem('report_group__grid_order', obj);\n      },\n      numeralNumber: function(arg, num){\n        if ('--' == arg || '' == arg || undefined == arg) {\n          return '--'\n        }\n        if (undefined != num) {\n          var str = '0.'\n          for (let i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      },\n      numeralPercent: function(arg){\n        return numeral(arg).format( '0.00%' );\n      },\n      doConfigAdjust: function(id, adjustFlag){\n        let _this = this;\n        $.ajax({\n          url: '/bms-pub/suspension/set_market_value',\n          type: 'post',\n          data: {\n            id: id,\n            is_adjust: adjustFlag == true ? 1 : 0\n          },\n          success: function({code, msg, data}){\n            if (0 == code) {\n              $.omsAlert('提交成功')\n              _this.getStockList();\n            }else{\n              $.omsAlert(msg);\n            }\n          },\n          error: function(){\n            $.omsAlert('网络异常，请重试。')\n          }\n        })\n      },\n      customRefreshAfterModified: function(){\n        this.getStockList();\n      },\n      getStockList: function(){\n        let _this = this;\n        $.ajax({\n          url: '/bms-pub/suspension/stock_list',\n          type: 'get',\n          data: {\n\n          },\n          success: function({code, msg, data}){\n            if (0 == code) {\n              data.forEach(function(e){\n                e.fund_list = [];\n              })\n              _this.stock_list = data;\n\n              // 同时获取保存的排序规则\n              common_storage.getItem('suspension_page__grid_order', ({code, msg, data}) => {\n                if (0 == code) {\n                  comGridSortData.order = data.order;\n                  comGridSortData.order_by = data.order_by;\n                  _this.order = data.order;\n                  _this.order_by = data.order_by;\n                  // comGridSortData.field_sort = data.field_sort;\n                  for (let i = data.field_sort.length - 1; i >= 0; i--) {\n                    for (var j = 0, length = comGridSortData.display_rules.length; j < length; j++) {\n                      if (comGridSortData.display_rules[j].id == data.field_sort[i]) {\n                        let obj = comGridSortData.display_rules[j];\n                        comGridSortData.display_rules.splice(j, 1);\n                        comGridSortData.display_rules.unshift(obj);\n                      }\n                    }\n                  }\n                }\n              });\n            }else{\n              $.omsAlert(msg)\n            }\n          },\n          error: function(){\n            $.omsAlert('网络异常，请重试。')\n          }\n        })\n      }\n    }\n  })\n\n  suspension.getStockList();\n}\n"]}
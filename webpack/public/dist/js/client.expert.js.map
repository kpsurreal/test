{"version":3,"sources":["client.expert.js"],"names":["$","doClose","num","html","empty","addClass","refresh_timer","setInterval","ajax","url","window","REQUEST_PREFIX","type","success","code","msg","data","error","console","log","Vue","component","props","template","APP_NAME","computed","methods","doNewWindow","require","remote","createNewWindow","omsAlert","doLogout","LogOut","doRefresh","$emit","doExport","location_url","location_data","cur_nav","product_id","cur_product_id","export_format","start","moment","format","stock_id","query_stock","begin_date","end","end_date","startLoading","clearLoading","changeProduct","event","target","value","selectOne","v","showArr","focusFlag","stock_name","stock_input","stockList","stock_info","latest_suggest_timestamp","submit_price","submit_amount","amount_radio_value","error_tip","update_timer","keyup_arr","keyup_index","type_deal1","type_deal2","trade_mode","temp_price","show_enable_cash","_this","numeral","enable_cash","max_amount","tmpStopTop","stop_top","undefined","Math","floor","rtn","position_realtime","forEach","e","enable_sell_volume","max_sell_amount","frozen_amount","watch","clearInterval","clearErrorTip","mothod_deal","val","setSubmitPrice","getColorByPrice","line","getMaxSellAmount","add_hand_order","test","total_amount","stop_down","substring","removeClass","on","stock_code","trade_direction","price","volume","is_manual_order","ignore_tips","market","res","result_order","row","btnType","entrustStatus","style","temp","limit_action","color","unshift","contentChild","extend","total","toFixed","result","btn_submit","self","post","done","setTimeout","$parent","close","fail","always","$root","refresh","btn_cancel","mounted","prototype","$confirm","title","content","closeIcon","resetForm","setSubmitAmount","oldValue","parseFloat","calcSubmitPrice","calcSubmitAmount","parsePrice","parseNumber","reg","String","replace","parsePercent","selectOneStock","id","name","getStockDetail","ask1_price","bid1_price","showTrader","some","callback","Object","toString","call","getStockList","Date","valueOf","str","getJSON","length","listenKeyboard","$event","$refs","focus","minDate","maxDate","beginDate","endDate","currentDate","queryStock","init_obj","allSelected","noMatchesFound","placeholder","select_id","batch_down_fn","batch_down_list","need_show_arr","tableData","checked","displayTableData","RegExp","stock","push","options","report_file_center","LOGIN_INFO","org_info","theme","label","displayTableDataV2","batch_down","down_url_arr","center_list","i","obj","down_url","split","decodeURI","user_id","file_name","join","date","location","href","showDisplayTableData","showDisplayTableDataV2","doRevert","orderArr","trHtml","order_id","entrust","showRevertResult","resultHtml","okNum","notOkNum","cur_product_info","workflow_id","status","every","el","selectAll","disabled","deselectAll","rule","checkPositive","getProfitOfToday","info","profit_of_today_v2_id","redeem_fee","manage_fee","other_fee","profit_of_today_v2","tr_click","index","tr_dbclick","old_password","new_password","doSubmit","match","login_password","failNotice","change_model","change_model_id","reportItem","change_selected_id","splice","reportAllSelected","change_selected_model","disabledFn","product_data","reportStatus","itemId","deleteReport","item","confirm","columnClass","confirmButton","confirmButtonClass","cancelButton","reportDoenLoad","report_name","regenerate","each","request_url","key","key1","val1","file_id","getRiskRatio","right_capital","total_assets","client_body","product_list","productInfo","cur_product_index","current_data","chgSelected","display_nav","getDataFn","getPositionRealtimeInfo","tableController","tableHead","mapping","numeralFormat","showPositiveSign","display","controller","customColor","tmp","toLowerCase","getEntrustInfo","disabledMapping","getReportDealTodayInfo","getReportEntrustHistoryInfo","getReportDealHistoryInfo","getProductInfo","getCenterList","product","tmpArr","reportType","changeSelectProduct","getProductList","filter","is_running","getRiskList","product_id_list","map","riskCheck","getRulesData","getPositionInfo","Infinity","net_value","risk_arr","Number","position","tempArr","sort","a","b","risk_line_data_net_value","closing_line_data","closing_line_data_net_value","real_total_amount","entrust_volume","profit_of_today","today_earning","newData","permission_type","stock_id_arr","list","afterFilter","cancel_status","page","count","client_trader"],"mappings":";;;;AAAA;;;;AAIAA,EAAE,YAAU;AACV,WAASC,OAAT,CAAiBC,GAAjB,EAAqB;AACnBF,MAAE,kCAAF,EAAsCG,IAAtC,CAA2C,QAAOD,GAAP,GAAY,IAAvD;;AAEA,QAAI,KAAKA,GAAT,EAAc;AACZF,QAAE,0BAAF,EAA8BI,KAA9B;AACAJ,QAAE,iBAAF,EAAqBK,QAArB,CAA8B,MAA9B;AACD;AACF;;AAED,MAAIC,gBAAgBC,YAAY,YAAY;AAC1CP,MAAEQ,IAAF,CAAO;AACLC,WAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,qBAD9B;AAELC,YAAM,KAFD;AAGLC,eAAS,uBAA2B;AAClC;;AADkC,YAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,YAAXC,GAAW,QAAXA,GAAW;AAAA,YAANC,IAAM,QAANA,IAAM;AAEnC,OALI;AAMLC,aAAO,iBAAU;AACfC,gBAAQC,GAAR,CAAY,OAAZ;AACD;AARI,KAAP;AAUD,GAXmB,EAWjB,OAAO,EAXU,CAApB;;AAaA;AACAC,MAAIC,SAAJ,CAAc,eAAd,EAA+B;AAC7BC,WAAO,CAAC,cAAD,EAAiB,gBAAjB,EAAmC,SAAnC,EAA8C,YAA9C,EAA4D,UAA5D,EAAwE,aAAxE,CADsB;AAE7BC,cAAU,sFAE8BC,QAF9B,4rCAFmB;AAmB7BR,UAAM,gBAAU;AACd,aAAO,EAAP;AAED,KAtB4B;AAuB7BS,cAAU,EAvBmB;AAyB7BC,aAAS;AACPC,mBAAa,uBAAU;AACrB,YAAIjB,OAAOkB,OAAP,IAAkBlB,OAAOkB,OAAP,CAAe,UAAf,CAAlB,IAAgDlB,OAAOkB,OAAP,CAAe,UAAf,EAA2BC,MAA3E,IAAqFnB,OAAOkB,OAAP,CAAe,UAAf,EAA2BC,MAA3B,CAAkCD,OAAlC,CAA0C,WAA1C;AACrF;AACA;AAFJ,UAGG;AACDlB,mBAAOkB,OAAP,CAAe,UAAf,EAA2BC,MAA3B,CAAkCD,OAAlC,CAA0C,WAA1C,EAAuDE,eAAvD;AACD,WALD,MAKK;AACH9B,YAAE+B,QAAF,CAAW,gBAAX;AACD;AACF,OAVM;AAWPC,gBAAU,oBAAU;AAClBC;AACD,OAbM;AAcPC,iBAAW,qBAAU;AACnB,aAAKC,KAAL,CAAW,SAAX;AACD,OAhBM;AAiBPC,gBAAU,oBAAU;AAClB;AACA,YAAIC,eAAe,EAAnB;AACA,YAAIC,gBAAgB,EAApB;AACA,YAAI,aAAa,KAAKC,OAAtB,EAA+B;AAC7BF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,4CAA7C;AACA2B,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACA;AACD,SAJD,MAIM,IAAG,cAAc,KAAKF,OAAtB,EAA8B;AAClCF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,4CAA7C;AACA2B,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACA;AACD,SAJK,MAIA,IAAG,mBAAmB,KAAKF,OAA3B,EAAmC;AACvCF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,qCAA7C;AACA2B,wBAAcI,aAAd,GAA8B,QAA9B;AACAJ,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACAH,wBAAcK,KAAd,GAAsBC,SAASC,MAAT,CAAgB,YAAhB,CAAtB;AACAP,wBAAcQ,QAAd,GAAyB,KAAKC,WAA9B;AACA;AACD,SAPK,MAOA,IAAG,gBAAgB,KAAKR,OAAxB,EAAgC;AACpCF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,kCAA7C;AACA2B,wBAAcI,aAAd,GAA8B,QAA9B;AACAJ,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACAH,wBAAcK,KAAd,GAAsBC,SAASC,MAAT,CAAgB,YAAhB,CAAtB;AACAP,wBAAcQ,QAAd,GAAyB,KAAKC,WAA9B;AACA;AACD,SAPK,MAOA,IAAG,qBAAqB,KAAKR,OAA7B,EAAqC;AACzCF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,qCAA7C;AACA2B,wBAAcI,aAAd,GAA8B,QAA9B;AACAJ,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACAH,wBAAcK,KAAd,GAAsB,KAAKK,UAA3B;AACAV,wBAAcW,GAAd,GAAoB,KAAKC,QAAzB;AACAZ,wBAAcQ,QAAd,GAAyB,KAAKC,WAA9B;AACA;AACD,SARK,MAQA,IAAG,kBAAkB,KAAKR,OAA1B,EAAkC;AACtCF,yBAAe,CAAC3B,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,kCAA7C;AACA2B,wBAAcI,aAAd,GAA8B,QAA9B;AACAJ,wBAAcE,UAAd,GAA2B,KAAKC,cAAhC;AACAH,wBAAcK,KAAd,GAAsB,KAAKK,UAA3B;AACAV,wBAAcW,GAAd,GAAoB,KAAKC,QAAzB;AACAZ,wBAAcQ,QAAd,GAAyB,KAAKC,WAA9B;AACA;AACD;;AAED/C,UAAEmD,YAAF;AACAnD,UAAEQ,IAAF,CAAO;AACLC,eAAK4B,YADA;AAELzB,gBAAM,KAFD;AAGLI,gBAAMsB,aAHD;AAILzB,mBAAS,mBAAM;AACbb,cAAEoD,YAAF;AACApD,cAAE+B,QAAF,CAAW,sBAAX;AACD,WAPI;AAQLd,iBAAO,iBAAM;AACXjB,cAAE+B,QAAF,CAAW,UAAX;AACD;AAVI,SAAP;AAYD,OA1EM;AA2EPsB,qBAAe,uBAASC,KAAT,EAAe;AAC5B,aAAKnB,KAAL,CAAW,gBAAX,EAA6BmB,MAAMC,MAAN,CAAaC,KAA1C;AACD;AA7EM;AAzBoB,GAA/B;;AA0GA;AACApC,MAAIC,SAAJ,CAAc,YAAd,EAA4B;AAC1BC,WAAO,CAAC,SAAD,CADmB;AAE1BC,20FAF0B;AAqC1BG,aAAS;AACP+B,iBAAW,mBAASC,CAAT,EAAW;AACpB,YAAI,KAAKnB,OAAL,KAAiBmB,CAArB,EAAwB;AACtB,eAAKvB,KAAL,CAAW,OAAX,EAAoBuB,CAApB;AACD;AACF;AALM;AArCiB,GAA5B;;AA8CA;AACAtC,MAAIC,SAAJ,CAAc,eAAd,EAA+B;AAC7BC,WAAO,CAAC,SAAD,EAAY,aAAZ,EAA2B,gBAA3B,EAA6C,eAA7C,EAA8D,mBAA9D,CADsB;AAE7BC,i+bAF6B;AAkL7BP,UAAM,gBAAU;AACd,aAAO;AACL;AACA2C,iBAAS,CAAC;AACRpB,mBAAS;AADD,SAAD,EAEN;AACDA,mBAAS;AADR,SAFM,CAFJ;AAOLqB,mBAAW,KAPN;AAQLd,kBAAU,EARL;AASLe,oBAAY,EATP;AAUL;AACAC,qBAAa,EAXR;AAYLC,mBAAW,EAZN;AAaLC,oBAAY,EAbP;AAcL;AACAC,kCAA0B,EAfrB;;AAiBLC,sBAAc,EAjBT;AAkBLC,uBAAe,EAlBV;AAmBLC,4BAAoB,EAnBf;AAoBLC,mBAAW,EApBN;AAqBL;AACAC,sBAAc,EAtBT;AAuBLrB,aAAK,EAvBA;AAwBLsB,mBAAU,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAxBL;AAyBLC,qBAAY,CAzBP;AA0BLC,oBAAW,KA1BN;AA2BLC,oBAAW,IA3BN;AA4BLC,oBAAW,CA5BN;AA6BLC,oBAAW,EA7BN,CA6BU;AA7BV,OAAP;AA+BD,KAlN4B;AAmN7BnD,cAAU;AACRoD,wBAAkB,4BAAU;AAC1B,YAAIC,QAAQ,IAAZ;AACA,YAAI,SAAS,KAAKvC,OAAlB,EAA2B;AACzB,cAAI,MAAM,KAAKO,QAAf,EAAyB;AACvB,mBAAO,EAAP;AACD,WAFD,MAEK;AACH,mBAAOiC,QAAQD,MAAME,WAAd,EAA2BnC,MAA3B,CAAkC,MAAlC,CAAP;AACD;AACF,SAND,MAMM,IAAG,UAAU,KAAKN,OAAlB,EAA0B;AAC9B,cAAI,MAAM,KAAKO,QAAf,EAAyB;AACvB,mBAAO,EAAP;AACD,WAFD,MAEK;AACH,mBAAOiC,QAAQD,MAAME,WAAd,EAA2BnC,MAA3B,CAAkC,MAAlC,CAAP;AACD;AACF;AACF,OAhBO;AAiBRoC,kBAAY,sBAAU;AACpB,YAAIH,QAAQ,IAAZ;AACA,YAAI,SAAS,KAAKvC,OAAlB,EAA2B;;AAEzB,cAAG,CAAC,KAAK2B,YAAN,IAAsB,KAAKA,YAAL,IAAqB,CAA9C,EAAiD;AAC/C;AACA,mBAAO,EAAP;AACD;AACD,cAAI,MAAM,KAAKpB,QAAf,EAAyB;AACvB,mBAAO,EAAP;AACD,WAFD,MAEM,IAAG,KAAK,KAAKoB,YAAV,IAA0B,MAAM,KAAKA,YAAxC,EAAqD;AACzD;AACA,gBAAIgB,aAAa,KAAKlB,UAAL,CAAgBmB,QAAjC;AACA,gBAAIC,aAAaF,UAAjB,EAA6B;AAC3B,qBAAO,EAAP;AACD;AACD,mBAAOG,KAAKC,KAAL,CAAW,KAAKT,gBAAL,GAAwB,KAAKb,UAAL,CAAgBmB,QAAxC,GAAmD,GAA9D,IAAqE,GAA5E;AACD,WAPK,MAOD;AACH,mBAAOE,KAAKC,KAAL,CAAW,KAAKT,gBAAL,GAAwB,KAAKX,YAA7B,GAA4C,GAAvD,IAA8D,GAArE;AACD;AACF,SAlBD,MAkBM,IAAG,UAAU,KAAK3B,OAAlB,EAA0B;AAC9B,cAAI,MAAM,KAAKO,QAAf,EAAyB;AACvB,mBAAO,EAAP;AACD,WAFD,MAEK;AACH;AACA,gBAAIyC,MAAM,CAAV;AACA,iBAAKC,iBAAL,CAAuBC,OAAvB,CAA+B,UAASC,CAAT,EAAW;AACxC,kBAAIZ,MAAMhC,QAAN,IAAmB4C,EAAE5C,QAAzB,EAAmC;AACjCyC,sBAAMG,EAAEC,kBAAR;AACD;AACF,aAJD;AAKA,mBAAOJ,GAAP;AACD;AACF;AACF,OAnDO;AAoDRK,uBAAiB,2BAAU;AACzB,YAAId,QAAQ,IAAZ;AACA,YAAI,UAAU,KAAKvC,OAAnB,EAA4B;AAC1B,cAAI,MAAM,KAAKO,QAAf,EAAyB;AACvB,mBAAO,EAAP;AACD,WAFD,MAEK;AACH;AACA,gBAAIyC,MAAM,CAAV;AACA,iBAAKC,iBAAL,CAAuBC,OAAvB,CAA+B,UAASC,CAAT,EAAW;AACxC,kBAAIZ,MAAMhC,QAAN,IAAmB4C,EAAE5C,QAAzB,EAAmC;AACjCyC,sBAAMG,EAAEC,kBAAR;AACD;AACF,aAJD;AAKA,mBAAOJ,GAAP;AACD;AACF;AACF,OApEO;AAqERM,qBAAe,yBAAU;AACvB,YAAIf,QAAQ,IAAZ;AACA,YAAI,SAAS,KAAKvC,OAAlB,EAA2B;AACzB,cAAI,KAAK4B,aAAT,EAAwB;AACtB,gBAAI,KAAK,KAAKD,YAAV,IAA0B,MAAM,KAAKA,YAAzC,EAAuD;AACrD,qBAAOa,QAAQ,KAAKZ,aAAL,GAAqB,KAAKH,UAAL,CAAgBmB,QAA7C,EAAuDtC,MAAvD,CAA8D,MAA9D,CAAP;AACD,aAFD,MAEK;AACH,qBAAOkC,QAAQ,KAAKZ,aAAL,GAAqB,KAAKD,YAAlC,EAAgDrB,MAAhD,CAAuD,MAAvD,CAAP;AACD;AACF,WAND,MAMK;AACH,mBAAO,CAAP;AACD;AACF,SAVD,MAUK;AACH,iBAAO,CAAP;AACD;AACF;AApFO,KAnNmB;AAyS7BiD,WAAO;AACLhD,gBAAU,oBAAU;AAClB,YAAIgC,QAAQ,IAAZ;AACA,YAAIS,MAAM,EAAV;AACA;AACA,aAAKC,iBAAL,CAAuBC,OAAvB,CAA+B,UAAUC,CAAV,EAAa;AAC1C,cAAIZ,MAAMhC,QAAN,IAAkB4C,EAAE5C,QAAxB,EAAkC;AAChCyC,kBAAMG,EAAEC,kBAAR;AACD;AACF,SAJD;AAKA;;AAEA,YAAIP,aAAa,KAAKtC,QAAlB,IAA8B,MAAM,KAAKA,QAA7C,EAAuD;AACrD5B,kBAAQC,GAAR,CAAY,oBAAoB,KAAK2B,QAArC;AACAiD,wBAAc,KAAKzB,YAAnB;AACD;AACF,OAhBI;AAiBLJ,oBAAc,wBAAU;AACtB,YAAI,KAAKA,YAAL,GAAoB,CAAxB,EAA2B;AACzB,eAAKA,YAAL,GAAoB,CAApB;AACD;AACF,OArBI;AAsBLC,qBAAe,yBAAU;AACvB,YAAI,KAAKA,aAAL,GAAqB,KAAKc,UAA9B,EAA0C;AACxC,eAAKd,aAAL,GAAqB,KAAKc,UAA1B;AACD;AACD,YAAI,KAAKd,aAAL,GAAqB,CAAzB,EAA4B;AAC1B,eAAKA,aAAL,GAAqB,CAArB;AACD;AACD;AACD,OA9BI;AA+BLC,0BAAoB,8BAAU;AAC5B,YAAI,MAAM,KAAKA,kBAAf,EAAmC;AACjC;AACD,SAFD,MAEM,IAAG,YAAY,KAAKA,kBAApB,EAAuC;AAC3C,eAAKD,aAAL,GAAqB,KAAKc,UAA1B;AACA,eAAKe,aAAL;AACD,SAHK,MAGA,IAAG,YAAY,KAAK5B,kBAApB,EAAuC;AAC3C,eAAKD,aAAL,GAAqBkB,KAAKC,KAAL,CAAW,KAAKL,UAAL,IAAmB,IAAI,CAAvB,IAA4B,GAAvC,IAA8C,GAAnE;AACA,eAAKe,aAAL;AACD,SAHK,MAGA,IAAG,YAAY,KAAK5B,kBAApB,EAAuC;AAC3C,eAAKD,aAAL,GAAqBkB,KAAKC,KAAL,CAAW,KAAKL,UAAL,IAAmB,IAAI,CAAvB,IAA4B,GAAvC,IAA8C,GAAnE;AACA,eAAKe,aAAL;AACD,SAHK,MAGA,IAAG,YAAY,KAAK5B,kBAApB,EAAuC;AAC3C,eAAKD,aAAL,GAAqBkB,KAAKC,KAAL,CAAW,KAAKL,UAAL,IAAmB,IAAI,CAAvB,IAA4B,GAAvC,IAA8C,GAAnE;AACA,eAAKe,aAAL;AACD;AACF;AA/CI,KAzSsB;AA0V7BtE,aAAS;AACPuE,iBADO,uBACKC,GADL,EACS;AACd,YAAGA,OAAO,CAAV,EAAY;AACV,eAAKzB,UAAL,GAAkB,IAAlB;AACA,eAAKC,UAAL,GAAkB,KAAlB,CAFU,CAEc;AACxB,eAAKE,UAAL,GAAkB,KAAKV,YAAvB;AACA,eAAKiC,cAAL,CAAoB,KAAKnC,UAAL,CAAgBmB,QAApC;AACD;AACD,YAAGe,OAAK,CAAR,EAAU;AACR,eAAKzB,UAAL,GAAkB,KAAlB;AACA,eAAKC,UAAL,GAAkB,IAAlB;AACA,eAAKyB,cAAL,CAAoB,KAAKvB,UAAzB;AACD;AACD,aAAKD,UAAL,GAAkBuB,GAAlB;AAED,OAfM;;AAgBPC,sBAAgB,wBAASzC,CAAT,EAAW;AACzB,YAAIA,CAAJ,EAAO;AACL,eAAKQ,YAAL,GAAoBR,CAApB;AACD;AACF,OApBM;AAqBP0C,uBAAiB,yBAAS1C,CAAT,EAAY2C,IAAZ,EAAiB;AAChC,YAAI3C,IAAI2C,IAAR,EAAc;AACZ,iBAAO,SAAP;AACD,SAFD,MAEM,IAAG3C,IAAI2C,IAAP,EAAY;AAChB,iBAAO,WAAP;AACD,SAFK,MAED;AACH,iBAAO,EAAP;AACD;AACF,OA7BM;AA8BPC,wBAAkB,4BAAU;AAC1B;AACA,YAAIxB,QAAQ,IAAZ;AACA,YAAIS,MAAM,EAAV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAKC,iBAAL,CAAuBC,OAAvB,CAA+B,UAASC,CAAT,EAAW;AACxC,cAAIZ,MAAMhC,QAAN,IAAmB4C,EAAE5C,QAAzB,EAAmC;AACjCyC,kBAAMG,EAAEC,kBAAR;AACD;AACF,SAJD;AAKA,eAAOJ,GAAP;AACD,OAlDM;AAmDPS,qBAAe,yBAAU;AACvB,aAAK3B,SAAL,GAAiB,EAAjB;AACD,OArDM;AAsDPkC,sBAAgB,0BAAU;AACxB,YAAIzB,QAAQ,IAAZ;AACA,YAAIH,aAAa,KAAKA,UAAtB;AACA,YAAI,MAAM,KAAK7B,QAAf,EAAyB;AACvBgC,gBAAMT,SAAN,GAAkB,SAAlB;AACA;AACD;AACD;AACA;AACA;AACA;AACA,YAAI,MAAM,KAAKF,aAAf,EAA8B;AAC5BW,gBAAMT,SAAN,GAAkB,SAAlB;AACA;AACD;AACD,YAAI,KAAK,KAAKH,YAAV,IAA0B,MAAM,KAAKA,YAAzC,EAAuD;AACrD,cAAI,MAAMsC,IAAN,CAAW,KAAK1D,QAAhB,CAAJ,EAA+B;AAC7B6B,yBAAa,CAAb;AACD,WAFD,MAEM,IAAG,MAAM6B,IAAN,CAAW,KAAK1D,QAAhB,CAAH,EAA6B;AACjC6B,yBAAa,CAAb;AACD,WAFK,MAED;AACH3E,cAAE+B,QAAF,CAAW,QAAX;AACD;AACF;;AAED,YAAI0E,eAAe,CAAnB;AACA,YAAI,SAAS,KAAKlE,OAAlB,EAA2B;AACzB,cAAI,MAAMoC,UAAV,EAAsB;AACpB8B,2BAAe1B,QAAQ,KAAKZ,aAAL,GAAqB,KAAKH,UAAL,CAAgBmB,QAA7C,EAAuDtC,MAAvD,CAA8D,MAA9D,CAAf;AACD,WAFD,MAEK;AACH4D,2BAAe1B,QAAQ,KAAKZ,aAAL,GAAqB,KAAKD,YAAlC,EAAgDrB,MAAhD,CAAuD,MAAvD,CAAf;AACD;AACF,SAND,MAMK;AACH,cAAI,MAAM8B,UAAV,EAAsB;AACpB8B,2BAAe1B,QAAQ,KAAKZ,aAAL,GAAqB,KAAKH,UAAL,CAAgB0C,SAA7C,EAAwD7D,MAAxD,CAA+D,MAA/D,CAAf;AACD,WAFD,MAEK;AACH4D,2BAAe1B,QAAQ,KAAKZ,aAAL,GAAqB,KAAKD,YAAlC,EAAgDrB,MAAhD,CAAuD,MAAvD,CAAf;AACD;AACF;;AAED,YAAI1C,OAAO,iIAGG,SAAS2E,MAAMvC,OAAf,GAAyB,MAAzB,GAAkC,MAHrC,sWASqE,SAASuC,MAAMvC,OAAf,GAAyB,EAAzB,GAA6B,MATlG,WASiH,KAAKO,QAAL,CAAc6D,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,CATjH,GASiJ,GATjJ,GASuJ,KAAK9C,UAT5J,qRAa0C,SAASiB,MAAMvC,OAAf,GAAyB,EAAzB,GAA6B,MAbvE,YAawF,KAAKoC,UAAN,GAAoB,KAAKT,YAAzB,GAAwC,IAb/H,+QAiB0C,SAASY,MAAMvC,OAAf,GAAyB,EAAzB,GAA6B,MAjBvE,WAiBsF,KAAK4B,aAjB3F,8QAqB0C,SAASW,MAAMvC,OAAf,GAAyB,EAAzB,GAA6B,MArBvE,WAqBsFkE,YArBtF,wKAwBqD,SAAS3B,MAAMvC,OAAf,GAAyB,EAAzB,GAA6B,MAxBlF,YAwBkG,SAASuC,MAAMvC,OAAf,GAAyB,MAAzB,GAAkC,MAxBpI,iLAAX;AA+BAvC,UAAE,0BAAF,EAA8BI,KAA9B,GAAsCD,IAAtC,CAA2CA,IAA3C;AACAH,UAAE,iBAAF,EAAqB4G,WAArB,CAAiC,MAAjC;AACA;AACA5G,UAAE,8BAAF,EAAkC6G,EAAlC,CAAqC,OAArC,EAA8C,YAAU;AACtD7G,YAAE,0BAAF,EAA8BI,KAA9B;AACAJ,YAAE,iBAAF,EAAqBK,QAArB,CAA8B,MAA9B;AACD,SAHD;AAIAL,UAAE,iBAAF,EAAqB6G,EAArB,CAAwB,OAAxB,EAAiC,YAAU;;AAEzC;AACA7G,YAAEQ,IAAF,CAAO;AACLC,iBAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,gBAA9B,GAAgDmE,MAAMrC,cAAtD,GAAqE,iBADrE;AAEL7B,kBAAM,MAFD;AAGLI,kBAAM;AACJ8F,0BAAYhC,MAAMhC,QADd;AAEJ6B,0BAAYG,MAAMH,UAFd,EAEyB;AAC7BoC,+BAAiB,SAASjC,MAAMvC,OAAf,GAAyB,CAAzB,GAA6B,CAH1C,EAG4C;AAChDyE,qBAAOlC,MAAMZ,YAJT,EAIsB;AAC1B+C,sBAAQnC,MAAMX,aALV,EAKwB;AAC5B+C,+BAAiB,CANb,EAMgB;AACpBC,2BAAY,CAPR;AAQJC,sBAAO;AARH,aAHD;AAaLvG,qBAAS,iBAASwG,GAAT,EAAa;AACpB;AACA;AACD;;AAECrH,gBAAEoD,YAAF;AACA0B,oBAAMwC,YAAN,CAAmBD,GAAnB;AACA;AACD;AACA,aAtBI;AAuBLpG,mBAAO,iBAAU;AACf6D,oBAAMX,aAAN,GAAsB,EAAtB;AACAnE,gBAAEoD,YAAF;AACAlC,sBAAQC,GAAR,CAAY,OAAZ;AACD;AA3BI,WAAP;AA6BD,SAhCD;AAiCD,OArKM;AAsKPmG,kBAtKO,wBAsKMD,GAtKN,EAsKU;;AAEfrH,UAAE,0BAAF,EAA8BI,KAA9B;AACAJ,UAAE,iBAAF,EAAqBK,QAArB,CAA8B,MAA9B;AACA,YAAIyE,QAAQ,IAAZ;AACA,YAAIyC,MAAM,EAAV;;AAEA;AACA,YAAGF,IAAIvG,IAAJ,IAAY,CAAf,EAAiB;AACb;AACAyG,cAAIC,OAAJ,GAAe,KAAf;AACAD,cAAIE,aAAJ,GAAoB,MAApB;AACAF,cAAIG,KAAJ,GAAY,EAAZ;AACH,SALD,MAKM,IAAGL,IAAIvG,IAAJ,IAAY,OAAf,EAAuB;AACzB,cAAGuG,IAAIrG,IAAJ,CAAS,KAAK8B,QAAd,CAAH,EAA2B;AACzB,gBAAI6E,OAAON,IAAIrG,IAAJ,CAAS,KAAK8B,QAAd,CAAX;AACA,gBAAG6E,KAAK7G,IAAL,IAAa,CAAhB,EAAkB;AACdyG,kBAAIC,OAAJ,GAAe,KAAf;AACAD,kBAAIE,aAAJ,GAAoB,MAApB;AACAF,kBAAIG,KAAJ,GAAY,EAAZ;AAGH,aAND,MAMM,IAAGC,KAAK7G,IAAL,IAAa,OAAhB,EAAwB;AAC5B;AACA,kBAAG6G,KAAK5G,GAAL,IAAU,EAAb,EAAgB;AACZ,oBAAG4G,KAAK3G,IAAL,CAAU4G,YAAV,IAA0B,CAA7B,EAA+B;AAC3B;AACAL,sBAAIC,OAAJ,GAAe,IAAf;AACAD,sBAAIxG,GAAJ,GAAU4G,KAAK3G,IAAL,CAAUD,GAApB;AACAwG,sBAAIE,aAAJ,GAAoB,OAApB;AACAF,sBAAIG,KAAJ,GAAY;AACZG,2BAAM;AADM,mBAAZ;AAGH,iBARD,MAQK;AACD;AACAN,sBAAIC,OAAJ,GAAc,KAAd;AACAD,sBAAIE,aAAJ,GAAoB,MAApB;AACAF,sBAAIG,KAAJ,GAAY;AACRG,2BAAM;AADE,mBAAZ;AAGA,sBAAGF,KAAK5G,GAAL,IAAW,EAAd,EAAiB;AACbwG,wBAAIxG,GAAJ,GAAU4G,KAAK3G,IAAL,CAAUD,GAApB;AACH,mBAFD,MAEK;AACDwG,wBAAIxG,GAAJ,GAAU,CAAC4G,KAAK5G,GAAN,CAAV;AACH;AACJ;AACJ,eAtBD,MAsBK;AACD;AACAwG,oBAAIC,OAAJ,GAAc,KAAd;AACAD,oBAAIE,aAAJ,GAAoB,MAApB;AACAF,oBAAIG,KAAJ,GAAY;AACRG,yBAAM;AADE,iBAAZ;AAGA,oBAAGF,KAAK5G,GAAL,IAAW,EAAd,EAAiB;AACbwG,sBAAIxG,GAAJ,GAAU,EAAV;AACH,iBAFD,MAEK;AACDwG,sBAAIxG,GAAJ,GAAU,CAAC4G,KAAK5G,GAAN,CAAV;AACH;AACJ;AACF,aArCK,MAqCC,IAAG4G,KAAK7G,IAAL,IAAa,OAAhB,EAAwB;AAC3B;AACAyG,kBAAIC,OAAJ,GAAc,KAAd;AACAD,kBAAIxG,GAAJ,GAAU,CAAC4G,KAAK5G,GAAN,CAAV;AACAwG,kBAAIxG,GAAJ,CAAQ+G,OAAR,CAAgB,MAAhB;AACAP,kBAAIE,aAAJ,GAAoB,MAApB;AACAF,kBAAIG,KAAJ,GAAY;AACVG,uBAAO;AADG,eAAZ;AAGH,aATM,MASF;AACH;AACAN,kBAAIC,OAAJ,GAAe,KAAf;AACAD,kBAAIxG,GAAJ,GAAU4G,KAAK3G,IAAL,CAAUD,GAApB;AACAwG,kBAAIE,aAAJ,GAAoB,MAApB;AACAF,kBAAIG,KAAJ,GAAY;AACRG,uBAAM;AADE,eAAZ;AAGH;AACF,WA/DC,MA+DG;AACL;AACAN,gBAAIC,OAAJ,GAAe,KAAf;AACAD,gBAAIxG,GAAJ,GAAU,CAAC,MAAD,CAAV;AACAwG,gBAAIE,aAAJ,GAAoB,MAApB;AACAF,gBAAIG,KAAJ,GAAY,EAAZ;AACC;AAEF,SAxEK,MAwED;AACD;AACAH,cAAIC,OAAJ,GAAc,KAAd;AACAD,cAAIE,aAAJ,GAAoB,MAApB;AACAF,cAAIG,KAAJ,GAAY;AACRG,mBAAM;AADE,WAAZ;AAGA,cAAGR,IAAItG,GAAJ,IAAU,EAAb,EAAgB;AACZwG,gBAAIxG,GAAJ,GAAU,EAAV;AACH,WAFD,MAEK;AACDwG,gBAAIxG,GAAJ,GAAU,CAACsG,IAAItG,GAAL,CAAV;AACH;AACJ;AACD,YAAIgH,eAAe3G,IAAI4G,MAAJ,CAAW;AAC1BhH,cAD0B,kBACpB;AACJ,gBAAIiH,QAAS,CAACnD,MAAMZ,YAAR,GAAuB,CAACY,MAAMX,aAA1C;AACA,gBAAIA,gBAAgBW,MAAMX,aAA1B;AACCW,kBAAMX,aAAN,GAAsB,EAAtB,CAHG,CAGsB;AAC1B8D,oBAAQA,MAAMC,OAAN,CAAc,CAAd,CAAR;AACA,mBAAO;AACHpF,wBAAUgC,MAAMhC,QAAN,CAAe6D,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,CADP;AAEH9C,0BAAWiB,MAAMjB,UAFd;AAGHK,4BAAaY,MAAMZ,YAHhB;AAIHC,6BAAcA,aAJX;AAKH8D,qBAAMA,KALH;AAMHE,sBAAOZ,GANJ;AAOH5C,0BAAWG,MAAMH;AAPd,aAAP;AASD,WAfyB;;AAgB1BpD,uxFAhB0B;AA4D1BG,mBAAQ;AACN0G,sBADM,wBACM;AACR;AACA,kBAAIC,OAAO,IAAX;AACArI,gBAAEsI,IAAF,CAAO,CAAC5H,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,gBAA5B,GAA8CmE,MAAMrC,cAApD,GAAmE,iBAA1E,EAA4F;AAC1FqE,4BAAYhC,MAAMhC,QADwE;AAE1F6B,4BAAY,KAAKA,UAFyE,EAE9D;AAC5BoC,iCAAiB,SAASjC,MAAMvC,OAAf,GAAyB,CAAzB,GAA6B,CAH4C,EAG1C;AAChDyE,uBAAO,KAAK9C,YAJ8E,EAIjE;AACzB+C,wBAAQ,KAAK9C,aAL6E,EAK/D;AAC3B+C,iCAAiB,CANyE,EAMtE;AACpBE,wBAAO,CAPmF;AAQ1FD,6BAAY,CAR8E,CAQ5E;;AAR4E,eAA5F,EAUGoB,IAVH,CAUQ,UAASlB,GAAT,EAAa;AACpB,oBAAGA,IAAIvG,IAAJ,IAAY,CAAf,EAAiB;AAChBd,oBAAE+B,QAAF,CAAW,MAAX;AACA,iBAFD,MAEK;AACJ/B,oBAAE+B,QAAF,CAAWsF,IAAItG,GAAf;AACA;AACDyH,2BAAW,YAAU;AACpBH,uBAAKI,OAAL,CAAaC,KAAb;AACA,iBAFD,EAEE,GAFF;AAGA;AACA,eApBD,EAoBGC,IApBH,CAoBQ,YAAU;AAChB3I,kBAAE+B,QAAF,CAAW,MAAX;AACAyG,2BAAW,YAAU;AACnBH,uBAAKI,OAAL,CAAaC,KAAb;AACD,iBAFD,EAEE,GAFF;AAGD,eAzBD,EAyBGE,MAzBH,CAyBU,YAAU;AAClB9D,sBAAM+D,KAAN,CAAYC,OAAZ;AACD,eA3BD;AA4BH,aAhCK;AAiCNC,sBAjCM,wBAiCM;AACV,mBAAKN,OAAL,CAAaC,KAAb;AACA5D,oBAAM+D,KAAN,CAAYC,OAAZ;AACD;AApCK,WA5DkB;AAkG1BE,iBAlG0B,qBAkGjB;AACLhJ,cAAEoD,YAAF;AACH;AApGyB,SAAX,CAAnB;;AAuGAhC,YAAI6H,SAAJ,CAAcC,QAAd,CAAuB;AACnBC,iBAAO,EADY;AAEnBC,mBAAQrB,YAFW;AAGnBsB,qBAAW;AAHQ,SAAvB;AAMD,OArXM;;AAsXPC,iBAAW,qBAAU;AACnB,aAAKxG,QAAL,GAAgB,EAAhB;AACA,aAAKe,UAAL,GAAkB,EAAlB;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACA,aAAKE,YAAL,GAAoB,EAApB;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,kBAAL,GAA0B,EAA1B;AACD,OA/XM;AAgYPmF,uBAAiB,yBAAS7F,CAAT,EAAW;AAC1B,aAAKsC,aAAL;AACA,YAAIwD,WAAW,KAAKrF,aAApB;AACA,YAAI,CAAC,KAAKA,aAAV,EAAyB;AACvBqF,qBAAW,CAAX;AACD;AACD,aAAKrF,aAAL,GAAqBkB,KAAKC,KAAL,CAAWmE,WAAWD,QAAX,IAAuB9F,CAAvB,GAA2B,GAAtC,IAA6C,GAAlE;AACD,OAvYM;AAwYPgG,uBAAiB,yBAAShG,CAAT,EAAW;AAC1B,aAAKsC,aAAL;AACA,YAAIwD,WAAW,KAAKtF,YAApB;AACA,YAAI,CAAC,KAAKA,YAAV,EAAwB;AACtBsF,qBAAW,CAAX;AACD;AACD,aAAKtF,YAAL,GAAoBuF,WAAW,CAACA,WAAWD,QAAX,IAAuB,IAAvB,GAA8BC,WAAW/F,CAAX,IAAgB,IAA/C,IAAuD,IAAlE,CAApB;AACD,OA/YM;AAgZPiG,wBAAkB,0BAASjG,CAAT,EAAW;AAC3B,aAAKsC,aAAL;AACA,YAAIwD,WAAW,KAAKrF,aAApB;AACA,YAAI,CAAC,KAAKA,aAAV,EAAyB;AACvBqF,qBAAW,CAAX;AACD;AACD,aAAKrF,aAAL,GAAqBsF,WAAWD,QAAX,IAAuBC,WAAW/F,CAAX,CAA5C;AACD,OAvZM;AAwZPkG,kBAAY,oBAASlG,CAAT,EAAW;AACrB,YAAI0B,aAAa1B,CAAjB,EAAoB;AAClB,iBAAO,KAAP;AACD;AACD,eAAOqB,QAAQrB,CAAR,EAAWb,MAAX,CAAkB,OAAlB,CAAP;AACA;AACA;AACA;AACA;AACA;AAED,OAnaM;AAoaPgH,mBAAa,qBAASnG,CAAT,EAAW;AACtB,YAAI0B,aAAa1B,CAAjB,EAAoB;AAClB,iBAAO,KAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA,YAAIoG,MAAI,sBAAR;AACA,eAAOC,OAAOrG,CAAP,EAAUsG,OAAV,CAAkBF,GAAlB,EAAuB,GAAvB,CAAP;AAED,OAhbM;AAibPG,oBAAc,sBAASvG,CAAT,EAAW;AACvB,YAAIA,KAAK0B,SAAT,EAAoB;AAClB,iBAAO,KAAP;AACD,SAFD,MAEK;AACH,iBAAOL,QAAQrB,CAAR,EAAWb,MAAX,CAAkB,OAAlB,CAAP;AACD;AAEF,OAxbM;AAybPqH,sBAAgB,wBAASC,EAAT,EAAaC,IAAb,EAAkB;AAChC,YAAItF,QAAQ,IAAZ;AACA;AACA,aAAKjB,UAAL,GAAkBuG,IAAlB;AACA,aAAKtG,WAAL,GAAmBqG,GAAGxD,SAAH,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AACA,aAAK7D,QAAL,GAAgBqH,EAAhB;AACA,aAAKE,cAAL,CAAoB,YAAU;AAC5B,cAAI,SAASvF,MAAMvC,OAAnB,EAA4B;AAC1BuC,kBAAMZ,YAAN,GAAqBY,MAAMd,UAAN,CAAiBsG,UAAtC;AACD,WAFD,MAEM,IAAG,UAAUxF,MAAMvC,OAAnB,EAA2B;AAC/BuC,kBAAMZ,YAAN,GAAqBY,MAAMd,UAAN,CAAiBuG,UAAtC;AACD;AACF,SAND;AAOA;AACAxE,sBAAc,KAAKzB,YAAnB;AACA,aAAKA,YAAL,GAAoB/D,YAAY,YAAU;AACxCuE,gBAAMuF,cAAN;AACD,SAFmB,EAElB,IAFkB,CAApB;;AAIA,aAAKtG,SAAL,GAAiB,EAAjB;AACD,OA7cM;AA8cPyG,kBAAY,oBAASjI,OAAT,EAAiB;AAC3B,YAAI,KAAKoB,OAAL,CAAa8G,IAAb,CAAkB,UAAS/E,CAAT,EAAW;AAC/B,iBAAOA,EAAEnD,OAAF,IAAaA,OAApB;AACD,SAFG,CAAJ,EAEI;AACF,iBAAO,IAAP;AACD;;AAED,eAAO,KAAP;AACD,OAtdM;AAudP8H,sBAAgB,wBAASK,QAAT,EAAkB;AAChC,YAAI5F,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,0BAD9B;AAELC,gBAAM,KAFD;AAGLI,gBAAM;AACJ8B,sBAAU,KAAKA;AADX,WAHD;AAMLjC,mBAAS,wBAA2B;AAAA,gBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,gBAAXC,GAAW,SAAXA,GAAW;AAAA,gBAANC,IAAM,SAANA,IAAM;;AAClC,gBAAI,KAAKF,IAAT,EAAe;AACbgE,oBAAMd,UAAN,GAAmBhD,KAAK,CAAL,CAAnB;AACA,kBAAI2J,OAAO1B,SAAP,CAAiB2B,QAAjB,CAA0BC,IAA1B,CAA+BH,QAA/B,KAA4C,mBAAhD,EAAqE;AACnEA;AACD;AACF,aALD,MAKK;AACH;AACA5F,oBAAMwE,SAAN,GAFG,CAEe;AACnB;AACF,WAhBI;AAiBLrI,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAnBI,SAAP;AAqBD,OA9eM;AA+eP2J,oBAAc,sBAASxH,KAAT,EAAe;AAC3B,YAAIwB,QAAQ,IAAZ;AACA;AACA,YAAI,KAAKhB,WAAL,KAAqB,KAAKhB,QAAL,CAAc6D,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,CAAzB,EAAwD;AACtD,eAAK7D,QAAL,GAAgB,EAAhB;AACA,eAAKe,UAAL,GAAkB,EAAlB;AACA,eAAKG,UAAL,GAAkB,EAAlB;AACD;AACD,aAAKC,wBAAL,GAAgC,IAAI8G,IAAJ,GAAWC,OAAX,EAAhC;AACA,YAAI/G,2BAA2B,KAAKA,wBAApC;AACA,YAAIgH,MAAM,CAACvK,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,qCAA5B,GAAoE,KAAKmD,WAAnF;AACA9D,UAAEkL,OAAF,CAAUD,GAAV,EAAe1C,IAAf,CAAoB,UAASlB,GAAT,EAAa;AAC/B,cAAIpD,4BAA4Ba,MAAMb,wBAAtC,EAAgE;AAC9D;AACD;AACD,cAAGoD,IAAIvG,IAAJ,IAAU,CAAV,IAAeuG,IAAIvG,IAAJ,IAAU,OAA5B,EAAoC;AAClCgE,kBAAMf,SAAN,GAAkBsD,IAAIrG,IAAtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAI,KAAK8D,MAAMf,SAAN,CAAgBoH,MAAzB,EAAiC;AAC/BrG,oBAAMoF,cAAN,CAAqBpF,MAAMf,SAAN,CAAgB,CAAhB,EAAmBjB,QAAxC,EAAkDgC,MAAMf,SAAN,CAAgB,CAAhB,EAAmBF,UAArE;AACD;AACF,WAhBD,MAgBK;AACH;AACD;AACF,SAvBD,EAuBG+E,MAvBH,CAuBU,YAAU;AAClB5I,YAAE,cAAF,EAAkB4G,WAAlB,CAA8B,SAA9B;AACD,SAzBD;AA0BD,OAphBM;AAqhBPwE,oBArhBO,0BAqhBQC,MArhBR,EAqhBe;AACpB;AACA,YAAGA,OAAOvK,IAAP,IAAe,WAAlB,EAA8B;AAC5B;AACA,eAAK0D,WAAL;AACD;AACD,YAAG6G,OAAOvK,IAAP,IAAe,SAAlB,EAA4B;AAC1B;AACA,eAAK0D,WAAL;AACD;AACD,aAAKA,WAAL,GAAmB,KAAKA,WAAL,GAAiB,CAApC;AACA,aAAK8G,KAAL,CAAW,KAAK9G,WAAhB,EAA6B+G,KAA7B;AACA,YAAGF,OAAOvK,IAAP,IAAe,WAAlB,EAA8B;AAC5B;AACA,cAAG,KAAK0D,WAAL,IAAqB,CAAxB,EAA0B;AACxB,iBAAKkF,eAAL,CAAqB,CAAC,IAAtB;AACD;AACD,cAAG,KAAKlF,WAAL,IAAqB,CAAxB,EAA0B;AACxB,iBAAKmF,gBAAL,CAAsB,CAAC,GAAvB;AACD;AACF;AACD,YAAG0B,OAAOvK,IAAP,IAAe,YAAlB,EAA+B;AAC7B;AACA,cAAG,KAAK0D,WAAL,IAAqB,CAAxB,EAA0B;AACxB,iBAAKkF,eAAL,CAAqB,CAAC,IAAtB;AACD;AACD,cAAG,KAAKlF,WAAL,IAAqB,CAAxB,EAA0B;AACxB,iBAAKmF,gBAAL,CAAsB,CAAC,GAAvB;AACD;AACF;AACD,YAAG0B,OAAOvK,IAAP,IAAe,OAAlB,EAA0B;AACxB,eAAKyF,cAAL;AACD;AACF;AAtjBM;AA1VoB,GAA/B;AAm5BA;AACAnF,MAAIC,SAAJ,CAAc,aAAd,EAA6B;AAC3BC,WAAO,CAAC,SAAD,EAAY,kBAAZ,EAAgC,eAAhC,EAAiD,oBAAjD,EAAuE,uBAAvE,EAAgG,aAAhG,CADoB;AAE3BC,+yLAF2B;AA+E3BP,UAAM,gBAAU;AACd,aAAO;AACLwK,iBAAS,YADJ;AAELC,iBAAU,YAAU;AAAC,iBAAO7I,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,SAAjD,EAFJ;AAGL6I,mBAAY,YAAU;AAAC,iBAAO9I,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,SAAjD,EAHN;AAIL8I,iBAAU,YAAU;AAAC,iBAAO/I,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,SAAjD,EAJJ;AAKL+I,qBAAc,YAAU;AAAC,iBAAOhJ,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,SAAjD,EALR,EAK8D;AACnEgJ,oBAAY,EANP;AAOLjI,mBAAW,EAPN;AAQLG,mBAAW,EARN;AASL+H,kBAAU;AACRC,uBAAa,MADL;AAERC,0BAAgB,SAFR;AAGRC,uBAAa;AAHL,SATL;AAcLC,mBAAW,EAdN;AAeLC,uBAAe,KAfV;AAgBLC,yBAAiB;AAhBZ,OAAP;AAkBD,KAlG0B;AAmG3BtG,WAAO;AACLoG,iBAAW,qBAAY;AACrB,aAAK/J,KAAL,CAAW,kBAAX,EAA+B,KAAK+J,SAApC;AACD,OAHI;AAILL,kBAAY,sBAAU;AACpB,aAAKQ,aAAL,CAAmB,CAAnB,EAAsBC,SAAtB,CAAgC7G,OAAhC,CAAwC,UAASC,CAAT,EAAW;AACjDA,YAAE6G,OAAF,GAAY,KAAZ;AACD,SAFD;AAGA,aAAKpK,KAAL,CAAW,oBAAX,EAAiC,KAAK0J,UAAtC;AACD,OATI;AAULH,iBAAW,qBAAU;AACnB,aAAKvJ,KAAL,CAAW,mBAAX,EAAgC,KAAKuJ,SAArC;AACD,OAZI;AAaLC,eAAS,mBAAU;AACjB,aAAKxJ,KAAL,CAAW,iBAAX,EAA8B,KAAKwJ,OAAnC;AACD,OAfI;AAgBLC,mBAAa,uBAAY;AACvB,aAAKQ,eAAL,GAAuB,EAAvB;AACA,aAAKjK,KAAL,CAAW,qBAAX,EAAkC,KAAKyJ,WAAvC;AACD,OAnBI;AAoBLrJ,eAAS,mBAAY;AACnB,aAAK6J,eAAL,GAAuB,EAAvB;AACD;AAtBI,KAnGoB;AA2H3B3K,cAAU;AACR+K,wBAAkB,4BAAU;AAC1B,YAAI1H,QAAQ,IAAZ;AACA,YAAI,gBAAgB,KAAKvC,OAArB,IAAgC,mBAAmB,KAAKA,OAA5D,EAAqE;AACnE,cAAIgD,MAAM,EAAV;AACA,eAAK8G,aAAL,CAAmB,CAAnB,EAAsBC,SAAtB,CAAgC7G,OAAhC,CAAwC,UAASC,CAAT,EAAW;AACjD,gBAAI,IAAI+G,MAAJ,CAAW3H,MAAM+G,UAAjB,EAA6BrF,IAA7B,CAAkCd,EAAEgH,KAAF,CAAQ5L,IAA1C,CAAJ,EAAqD;AACnDyE,kBAAIoH,IAAJ,CAASjH,CAAT;AACD;AACF,WAJD;AAKA,iBAAOH,GAAP;AACD,SARD,MAQK;AACH,iBAAO,EAAP;AACD;AACF,OAdO;AAeRqH,eAAS,mBAAY;AACnB,YAAI,iBAAiB,KAAKrK,OAA1B,EAAmC;AAAE;AACnC,eAAK6J,eAAL,GAAuB,EAAvB;AACD;AACD,YAAIS,qBAAqB,EAAzB;AACA;AACA,YAAI,KAAKnM,OAAOoM,UAAP,CAAkBC,QAAlB,CAA2BC,KAApC,EAA2C;AACzCH,+BAAqB,CACnB;AACErJ,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WADmB,EAMnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WANmB,EAWnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WAXmB,EAgBnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WAhBmB,EAqBnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WArBmB,CAArB;AA2BD,SA5BD,MA4BO;AACL2M,+BAAqB,CACnB;AACErJ,mBAAO,MADT;AAEEyJ,mBAAO,MAFT;AAGE/M,iBAAK;AAHP,WADmB,EAMnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WANmB,EAWnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WAXmB,EAgBnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WAhBmB,EAqBnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WArBmB,EA0BnB;AACEsD,mBAAO,QADT;AAEEyJ,mBAAO,QAFT;AAGE/M,iBAAK;AAHP,WA1BmB,CAArB;AAgCD;AACD,eAAO2M,kBAAP;AACD,OApFO;AAqFRK,0BAAoB,8BAAU;AAC5B,YAAIpI,QAAQ,IAAZ;AACA,YAAI,YAAY,KAAKvC,OAAjB,IAA4B,qBAAqB,KAAKA,OAAtD,IAAiE,kBAAkB,KAAKA,OAA5F,EAAqG;AACnG,cAAIgD,MAAM,EAAV;AACA,cAAG,KAAK8G,aAAL,CAAmB,CAAnB,EAAsBC,SAAzB,EAAmC;AACjC,iBAAKD,aAAL,CAAmB,CAAnB,EAAsBC,SAAtB,CAAgC7G,OAAhC,CAAwC,UAASC,CAAT,EAAW;AACjD,kBAAI,IAAI+G,MAAJ,CAAW3H,MAAM+G,UAAjB,EAA6BrF,IAA7B,CAAkCd,EAAEoB,UAApC,CAAJ,EAAqD;AACnDvB,oBAAIoH,IAAJ,CAASjH,CAAT;AACD,eAFD,MAEM,IAAGA,EAAEgH,KAAF,IAAW,IAAID,MAAJ,CAAW3H,MAAM+G,UAAjB,EAA6BrF,IAA7B,CAAkCd,EAAEgH,KAAF,CAAQ5L,IAA1C,CAAd,EAA8D;AAClEyE,oBAAIoH,IAAJ,CAASjH,CAAT;AACD;AACF,aAND;AAOA,mBAAOH,GAAP;AACD,WATD,MASK;AACH,mBAAO,EAAP;AACD;AAEF,SAfD,MAeK;AACH,iBAAO,EAAP;AACD;AACF;AAzGO,KA3HiB;AAsO3B7D,aAAS;AACP;AACAyL,kBAAY,sBAAY;AAAA;;AACtB,YAAIrI,QAAQ,IAAZ;AACA,aAAKqH,aAAL,GAAqB,IAArB;AACA;AACA,YAAI/G,aAAa,KAAKgH,eAAlB,IAAqC,MAAM,KAAKA,eAAhD,IAAmE,KAAK,KAAKA,eAAL,CAAqBjB,MAAjG,EAAyG;AACvGnL,YAAE+B,QAAF,CAAW,QAAX;AACA,iBAAO,KAAP;AACD;;AAED,YAAIqL,eAAe,EAAnB;AACA,aAAKhB,eAAL,CAAqB3G,OAArB,CAA6B,UAACC,CAAD,EAAO;AAClCZ,gBAAMuI,WAAN,CAAkB5H,OAAlB,CAA0B,UAAC6H,CAAD,EAAO;AAC/B,gBAAI5H,KAAK4H,EAAEnD,EAAX,EAAe;AACb,kBAAIoD,MAAM,EAAV;AACAA,oBAAMD,EAAEE,QAAF,CAAWC,KAAX,CAAiB,UAAjB,EAA6B,CAA7B,CAAN;AACAL,2BAAaT,IAAb,CAAkBe,UAAUH,GAAV,CAAlB;AACD;AACF,WAND;AAOD,SARD;AASA,YAAI,KAAKH,aAAajC,MAAtB,EAA8B;AAC5BnL,YAAE+B,QAAF,CAAW,QAAX;AACA,iBAAO,KAAP;AACD;AACD/B,UAAEQ,IAAF,CAAO;AACLC,eAAK,sBADA;AAELG,gBAAM,KAFD;AAGLI,gBAAM;AACJ2M,qBAASjN,OAAOoM,UAAP,CAAkBa,OADvB;AAEJC,uBAAUR,aAAaS,IAAb,CAAkB,GAAlB,CAFN;AAGJC,kBAAM,KAAKlC,WAAL,CAAiB6B,KAAjB,CAAuB,GAAvB,EAA4BI,IAA5B,CAAiC,EAAjC;AAHF,WAHD;AAQLhN,mBAAS,wBAAqB;AAAA,gBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,gBAAdC,GAAc,SAAdA,GAAc;AAAA,gBAAVC,IAAU,SAAVA,IAAU;;AAC5BN,mBAAOqN,QAAP,CAAgBC,IAAhB,GAAuB,kCAAgCtN,OAAOoM,UAAP,CAAkBa,OAAlD,GAA0D,aAA1D,GAAwEP,aAAaS,IAAb,CAAkB,GAAlB,CAAxE,GAA+F,QAA/F,GAAwG,OAAKjC,WAAL,CAAiB6B,KAAjB,CAAuB,GAAvB,EAA4BI,IAA5B,CAAiC,EAAjC,CAA/H;AACA,mBAAO,KAAP;AACD,WAXI;AAYL5M,iBAAO,iBAAM;AACXjB,cAAE+B,QAAF,CAAW,UAAX;AACD;AAdI,SAAP;AAiBD,OA1CM;AA2CPkM,4BAAsB,gCAAU;AAC9B,eAAQ,KAAK1L,OAAL,IAAgB,YAAhB,IAAgC,KAAKA,OAAL,IAAgB,eAAxD;AACD,OA7CM;AA8CP2L,8BAAwB,kCAAU;AAChC,eAAQ,KAAK3L,OAAL,IAAgB,QAAhB,IAA4B,KAAKA,OAAL,IAAgB,iBAA5C,IAAiE,KAAKA,OAAL,IAAgB,cAAzF;AACD,OAhDM;AAiDP4L,gBAAU,kBAASzB,KAAT,EAAe;AACvB;AACA;AACE,YAAI5H,QAAQ,IAAZ;AACA,YAAIsJ,WAAW,EAAf;AACA,YAAIC,SAAS,EAAb;AACF,YAAG3B,SAAS,IAAZ,EAAiB;AAAC;AAChB,eAAKQ,kBAAL,CAAwBzH,OAAxB,CAAgC,UAASC,CAAT,EAAW;AACzC,gBAAIA,EAAE6G,OAAF,IAAa,IAAjB,EAAuB;AACrB;AACA6B,uBAASzB,IAAT,CAAc;AACZ2B,0BAAU5I,EAAEyE,EADA;AAEZrD,4BAAYpB,EAAE1B,UAAF,CAAa8C,UAFb;AAGZjD,4BAAY6B,EAAE1B,UAAF,CAAaH,UAHb;AAIZjD,sBAAM8E,EAAE6I,OAAF,CAAU3N,IAJJ,CAIS;AAJT,eAAd;AAMD;AACF,WAVD;AAWD,SAZD,MAYK;AACHwN,mBAASzB,IAAT,CAAc;AACZ2B,sBAAU5B,MAAMvC,EADJ;AAEZrD,wBAAY4F,MAAM1I,UAAN,CAAiB8C,UAFjB;AAGZjD,wBAAY6I,MAAM1I,UAAN,CAAiBH,UAHjB;AAIZjD,kBAAM8L,MAAM6B,OAAN,CAAc3N,IAJR,CAIa;AAJb,WAAd;AAMD;AACD,YAAIwN,SAASjD,MAAT,IAAmB,CAAvB,EAA0B;AACxBnL,YAAE+B,QAAF,CAAW,YAAX;AACA;AACD;AACDqM,iBAAS3I,OAAT,CAAiB,UAASC,CAAT,EAAW;AAC1B2I,oBAAU,2BACD3I,EAAEoB,UADD,+BAEDpB,EAAE7B,UAFD,uCAGO6B,EAAE9E,IAAF,IAAU,CAAV,GAAc,KAAd,GAAsB,MAH7B,YAG6C8E,EAAE9E,IAAF,IAAU,CAAV,GAAc,IAAd,GAAqB,IAHlE,gCAID8E,EAAE4I,QAJD,2BAAV;AAMD,SAPD;;AASA,YAAInO,OAAO,8WAO8CiO,SAASjD,MAPvD,igBAkBIkD,MAlBJ,kaAAX;AA6BArO,UAAE,0BAAF,EAA8BI,KAA9B,GAAsCD,IAAtC,CAA2CA,IAA3C;AACAH,UAAE,iBAAF,EAAqB4G,WAArB,CAAiC,MAAjC;;AAEA5G,UAAE,8BAAF,EAAkC6G,EAAlC,CAAqC,OAArC,EAA8C,YAAU;AACtD7G,YAAE,0BAAF,EAA8BI,KAA9B;AACAJ,YAAE,iBAAF,EAAqBK,QAArB,CAA8B,MAA9B;AACD,SAHD;;AAKA,YAAImO,mBAAmB,SAAnBA,gBAAmB,GAAU;AAC/BxO,YAAEoD,YAAF;AACA0B,gBAAM+D,KAAN,CAAYC,OAAZ;AACA,cAAI2F,aAAa,EAAjB;AACA,cAAIC,QAAQ,CAAZ;AACA,cAAIC,WAAW,CAAf;AACAP,mBAAS3I,OAAT,CAAiB,UAASC,CAAT,EAAW;AAC1B+I,0BAAc,2CAEL/I,EAAEoB,UAFG,iCAGLpB,EAAE7B,UAHG,yCAIG6B,EAAE9E,IAAF,IAAU,CAAV,GAAc,KAAd,GAAsB,MAJzB,YAIyC8E,EAAE9E,IAAF,IAAU,CAAV,GAAc,IAAd,GAAqB,IAJ9D,kCAKL8E,EAAE4I,QALG,yCAMG5I,EAAE5E,IAAF,IAAU,CAAV,GAAc,eAAd,GAAgC,eANnC,YAM4D4E,EAAE5E,IAAF,IAAU,CAAV,GAAc,IAAd,GAAqB,MANjF,0CAOG4E,EAAE5E,IAAF,IAAU,CAAV,GAAc,EAAd,GAAmB,eAPtB,YAO+C,KAAK4E,EAAE5E,IAAP,GAAc,GAAd,GAAoB4E,EAAE3E,GAPrE,4CAAd;;AAWA,gBAAI,KAAK2E,EAAE5E,IAAX,EAAiB;AACf4N,uBAAS,CAAT;AACD,aAFD,MAEK;AACHC,0BAAY,CAAZ;AACD;AACF,WAjBD;AAkBA,cAAIxO,OAAO,yNAIwCuO,KAJxC,+EAI4FC,QAJ5F,smBAiBEF,UAjBF,mUAAX;AA2BAzO,YAAE,0BAAF,EAA8BI,KAA9B,GAAsCD,IAAtC,CAA2CA,IAA3C;AACAH,YAAE,iBAAF,EAAqB4G,WAArB,CAAiC,MAAjC;AACA5G,YAAE,kCAAF,EAAsC6G,EAAtC,CAAyC,OAAzC,EAAkD,YAAU;AAC1D7G,cAAE,0BAAF,EAA8BI,KAA9B;AACAJ,cAAE,iBAAF,EAAqBK,QAArB,CAA8B,MAA9B;AACD,WAHD;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,SAjED;;AAmEAL,UAAE,gBAAF,EAAoB6G,EAApB,CAAuB,OAAvB,EAAgC,YAAU;AACxC;AACA7G,YAAEmD,YAAF;AACAiL,mBAAS3I,OAAT,CAAiB,UAASC,CAAT,EAAW;AAC1B,gBAAI4I,WAAW5I,EAAE4I,QAAjB;AACAtO,cAAEQ,IAAF,CAAO;AACLC,mBAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,gBAA5B,GAA8CmE,MAAM8J,gBAAN,CAAuBzE,EAArE,GAAwE,GAAxE,GAA4EmE,QAA5E,GAAsF,YADtF;AAEL1N,oBAAM,MAFD;AAGLI,oBAAM;AACJ6N,6BAAanJ,EAAE4I;AADX,eAHD;AAMLzN,uBAAS,wBAA2B;AAAA,oBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,oBAAXC,GAAW,SAAXA,GAAW;AAAA,oBAANC,IAAM,SAANA,IAAM;;AAClC,oBAAI,KAAKF,IAAT,EAAe,CAEd,CAFD,MAEK;AACH;AACD;AACD4E,kBAAE3E,GAAF,GAAQA,GAAR;AACA2E,kBAAE5E,IAAF,GAASA,IAAT;AACA4E,kBAAEoJ,MAAF,GAAW,UAAX;;AAEA,oBAAIV,SAASW,KAAT,CAAe,UAASC,EAAT,EAAY;AAC7B,yBAAOA,GAAGF,MAAH,IAAa,UAApB;AACD,iBAFG,CAAJ,EAEI;AACFN;AACD;AACF,eArBI;AAsBLvN,qBAAO,iBAAU;AACfC,wBAAQC,GAAR,CAAY,OAAZ;AACAuE,kBAAE3E,GAAF,GAAQ,MAAR;AACA2E,kBAAE5E,IAAF,GAAS,CAAC,CAAV;AACA4E,kBAAEoJ,MAAF,GAAW,UAAX;;AAEA,oBAAIV,SAASW,KAAT,CAAe,UAASC,EAAT,EAAY;AAC7B,yBAAOA,GAAGF,MAAH,IAAa,UAApB;AACD,iBAFG,CAAJ,EAEI;AACFN;AACD;AACF;AAjCI,aAAP;AAmCD,WArCD;AAsCD,SAzCD;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,OA7PM;AA8PPS,iBAAW,qBAAU;AACnB;AACA,aAAK5C,aAAL,CAAmB5G,OAAnB,CAA2B,UAASC,CAAT,EAAW;AACpCA,YAAE4G,SAAF,CAAY7G,OAAZ,CAAoB,UAASuJ,EAAT,EAAY;AAC9B,gBAAI,CAACA,GAAGE,QAAR,EAAkB;AAChBF,iBAAGzC,OAAH,GAAa,IAAb;AACD;AACF,WAJD;AAKD,SAND;AAOD,OAvQM;AAwQP4C,mBAAa,uBAAU;AACrB;AACA,aAAK9C,aAAL,CAAmB5G,OAAnB,CAA2B,UAASC,CAAT,EAAW;AACpCA,YAAE4G,SAAF,CAAY7G,OAAZ,CAAoB,UAASuJ,EAAT,EAAY;AAC9B,gBAAI,CAACA,GAAGE,QAAR,EAAkB;AAChBF,iBAAGzC,OAAH,GAAa,KAAb;AACD;AACF,WAJD;AAKD,SAND;AAOD,OAjRM;AAkRP1C,mBAAa,qBAASnG,CAAT,EAAY0L,IAAZ,EAAiB;AAC5B,YAAG,CAAC1L,CAAJ,EAAM;AACJ,iBAAO,KAAP;AACD;AACD,eAAOqB,QAAQrB,CAAR,EAAWb,MAAX,CAAkBuM,IAAlB,CAAP;AACD,OAvRM;AAwRPC,qBAAe,uBAAS3L,CAAT,EAAW;AACxB,YAAG+F,WAAW/F,CAAX,IAAgB,CAAnB,EAAqB;AACnB,iBAAO,cAAP;AACD,SAFD,MAEM,IAAI+F,WAAW/F,CAAX,IAAgB,CAApB,EAAuB;AAC3B,iBAAO,cAAP;AACD;;AAED,eAAO,EAAP;AACD,OAhSM;AAiSP4L,wBAAkB,0BAASC,IAAT,EAAc;AAC9B,YAAIA,KAAKpF,EAAL,IAAW,KAAKqF,qBAApB,EAA2C;AACzC,iBAAO,KAAP;AACD;AACD,YAAID,KAAKE,UAAL,IAAmBrK,SAAnB,IAAgCmK,KAAKG,UAAL,IAAmBtK,SAAnD,IAAgEmK,KAAKI,SAAL,IAAkBvK,SAAtF,EAAiG;AAC/F,iBAAO,KAAP;AACD;AACD,eAAOL,QAAQ,KAAK6K,kBAAL,GAA0BL,KAAKE,UAA/B,GAA4CF,KAAKG,UAAjD,GAA8DH,KAAKI,SAA3E,EAAsF9M,MAAtF,CAA6F,MAA7F,CAAP;AACD,OAzSM;AA0SPgN,cA1SO,oBA0SEC,KA1SF,EA0SQvI,GA1SR,EA0SY;AACjB;AACA;AACA,YAAG,KAAKhF,OAAL,IAAgB,QAAnB,EAA4B;AAAC;AAC3B,eAAKJ,KAAL,CAAW,UAAX,EAAsB2N,KAAtB,EAA4BvI,GAA5B,EAD0B,CACO;AAClC;AAEF,OAjTM;AAkTPwI,gBAlTO,sBAkTID,KAlTJ,EAkTUvI,GAlTV,EAkTc;AACnB,YAAG,KAAKhF,OAAL,IAAgB,QAAnB,EAA4B;AAAC;AAC3B,eAAKJ,KAAL,CAAW,YAAX,EAAwB2N,KAAxB,EAA8BvI,GAA9B;AACA;AACA,eAAK4G,QAAL,CAAc5G,GAAd;AACD;AAEF;AAzTM;AAtOkB,GAA7B;;AAmiBA;AACAnG,MAAIC,SAAJ,CAAc,sBAAd,EAAsC;AACpCC,WAAO,EAD6B;AAEpCC,cAAU,gJAGGC,QAHH,w1BAF0B;AAkBpCR,UAAM,gBAAU;AACd,aAAO;AACLqD,mBAAW,EADN;AAEL2L,sBAAc,EAFT;AAGLC,sBAAc;AAHT,OAAP;AAKD,KAxBmC;AAyBpCvO,aAAS;AACP4H,iBAAW,qBAAU;AACnB,aAAKjF,SAAL,GAAiB,EAAjB;AACA,aAAK2L,YAAL,GAAoB,EAApB;AACA,aAAKC,YAAL,GAAoB,EAApB;AACD,OALM;AAMPC,gBAAU,oBAAU;AAClB,YAAIpL,QAAQ,IAAZ;AACA,YAAIkL,eAAe,KAAKA,YAAxB;AACA,YAAIC,eAAe,KAAKA,YAAxB;AACA,YAAIA,aAAa9E,MAAb,GAAsB,EAAtB,IAA4B8E,aAAa9E,MAAb,GAAsB,CAAtD,EAAyD;AACvD,eAAK9G,SAAL,GAAiB,qBAAjB;AACA;AACD;AACD,YAAK,SAAS4L,aAAaE,KAAb,CAAmB,kBAAnB,CAAd,EAAuD;AACrD,eAAK9L,SAAL,GAAiB,qBAAjB;AACA;AACD;AACD;AACA;AACA;AACA;AACArE,UAAEmD,YAAF,CAAe,SAAf;AACAnD,UAAEQ,IAAF,CAAO;AACLI,gBAAM,MADD;AAELH,eAAK,oCAFA;AAGLO,gBAAK;AACH2M,qBAASb,WAAWa,OADjB;AAEHyC,4BAAgBJ,YAFb;AAGHC,0BAAcA;AAHX,WAHA;AAQLpP,mBAAS,iBAASwG,GAAT,EAAa;AACpBrH,cAAEoD,YAAF;AACA,gBAAI,KAAKiE,IAAIvG,IAAb,EAAmB;AACjBgE,oBAAMwE,SAAN;AACAtJ,gBAAE+B,QAAF,CAAWsF,IAAItG,GAAf;AACD,aAHD,MAGK;AACH+D,oBAAMT,SAAN,GAAkBgD,IAAItG,GAAtB;AACD;AACF,WAhBI;AAiBLE,iBAAO,iBAAU;AACfjB,cAAEoD,YAAF;AACApD,cAAEqQ,UAAF;AACD;AApBI,SAAP;AAsBD;AA7CM;AAzB2B,GAAtC;;AA0EA;AACA;AACAjP,MAAIC,SAAJ,CAAc,uBAAd,EAAuC;AACrCC,WAAO,CAAC,YAAD,EAAe,mBAAf,EAAoC,oBAApC,CAD8B;AAErCC,+MAFqC;AAQrCP,UAAM,gBAAY;AAChB,aAAO;AACLsP,sBAAc,KADT,EACiB;AACtBC,yBAAiB,KAAKC,UAAL,CAAgBrG,EAF5B,CAEgC;AAFhC,OAAP;AAID,KAboC;AAcrCrE,WAAO;AACLwK,oBAAc,wBAAY;AAAG;AAC3B,YAAIxL,QAAQ,IAAZ;AACA,YAAI,SAAS,KAAKwL,YAAlB,EAAgC;AAC9B,eAAKG,kBAAL,CAAwBhL,OAAxB,CAAgC,UAACC,CAAD,EAAGoK,KAAH,EAAa;AAC3C,gBAAIhL,MAAM0L,UAAN,CAAiBrG,EAAjB,IAAuBzE,CAA3B,EAA8B;AAC5BZ,oBAAM2L,kBAAN,CAAyBC,MAAzB,CAAgCZ,KAAhC,EAAsC,CAAtC;AACD;AACF,WAJD;AAKD,SAND,MAMO;AACL,eAAKW,kBAAL,CAAwB9D,IAAxB,CAA6B,KAAK6D,UAAL,CAAgBrG,EAA7C;AACD;AACD,aAAKhI,KAAL,CAAW,qBAAX,EAAkC,KAAKmO,YAAvC;AACD,OAbI;AAcLC,uBAAiB,2BAAY;AAC3B,aAAKpO,KAAL,CAAW,wBAAX,EAAqC,KAAKoO,eAA1C;AACD,OAhBI;AAiBLI,yBAAmB,6BAAY;AAAE;AAC/B,YAAI,KAAK,KAAKH,UAAL,CAAgB1B,MAAzB,EAAiC;AAC/B,iBAAO,KAAP;AACD;AACD,aAAKwB,YAAL,GAAoB,KAAKK,iBAAzB;AACD;AAtBI,KAd8B;AAsCrCjP,aAAS;AACPkP,6BAAuB,iCAAY;AACjC,YAAI,SAAS,KAAKN,YAAlB,EAAgC;AAC9B,iBAAO,KAAKA,YAAL,GAAoB,KAA3B;AACD;AACD,eAAO,KAAKA,YAAL,GAAoB,IAA3B;AACD,OANM;AAOPO,kBAAY,oBAAUL,UAAV,EAAsB;AAChC,YAAI,KAAKA,WAAW1B,MAApB,EAA4B;AAC1B,iBAAO,UAAP;AACD;AACF;AAXM;AAtC4B,GAAvC;AAoDA;AACA1N,MAAIC,SAAJ,CAAc,qBAAd,EAAqC;AACnCC,WAAO,CAAC,cAAD,EAAiB,cAAjB,CAD4B;AAEnCC,67CAFmC;AA6BnCP,UAAM,gBAAU;AACd,aAAO;AACL2P,2BAAmB,KADd,EACsB;AAC3BF,4BAAoB;AAFf,OAAP;AAID,KAlCkC;AAmCnC3K,WAAO;AACL2K,0BAAoB,8BAAY;AAC9B,aAAKtO,KAAL,CAAW,sBAAX,EAAmC,KAAKsO,kBAAxC;AACD,OAHI;AAILK,oBAAc,wBAAY;AACxB,aAAKH,iBAAL,GAAyB,KAAzB;AACD;AANI,KAnC4B;AA2CnCjP,aAAS;AACPqP,oBAAc,sBAAUC,MAAV,EAAkB;AAC9B,YAAI,KAAKA,OAAOlC,MAAhB,EAAwB;AACtB,iBAAO,KAAP;AACD,SAFD,MAEO,IAAI,KAAKkC,OAAOlC,MAAhB,EAAwB;AAC7B,iBAAO,KAAP;AACD,SAFM,MAEA,IAAI,KAAKkC,OAAOlC,MAAhB,EAAwB;AAC7B,iBAAO,KAAP;AACD;AACF,OATM;AAUPmC,oBAAc,sBAAUC,IAAV,EAAgB;AAAG;AAC/B,YAAIpM,QAAQ,IAAZ;AACA9E,UAAEmR,OAAF,CAAU;AACRhI,iBAAO,MADC;AAERC,qPAFQ;AAORC,qBAAW,IAPH;AAQR+H,uBAAa,qBARL;AASRC,yBAAe,IATP;AAURC,8BAAoB,2BAVZ;AAWRH,mBAAS,mBAAU;AACjBnR,cAAEmD,YAAF;AACAnD,cAAEQ,IAAF,CAAO;AACLC,mBAAK,6BADA;AAELG,oBAAM,MAFD;AAGLI,oBAAM;AACJmJ,oBAAI+G,KAAK/G;AADL,eAHD;AAMLtJ,uBAAS,wBAAqB;AAAA,oBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,oBAAdC,GAAc,SAAdA,GAAc;AAAA,oBAAVC,IAAU,SAAVA,IAAU;;AAC5B,oBAAI,KAAKF,IAAT,EAAe;AACb;AACA,sBAAI,uBAAuB6J,OAAO1B,SAAP,CAAiB2B,QAAjB,CAA0BC,IAA1B,CAA+B/F,MAAM+D,KAAN,CAAY3G,SAA3C,CAA3B,EAAkF;AAChF4C,0BAAM+D,KAAN,CAAY3G,SAAZ,CAAsB,IAAtB;AACD;AACDlC,oBAAEoD,YAAF;AACApD,oBAAE+B,QAAF,CAAW,MAAX;AACD;AACF,eAfI;AAgBLd,qBAAO,iBAAM;AACXjB,kBAAE+B,QAAF,CAAW,MAAX;AACD;AAlBI,aAAP;AAoBD,WAjCO;AAkCRwP,wBAAc;AAlCN,SAAV;AAqCD,OAjDM;AAkDPC,sBAAgB,wBAAUhB,UAAV,EAAsB;AAAE;AACtC,YAAI1L,QAAQ,IAAZ;AACA,YAAI,KAAK0L,WAAW1B,MAApB,EAA4B;AAAG;AAC7B,iBAAO,KAAP;AACD;AACDpO,eAAOqN,QAAP,CAAgBC,IAAhB,GAAuBwC,WAAWhD,QAAX,GAAoB,KAApB,GAA0BgD,WAAWiB,WAA5D;AACD,OAxDM;AAyDPC,kBAAY,oBAAUlB,UAAV,EAAsB;AAAA;;AAChC,YAAI,KAAKA,WAAW1B,MAAhB,IAA0B,KAAK0B,WAAW1B,MAA9C,EAAsD;AAAE;AACtD,iBAAO,KAAP;AACD;AACD;AACA,YAAK9N,OAAO,EAAZ;AACAhB,UAAE2R,IAAF,CAAOnB,WAAWoB,WAAX,CAAuB5Q,IAA9B,EAAoC,UAAC6Q,GAAD,EAAM3L,GAAN,EAAc;AAChD,cAAI+E,MAAM,EAAV;AACA,cAAI,YAAa,OAAO/E,GAAxB,EAA8B;AAC5B+E,kBAAM4G,MAAI,GAAJ,GAAQ3L,GAAd;AACAlF,iBAAK2L,IAAL,CAAU1B,GAAV;AACD,WAHD,MAGO,IAAI,oBAAoB/E,GAApB,yCAAoBA,GAApB,EAAJ,EAA6B;AAClClG,cAAE2R,IAAF,CAAOzL,GAAP,EAAY,UAAC4L,IAAD,EAAOC,IAAP,EAAgB;AAC1B,kBAAI,YAAa,OAAOA,IAAxB,EAA+B;AAC7B9G,sBAAM6G,OAAO,GAAP,GAAaC,IAAnB;AACA/Q,qBAAK2L,IAAL,CAAU1B,GAAV;AACD;AACF,aALD;AAMD;AACF,SAbD;AAcAjL,UAAEQ,IAAF,CAAO;AACLC,eAAK+P,WAAWoB,WAAX,CAAuBnR,GAAvB,GAA2B,GAA3B,GAA+BO,KAAK6M,IAAL,CAAU,GAAV,CAD/B;AAELjN,gBAAM,KAFD;AAGLI,gBAAM;AACJgR,qBAASxB,WAAWrG;AADhB,WAHD;AAMLtJ,mBAAS,wBAAqB;AAAA,gBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,gBAAdC,GAAc,SAAdA,GAAc;AAAA,gBAAVC,IAAU,SAAVA,IAAU;;AAC5B,gBAAI,KAAKF,IAAT,EAAe;AACbd,gBAAE+B,QAAF,CAAW,QAAX;AACA;AACA,kBAAI,uBAAuB4I,OAAO1B,SAAP,CAAiB2B,QAAjB,CAA0BC,IAA1B,CAA+B,OAAKhC,KAAL,CAAW3G,SAA1C,CAA3B,EAAiF;AAC/E,uBAAK2G,KAAL,CAAW3G,SAAX,CAAqB,IAArB;AACD;AACF,aAND,MAMO;AACLlC,gBAAE+B,QAAF,CAAWhB,GAAX;AACD;AACF,WAhBI;AAiBLE,iBAAO,iBAAM;AACXjB,cAAE+B,QAAF,CAAW,UAAX;AACD;AAnBI,SAAP;AAqBD;AAlGM;AA3C0B,GAArC;;AAiJA;AACAX,MAAIC,SAAJ,CAAc,eAAd,EAA+B;AAC7BC,WAAO,CAAC,UAAD,EAAa,cAAb,EAA6B,eAA7B,CADsB;AAE7BC,mUAF6B;AAQ7BP,UAAM,gBAAU;AACd,aAAO,EAAP;AAED,KAX4B;AAY7BU,aAAS;AACPmI,mBAAa,qBAASnG,CAAT,EAAY0L,IAAZ,EAAiB;AAC5B,eAAOrK,QAAQrB,CAAR,EAAWb,MAAX,CAAkBuM,IAAlB,CAAP;AACD,OAHM;AAIP6C,oBAAc,wBAAU;AACtB,YAAI,KAAKC,aAAL,IAAsB,CAAtB,IAA2B9M,aAAa,KAAK8M,aAAjD,EAAgE;AAC9D,iBAAO,CAAP;AACA;AACD,SAHD,MAGK;AACH,iBAAOnN,QAAQ,KAAKoN,YAAL,GAAoB,KAAKD,aAAjC,EAAgDrP,MAAhD,CAAuD,MAAvD,CAAP;AACD;AACF;AAXM;AAZoB,GAA/B;;AA2BA,MAAIuP,cAAc,IAAIhR,GAAJ,CAAQ;AACxB4N,QAAI,cADoB;AAExBhO,UAAM;AACJqR,oBAAc,EADV;AAEJC,mBAAa,EAFT;AAGJC,yBAAmB,CAHf;AAIJhQ,eAAS,SAJL;AAKJqN,0BAAoB,CALhB;AAMJJ,6BAAuB,EANnB;AAOJhK,yBAAmB,EAPf;AAQJkG,iBAAY,YAAU;AAAC,eAAO9I,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,OAAjD,EARP;AASJ8I,eAAU,YAAU;AAAC,eAAO/I,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,OAAjD,EATL;AAUJ2P,oBAAe,YAAU;AAAC,eAAO5P,SAASC,MAAT,CAAgB,YAAhB,CAAP;AAAqC,OAAjD,EAVV;AAWJgJ,kBAAY,EAXR;AAYJ4G,mBAAa,EAZT,EAYa;AACjBpF,mBAAa,EAbT,EAaa;AACjB;AACA1J,eAAS,CAAC;AACR/C,cAAM,cADE;AAER8R,qBAAa,CAAC,SAAD,EAAY,KAAZ,EAAmB,MAAnB,CAFL;AAGRC,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKyI,uBAAL,CAA6BzI,EAA7B;AACD,SALO;AAMR0I,yBAAiB,CAAC;AAChBC,qBAAW,MADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS;AAHO,SAAD,EAIf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAJe,EAQf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,mBAHT;AAIAC,yBAAe;AAJf,SARe,EAaf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,oBAHT;AAIAC,yBAAe;AAJf,SAbe,EAkBf;AACAF,qBAAW,KADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAJf,SAlBe,EAuBf;AACAF,qBAAW,KADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAC,yBAAe;AAJf,SAvBe,EA4Bf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAC,yBAAe;AAJf,SA5Be,EAiCf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,SAHT;AAIAC,yBAAe,QAJf;AAKAC,4BAAkB,IALlB;AAMAC,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAIA,QAAQ,CAAZ,EAAe;AACb,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,kBAAI,KAAKD,UAAL,CAAgBF,gBAApB,EAAsC;AACpC,uBAAO,MAAMlO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAb;AACD,eAFD,MAEK;AACH,uBAAOjO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF,aAPD,MAOM,IAAGxP,QAAQ,CAAX,EAAa;AACjB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,OAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD,aAHK,MAGD;AACH,mBAAKG,UAAL,CAAgBC,WAAhB,GAA8B,EAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AAEF;AAtBD,SAjCe,EAwDf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,eAHT;AAIAC,yBAAe,SAJf;AAKAC,4BAAkB,IALlB;AAMAC,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAIA,QAAQ,CAAZ,EAAe;AACb,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,kBAAI,KAAKD,UAAL,CAAgBF,gBAApB,EAAsC;AACpC,uBAAO,MAAMlO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAb;AACD,eAFD,MAEK;AACH,uBAAOjO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF,aAPD,MAOM,IAAGxP,QAAQ,CAAX,EAAa;AACjB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,OAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD,aAHK,MAGD;AACH,mBAAKG,UAAL,CAAgBC,WAAhB,GAA8B,EAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF;AArBD,SAxDe,EA8Ef;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,oBAHT;AAIAC,yBAAe;AAJf,SA9Ee,EAmFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,kBAHT;AAIAC,yBAAe;AAJf,SAnFe,EAwFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,mBAHT;AAIAC,yBAAe;AAJf,SAxFe,EA6Ff;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,UAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEM,IAAGA,OAAO,IAAV,EAAe;AACnB,qBAAO,IAAP;AACD,aAFK,MAED;AACH,qBAAO,EAAP;AACD;AACF;AAbD,SA7Fe,CANT;AAkHR/G,mBAAW;AAlHH,OAAD,EAmHP;AACAoG,qBAAa,CAAC,KAAD,EAAQ,MAAR,CADb;AAEA9R,cAAM,aAFN;AAGA+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKoJ,cAAL,CAAoBpJ,EAApB;AACD,SALD;AAMA0I,yBAAiB,CAAC;AAChBC,qBAAW,IADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS,YAHO;AAIhBG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AANe,SAAD,EAOf;AACAiQ,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AAND,SAPe,EAcf;AACAiQ,qBAAW,IADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAde,EAkBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAlBe,EAsBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAtBe,EA0Bf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGM,IAAG,KAAK5P,KAAR,EAAc;AAClB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHK,MAGD;AACH,qBAAO,IAAP;AACD;AACF;AAdD,SA1Be,EAyCf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEN,qBAAW,MARX;AASAlS,gBAAM,MATN;AAUAmS,mBAAS,QAVT;AAWAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,oBAAOA,MAAMoH,QAAN,EAAP;AACE,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,IAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;;AAEV;AACA,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,UAAP;;AAEZ;AACA,mBAAK,GAAL;AAAU,uBAAO,OAAP;;AAEV;AAAS,uBAAO,KAAP;AAnBX;AAqBD;AAjCD,SAzCe,EA2Ef;AACAkI,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,eAHT;AAIAC,yBAAe;AAJf,SA3Ee,EAgFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,gBAHT;AAIAC,yBAAe;AAJf,SAhFe,EAqFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SArFe,EAyFf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAoS,yBAAe,OAHf;AAIAD,mBAAS;AAJT,SAzFe,EA8Ff;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAJf,SA9Fe,EAmGf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEM,IAAGA,OAAO,IAAV,EAAe;AACnB,qBAAO,IAAP;AACD,aAFK,MAED;AACH,qBAAO,EAAP;AACD;AACF;AAbD,SAnGe,CANjB;AAwHA/G,mBAAW;AAxHX,OAnHO,EA4OP;AACAoG,qBAAa,CAAC,QAAD,CADb;AAEA9R,cAAM,sBAFN;AAGA+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKoJ,cAAL,CAAoBpJ,EAApB;AACD,SALD;AAMA0I,yBAAiB,CAAC;AAChBjS,gBAAM,UADU;AAEhBmS,mBAAS,SAFO;AAGhBS,2BAAiB;AAHD,SAAD,EAIf;AACAV,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AAND,SAJe,EAWf;AACAiQ,qBAAW,IADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAXe,EAef;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAfe,EAmBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAnBe,EAuBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGM,IAAG,KAAK5P,KAAR,EAAc;AAClB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHK,MAGD;AACH,qBAAO,IAAP;AACD;AACF;AAdD,SAvBe,EAsCf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEN,qBAAW,MARX;AASAlS,gBAAM,MATN;AAUAmS,mBAAS,QAVT;AAWAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,oBAAOA,MAAMoH,QAAN,EAAP;AACE,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,IAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;;AAEV;AACA,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,UAAP;;AAEZ;AACA,mBAAK,GAAL;AAAU,uBAAO,OAAP;;AAEV;AAAS,uBAAO,KAAP;AAnBX;AAqBD;AAjCD,SAtCe,EAwEf;AACAkI,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,eAHT;AAIAC,yBAAe;AAJf,SAxEe,EA6Ef;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,gBAHT;AAIAC,yBAAe;AAJf,SA7Ee,EAkFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAlFe,EAsFf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAoS,yBAAe,OAHf;AAIAD,mBAAS;AAJT,SAtFe,EA2Ff;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAJf,SA3Fe,EAgGf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEM,IAAGA,OAAO,IAAV,EAAe;AACnB,qBAAO,IAAP;AACD,aAFK,MAED;AACH,qBAAO,EAAP;AACD;AACF;AAbD,SAhGe,CANjB;AAqHA/G,mBAAW;AArHX,OA5OO,EAkWP;AACA;AACAoG,qBAAa,CAAC,UAAD,CAFb;AAGA9R,cAAM,oBAHN;AAIA+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB;AACA,eAAKyI,uBAAL,CAA6BzI,EAA7B;AACD,SAPD;AAQA0I,yBAAiB,CAAC;AAChBC,qBAAW,MADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS;AAHO,SAAD,EAIf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAJe,EAQf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,mBAHT;AAIAC,yBAAe;AAJf,SARe,EAaf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,oBAHT;AAIAC,yBAAe;AAJf,SAbe,EAkBf;AACAF,qBAAW,KADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAJf,SAlBe,EAuBf;AACAF,qBAAW,KADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAC,yBAAe;AAJf,SAvBe,EA4Bf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAC,yBAAe;AAJf,SA5Be,EAiCf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,SAHT;AAIAC,yBAAe,QAJf;AAKAC,4BAAkB,IALlB;AAMAC,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAIA,QAAQ,CAAZ,EAAe;AACb,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,kBAAI,KAAKD,UAAL,CAAgBF,gBAApB,EAAsC;AACpC,uBAAO,MAAMlO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAb;AACD,eAFD,MAEK;AACH,uBAAOjO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF,aAPD,MAOM,IAAGxP,QAAQ,CAAX,EAAa;AACjB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,OAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD,aAHK,MAGD;AACH,mBAAKG,UAAL,CAAgBC,WAAhB,GAA8B,EAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AAEF;AAtBD,SAjCe,EAwDf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,eAHT;AAIAC,yBAAe,SAJf;AAKAC,4BAAkB,IALlB;AAMAC,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAIA,QAAQ,CAAZ,EAAe;AACb,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,kBAAI,KAAKD,UAAL,CAAgBF,gBAApB,EAAsC;AACpC,uBAAO,MAAMlO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAb;AACD,eAFD,MAEK;AACH,uBAAOjO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF,aAPD,MAOM,IAAGxP,QAAQ,CAAX,EAAa;AACjB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,OAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD,aAHK,MAGD;AACH,mBAAKG,UAAL,CAAgBC,WAAhB,GAA8B,EAA9B;AACA,qBAAOrO,QAAQvB,KAAR,EAAeX,MAAf,CAAsB,KAAKsQ,UAAL,CAAgBH,aAAtC,CAAP;AACD;AACF;AArBD,SAxDe,EA8Ef;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,oBAHT;AAIAC,yBAAe;AAJf,SA9Ee,EAmFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,kBAHT;AAIAC,yBAAe;AAJf,SAnFe,EAwFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,mBAHT;AAIAC,yBAAe;AAJf,SAxFe,EA6Ff;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,UAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEM,IAAGA,OAAO,IAAV,EAAe;AACnB,qBAAO,IAAP;AACD,aAFK,MAED;AACH,qBAAO,EAAP;AACD;AACF;AAbD,SA7Fe,CARjB;AAoHA/G,mBAAW;AApHX,OAlWO,EAudP;AACA;AACAoG,qBAAa,CAAC,eAAD,CAFb;AAGA9R,cAAM,wBAHN;AAIA+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKoJ,cAAL,CAAoBpJ,EAApB;AACD,SAND;AAOA0I,yBAAiB,CAAC;AAChBC,qBAAW,IADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS,YAHO;AAIhBG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AANe,SAAD,EAOf;AACAiQ,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AAND,SAPe,EAcf;AACAiQ,qBAAW,IADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAde,EAkBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAlBe,EAsBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAtBe,EA0Bf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGM,IAAG,KAAK5P,KAAR,EAAc;AAClB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHK,MAGD;AACH,qBAAO,IAAP;AACD;AACF;AAdD,SA1Be,EAyCf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEN,qBAAW,MARX;AASAlS,gBAAM,MATN;AAUAmS,mBAAS,QAVT;AAWAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,oBAAOA,MAAMoH,QAAN,EAAP;AACE,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,MAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,IAAP;AACV,mBAAK,GAAL;AAAU,uBAAO,KAAP;;AAEV;AACA,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,KAAP;AACZ,mBAAK,KAAL;AAAY,uBAAO,UAAP;;AAEZ;AACA,mBAAK,GAAL;AAAU,uBAAO,OAAP;;AAEV;AAAS,uBAAO,KAAP;AAnBX;AAqBD;AAjCD,SAzCe,EA2Ef;AACAkI,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,eAHT;AAIAC,yBAAe;AAJf,SA3Ee,EAgFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,gBAHT;AAIAC,yBAAe;AAJf,SAhFe,EAqFf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SArFe,EAyFf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAoS,yBAAe,OAHf;AAIAD,mBAAS;AAJT,SAzFe,EA8Ff;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAJf,SA9Fe,EAmGf;AACAF,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEM,IAAGA,OAAO,IAAV,EAAe;AACnB,qBAAO,IAAP;AACD,aAFK,MAED;AACH,qBAAO,EAAP;AACD;AACF;AAbD,SAnGe,CAPjB;AAyHA/G,mBAAW;AAzHX,OAvdO,EAilBP;AACA;AACAoG,qBAAa,CAAC,YAAD,CAFb;AAGA9R,cAAM,qBAHN;AAIA+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKsJ,sBAAL,CAA4BtJ,EAA5B;AACD,SAND;AAOA0I,yBAAiB,CAAC;AAChBC,qBAAW,IADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS,YAHO;AAIhBG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AANe,SAAD,EAOf;AACAiQ,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,mBAAOZ,OAAOY,QAAQ,IAAf,EAAqBX,MAArB,CAA4B,UAA5B,CAAP;AACD;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBE,SAPe,EAwBhB;AACCiQ,qBAAW,MADZ;AAEClS,gBAAM,MAFP;AAGCmS,mBAAS;AAHV,SAxBgB,EA4Bf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SA5Be,EAgCf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,cAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGM,IAAG,KAAK5P,KAAR,EAAc;AAClB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHK,MAGD;AACH,qBAAO,IAAP;AACD;AACF;AAdD,SAhCe,EA+Cf;AACAN,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SA/Ce,EAmDf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAoS,yBAAe,OAHf;AAIAD,mBAAS;AAJT,SAnDe,EAwDf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,YAHT;AAIAC,yBAAe;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdE,SAxDe,CAPjB;AA+EA1G,mBAAW;AA/EX,OAjlBO,EAiqBN;AACD;AACAoG,qBAAa,CAAC,iBAAD,CAFZ;AAGD9R,cAAM,0BAHL;AAID+R,mBAAW,mBAASxI,EAAT,EAAa;AACtB,eAAKuJ,2BAAL,CAAiCvJ,EAAjC;AACD,SANA;AAOD0I,yBAAiB,CAAC;AAChBC,qBAAW,IADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS;AAHO,SAAD,EAId;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS;AAHR,SAJc,EAQd;AACDD,qBAAW,IADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS;AAHR,SARc,EAYd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS;AAHR,SAZc,EAgBd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS;AAHR,SAhBc,EAoBd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS,cAHR;AAIDG,mBAAS,iBAAS1P,KAAT,EAAgB;AACvB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGO,IAAI,KAAK5P,KAAT,EAAgB;AACrB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHM,MAGA;AACL,qBAAO,IAAP;AACD;AACF;AAdA,SApBc,EAmCd;AACH;AACA;AACA;AACA;AACEN,qBAAW,MALV;AAMDlS,gBAAM,MANL;AAODmS,mBAAS;AAPR,SAnCc,EA2Cd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS,eAHR;AAIDC,yBAAe;AAJd,SA3Cc,EAgDd;AACDF,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS,gBAHR;AAIDC,yBAAe;AAJd,SAhDc,EAqDd;AACDF,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS;AAHR,SArDc,EAyDd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDoS,yBAAe,OAHd;AAIDD,mBAAS;AAJR,SAzDc,EA8Dd;AACDD,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS,aAHR;AAIDC,yBAAe;AAJd,SA9Dc,EAmEd;AACDF,qBAAW,MADV;AAEDlS,gBAAM,MAFL;AAGDmS,mBAAS,oBAHR;AAIDG,mBAAS,iBAAS1P,KAAT,EAAgB;AACvB,gBAAI6P,MAAM7P,MAAM2M,KAAN,CAAY,UAAZ,EAAwB,CAAxB,EAA2BmD,WAA3B,EAAV;AACA,gBAAID,OAAO,IAAX,EAAiB;AACf,qBAAO,IAAP;AACD,aAFD,MAEO,IAAIA,OAAO,IAAX,EAAiB;AACtB,qBAAO,IAAP;AACD,aAFM,MAEA;AACL,qBAAO,EAAP;AACD;AACF;AAbA,SAnEc,CAPhB;AAyFD/G,mBAAW;AAzFV,OAjqBM,EA2vBN;AACD;AACAoG,qBAAa,CAAC,cAAD,CAFZ;AAGD9R,cAAM,uBAHL;AAID+R,mBAAW,mBAASxI,EAAT,EAAY;AACrB,eAAKwJ,wBAAL,CAA8BxJ,EAA9B;AACD,SANA;AAOD0I,yBAAiB,CAAC;AAChBC,qBAAW,IADK;AAEhBlS,gBAAM,MAFU;AAGhBmS,mBAAS;AAHO,SAAD,EAIf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SAJe,EAQf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACED,qBAAW,MATX;AAUAlS,gBAAM,MAVN;AAWAmS,mBAAS;AAXT,SARe,EAoBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS;AAHT,SApBe,EAwBf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,WAHT;AAIAG,mBAAS,iBAAS1P,KAAT,EAAe;AACtB,gBAAI,KAAKA,KAAT,EAAgB;AACd,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,KAA9B;AACA,qBAAO,IAAP;AACD,aAHD,MAGM,IAAG,KAAK5P,KAAR,EAAc;AAClB,mBAAK2P,UAAL,CAAgBC,WAAhB,GAA8B,MAA9B;AACA,qBAAO,IAAP;AACD,aAHK,MAGD;AACH,qBAAO,IAAP;AACD;AACF;AAdD,SAxBe,EAuCf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;AACF;AACA;AACA;AACA;AACE;AACF;AACEN,qBAAW,MAtBX;AAuBAlS,gBAAM,MAvBN;AAwBAmS,mBAAS;AAxBT,SAvCe,EAgEf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAoS,yBAAe,OAHf;AAIAD,mBAAS;AAJT,SAhEe,EAqEf;AACAD,qBAAW,MADX;AAEAlS,gBAAM,MAFN;AAGAmS,mBAAS,aAHT;AAIAC,yBAAe;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZE,SArEe,CAPhB;AA0FD1G,mBAAW;;AA1FV,OA3vBM;AAfL,KAFkB;AA02BxBxG,WAAO;AACLvD,eAAS,mBAAU;AACjB,YAAIuC,QAAQ,IAAZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAK8O,cAAL,CAAoB,KAAKvB,YAAL,CAAkB,KAAKE,iBAAvB,EAA0CpI,EAA9D;AACD,OAXI;AAYLuB,iBAAW,qBAAU;AACnB,YAAI,KAAKnJ,OAAL,IAAgB,iBAApB,EAAuC;AACrC,eAAKmR,2BAAL;AACD,SAFD,MAEO,IAAG,KAAKnR,OAAL,IAAgB,cAAnB,EAAkC;AACvC,eAAKoR,wBAAL,CAA8B,KAAKtB,YAAL,CAAkB,KAAKE,iBAAvB,EAA0CpI,EAAxE;AACD;AACF,OAlBI;AAmBLwB,eAAS,mBAAU;AACjB,YAAI,KAAKpJ,OAAL,IAAgB,iBAApB,EAAuC;AACrC,eAAKmR,2BAAL;AACD,SAFD,MAEM,IAAG,KAAKnR,OAAL,IAAgB,cAAnB,EAAkC;AACtC,eAAKoR,wBAAL,CAA8B,KAAKtB,YAAL,CAAkB,KAAKE,iBAAvB,EAA0CpI,EAAxE;AACD;AACF,OAzBI;AA0BLsI,mBAAa,uBAAY;AACvB,aAAKoB,aAAL,CAAmB,KAAKrB,YAAxB,EAAqC,KAAKC,WAA1C;AACD,OA5BI;AA6BLD,oBAAc,wBAAY;AACxB,aAAKqB,aAAL,CAAmB,KAAKrB,YAAxB,EAAqC,KAAKC,WAA1C;AACD;;AA/BI,KA12BiB;AA44BxBhR,cAAU;AACRmN,wBAAiB,4BAAU;;AAEzB,YAAIkF,UAAU,KAAKzB,YAAL,CAAkB,KAAKE,iBAAvB,CAAd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAOvS,EAAEgI,MAAF,CAAS,EAAT,EAAa8L,OAAb,EAAsB,KAAKxB,WAA3B,CAAP;AACD,OA7BO;AA8BRjG,qBAAe,yBAAU;AACvB,YAAIvH,QAAQ,IAAZ;AACA,YAAIiP,SAAS,EAAb;AACA,aAAKpQ,OAAL,CAAa8B,OAAb,CAAqB,UAASC,CAAT,EAAW;AAC9B,cAAIA,EAAEgN,WAAF,CAAcjI,IAAd,CAAmB,UAASuE,EAAT,EAAY;AACjC,mBAAOA,MAAMlK,MAAMvC,OAAnB;AACD,WAFG,CAAJ,EAEI;AACFwR,mBAAOpH,IAAP,CAAYjH,CAAZ;AACD;AACF,SAND;AAOA,eAAOqO,MAAP;AACD;AAzCO,KA54Bc;AAu7BxBrS,aAAS;AACP;AACAmS,qBAAe,uBAASrB,YAAT,EAAsBwB,UAAtB,EAAiC;AAC9C,YAAIlP,QAAQ,IAAZ;AACA,YAAIgJ,OAAO0E,aAAa/E,KAAb,CAAmB,GAAnB,EAAwBI,IAAxB,CAA6B,EAA7B,CAAX;AACA7N,UAAEmD,YAAF,CAAe,MAAf;AACAnD,UAAEQ,IAAF,CAAO;AACLC,eAAK,oCAAmCgJ,WAAWqE,IAAX,CAAnC,GAAoD,YAApD,GAAiEkG,UADjE;AAELpT,gBAAM,KAFD;AAGLC,mBAAS,wBAAqB;AAAA,gBAAnBC,IAAmB,SAAnBA,IAAmB;AAAA,gBAAdC,GAAc,SAAdA,GAAc;AAAA,gBAAVC,IAAU,SAAVA,IAAU;;AAC5B,gBAAI,KAAKF,IAAT,EAAe;AACbgE,oBAAMuI,WAAN,GAAoBrM,IAApB;AACD,aAFD,MAEO;AACLhB,gBAAE+B,QAAF,CAAWhB,GAAX;AACD;AACDf,cAAEoD,YAAF;AACD,WAVI;AAWLnC,iBAAO,iBAAM;AACXjB,cAAE+B,QAAF,CAAW,MAAX;AACA/B,cAAEoD,YAAF;AACD;AAdI,SAAP;AAgBD,OAtBM;AAuBPlB,iBAAW,qBAAY;AAAE;AACvB,aAAK2R,aAAL,CAAmB,KAAKrB,YAAxB,EAAsC,KAAKC,WAA3C;AACD,OAzBM;AA0BPwB,2BAAqB,6BAASzR,UAAT,EAAoB;AACvC,YAAIsC,QAAQ,IAAZ;AACA,aAAKuN,YAAL,CAAkB5M,OAAlB,CAA0B,UAASC,CAAT,EAAYoK,KAAZ,EAAkB;AAC1C,cAAIpK,EAAEyE,EAAF,IAAQ3H,UAAZ,EAAwB;AACtBsC,kBAAMyN,iBAAN,GAA0BzC,KAA1B;AACAhL,kBAAM8O,cAAN,CAAqB9O,MAAMuN,YAAN,CAAmBvN,MAAMyN,iBAAzB,EAA4CpI,EAAjE;AACArF,kBAAMvC,OAAN,GAAgB,SAAhB;AACD;AACF,SAND;AAOD,OAnCM;AAoCPuG,eAAS,mBAAU;AACjB;AACA,aAAKoL,cAAL;AACD,OAvCM;AAwCPA,sBAAgB,0BAAU;AACxB,YAAIpP,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,8BAD9B;AAELK,gBAAM,EAFD;AAKLH,mBAAS,wBAA2B;AAAA,gBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,gBAAXE,IAAW,SAAXA,IAAW;AAAA,gBAALD,GAAK,SAALA,GAAK;;AAClC,gBAAI,KAAKD,IAAT,EAAe;AACbgE,oBAAMuN,YAAN,GAAqBrR,KAAKmT,MAAL,CAAY,UAASzO,CAAT,EAAW;AAC1C,uBAAOA,EAAE0O,UAAF,IAAgB,IAAvB;AACD,eAFoB,CAArB;AAGA,kBAAItP,MAAMuN,YAAN,CAAmBlH,MAAnB,IAA6B,CAAjC,EAAoC;AAClC;AACD;AACD,kBAAIrG,MAAMuN,YAAN,CAAmBlH,MAAnB,GAA4BrG,MAAMyN,iBAAtC,EAAyD;AACvD;AACD,eAFD,MAEK;AACHzN,sBAAMyN,iBAAN,GAA0B,CAA1B;AACD;AACDzN,oBAAMuP,WAAN;;AAEAvP,oBAAM8O,cAAN,CAAqB9O,MAAMuN,YAAN,CAAmBvN,MAAMyN,iBAAzB,EAA4CpI,EAAjE;AACD;AACF,WAtBI;AAuBLlJ,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAzBI,SAAP;AA2BD,OArEM;AAsEPkT,iBAtEO,yBAsEM;AACb;AACE,YAAIC,kBAAkB,KAAKjC,YAAL,CAAkBkC,GAAlB,CAAsB,UAAST,OAAT,EAAkB;AAC5D,iBAAOA,QAAQ3J,EAAf;AACD,SAFqB,CAAtB;AAGA,YAAI9B,OAAO,IAAX;AACAmM,kBAAUC,YAAV,CAAuBH,eAAvB,EAAwC,YAAU;AAChDjM,eAAKgK,YAAL,CAAkB5M,OAAlB,CAA0B,UAACqO,OAAD,EAAW;AACnC,gBAAIvG,MAAMiH,UAAUE,eAAV,CAA0B;AAClCvC,4BAAcwC,QADoB;AAElCC,yBAAWD,QAFuB;AAGlCnS,0BAAYsR,QAAQ3J;AAHc,aAA1B,CAAV;AAKA,gBAAI0K,WAAW,EAAf;AACAtH,gBAAI9H,OAAJ,CAAY,UAASC,CAAT,EAAW;AACnBmP,uBAASlI,IAAT,CAAc;AACViI,2BAAWE,OAAOpP,EAAEkP,SAAT,CADD;AAEVG,0BAAUrP,EAAEqP,QAAF,GAAa;AAFb,eAAd;AAIH,aALD;AAMA;AACA,gBAAIC,UAAWH,SAASI,IAAT,CAAc,UAASC,CAAT,EAAYC,CAAZ,EAAc;AAAE;AACzC,qBAAOD,EAAEN,SAAF,GAAcO,EAAEP,SAAvB,CADuC,CACN;AACpC,aAFc,CAAf;AAGA,gBAAIrH,GAAJ,CAjBmC,CAiB3B;AACRyH,oBAAQvP,OAAR,CAAgB,UAASC,CAAT,EAAW;AACzB,kBAAG2C,KAAKiK,WAAL,CAAiBsC,SAAjB,GAA2BlP,EAAEkP,SAAhC,EAA0C;AACxCrH,sBAAM7H,CAAN;AACD;AACF,aAJD;AAKA;AACA,gBAAG6H,OAAOA,IAAIwH,QAAJ,IAAgB,CAA1B,EAA6B;AAC3BjB,sBAAQsB,wBAAR,GAAmC7H,IAAIqH,SAAvC;AACD;AACD;AACAd,oBAAQuB,iBAAR,GAA4BR,SAASV,MAAT,CAAgB,UAASzO,CAAT,EAAW;AACnD,qBAAOA,EAAEqP,QAAF,IAAc,CAArB,CADmD,CAC3B;AAC3B,aAF2B,EAEzB,CAFyB,CAA5B;AAGA,gBAAGjB,QAAQuB,iBAAX,EAA6B;AAC3BvB,sBAAQwB,2BAAR,GAAsCxB,QAAQuB,iBAAR,CAA0BT,SAAhE;AACD;AACF,WAlCD;AAmCD,SApCD;AAqCD,OAjHM;;AAkHPhB,sBAAgB,wBAASzJ,EAAT,EAAY;AAC1B,YAAIrF,QAAQ,IAAZ;AACA9E,UAAEmD,YAAF,CAAe,MAAf;AACAnD,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,8BAD5B;AAELK,gBAAM;AACJwB,wBAAY2H;AADR,WAFD;AAKLtJ,mBAAS,wBAA2B;AAAA,gBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,gBAAXE,IAAW,SAAXA,IAAW;AAAA,gBAALD,GAAK,SAALA,GAAK;;AAClC+D,kBAAMwN,WAAN,GAAoBtR,IAApB;AACA;AACA8D,kBAAMuH,aAAN,CAAoB5G,OAApB,CAA4B,UAASC,CAAT,EAAW;AACrCA,gBAAEiN,SAAF,CAAY9H,IAAZ,CAAiB/F,KAAjB,EAAwBqF,EAAxB;AACAnK,gBAAEoD,YAAF;AACD,aAHD;;AAKA,gBAAI0B,MAAMuH,aAAN,CAAoBlB,MAApB,IAA8B,CAAlC,EAAqC;AACnCnL,gBAAEoD,YAAF;AACD;AACF,WAhBI;AAiBLnC,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAnBI,SAAP;AAqBD,OA1IM;AA2IPyR,+BAAyB,iCAASzI,EAAT,EAAY;AACnC,YAAIrF,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,4BAD5B;AAELK,gBAAM;AACJwB,wBAAY2H;AADR,WAFD;AAKLtJ,mBAAS,yBAA2B;AAAA,gBAAjBC,IAAiB,UAAjBA,IAAiB;AAAA,gBAAXC,GAAW,UAAXA,GAAW;AAAA,gBAANC,IAAM,UAANA,IAAM;;AAClC,gBAAI,KAAKF,IAAT,EAAe;AACbE,mBAAKyE,OAAL,CAAa,UAASC,CAAT,EAAW;AACtBA,kBAAE6P,iBAAF,GAAsB7P,EAAEe,YAAF,GAAiBf,EAAE8P,cAAzC;AACD,eAFD;;AAIA;AACA,kBAAIC,kBAAkB,CAAtB;AACAzU,mBAAKyE,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB+P,mCAAmB/P,EAAEgQ,aAArB;AACD,eAFD;AAGA5Q,oBAAM8K,kBAAN,GAA2B6F,eAA3B;AACA3Q,oBAAM0K,qBAAN,GAA8B1K,MAAM8J,gBAAN,CAAuBzE,EAArD;;AAEA;AACArF,oBAAMU,iBAAN,GAA0BxE,IAA1B;;AAEA,kBAAI2U,UAAU3U,KAAKmT,MAAL,CAAY,UAASzO,CAAT,EAAW;AACnC,uBAAOA,EAAE6P,iBAAF,IAAuB,CAA9B;AACD,eAFa,CAAd;AAGAzQ,oBAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,oBAAIA,EAAE9E,IAAF,IAAU,cAAd,EAA8B;AAC5B8E,oBAAE4G,SAAF,GAAcqJ,OAAd;AACD;AACD,oBAAIjQ,EAAE9E,IAAF,IAAU,oBAAd,EAAoC;AAClC8E,oBAAE4G,SAAF,GAAcqJ,OAAd;AACD;AACF,eAPD;AAUD;AACF,WApCI;AAqCL1U,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAvCI,SAAP;AAyCD,OAtLM;AAuLPoS,sBAAgB,wBAASpJ,EAAT,EAAY;AAC1B,YAAIrF,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,6BAD5B;AAELK,gBAAM;AACJ4U,6BAAiB,SADb;AAEJpT,wBAAY2H,EAFR;AAGJvJ,kBAAM;AAHF,WAFD;AAOLC,mBAAS,yBAA2B;AAAA,gBAAjBC,IAAiB,UAAjBA,IAAiB;AAAA,gBAAXC,GAAW,UAAXA,GAAW;AAAA,gBAANC,IAAM,UAANA,IAAM;;AAClC,gBAAI,KAAKF,IAAT,EAAe;AACb;AACA,kBAAI+U,eAAe,EAAnB;AACA7U,mBAAK8U,IAAL,CAAUrQ,OAAV,CAAkB,UAASC,CAAT,EAAW;AAC3B,oBAAI,CAACmQ,aAAapL,IAAb,CAAkB,UAASuE,EAAT,EAAY;AACjC,yBAAOA,MAAMtJ,EAAEgH,KAAF,CAAQ5L,IAArB;AACD,iBAFI,CAAL,EAEI;AACF+U,+BAAalJ,IAAb,CAAkBjH,EAAEgH,KAAF,CAAQ5L,IAA1B;AACD;AACF,eAND;;AAQAd,gBAAEQ,IAAF,CAAO;AACLC,qBAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,yBAD5B;AAELK,sBAAM;AACJ8B,4BAAU+S,aAAahI,IAAb,CAAkB,GAAlB;AADN,iBAFD;AAKLhN,yBAAS,iBAASwG,GAAT,EAAa;AACpB,sBAAI,KAAKA,IAAIvG,IAAb,EAAmB;AACjBE,yBAAK8U,IAAL,CAAUrQ,OAAV,CAAkB,UAASC,CAAT,EAAW;AAC3B2B,0BAAIrG,IAAJ,CAASyE,OAAT,CAAiB,UAASuJ,EAAT,EAAY;AAC3B,4BAAIA,GAAGlM,QAAH,IAAe4C,EAAEgH,KAAF,CAAQ5L,IAA3B,EAAiC;AAC/B4E,4BAAE1B,UAAF,GAAegL,EAAf;AACD;AACF,uBAJD;AAKAtJ,wBAAE6G,OAAF,GAAY,KAAZ;AACD,qBAPD;;AASAzH,0BAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,0BAAIA,EAAE9E,IAAF,IAAU,aAAd,EAA6B;AAC3B8E,0BAAE4G,SAAF,GAActL,KAAK8U,IAAnB;AACD;AACD,0BAAIpQ,EAAE9E,IAAF,IAAU,sBAAd,EAAsC;AACpC,4BAAImV,cAAc/U,KAAK8U,IAAL,CAAU3B,MAAV,CAAiB,UAASnF,EAAT,EAAY;AAC7C;AACA;AACA;AACA;AACA;AACA,iCAAO,CAACA,GAAGF,MAAH,IAAa,CAAb,IAAkBE,GAAGF,MAAH,IAAa,CAA/B,IAAoCE,GAAGF,MAAH,IAAa,CAAjD,IAAsDE,GAAGF,MAAH,IAAa,CAApE,KAA2EE,GAAGgH,aAAH,IAAoB,CAAtG;AACD,yBAPiB,CAAlB;AAQAD,oCAAYtQ,OAAZ,CAAoB,UAASuJ,EAAT,EAAY;AAC9B,8BAAIA,GAAGF,MAAH,IAAa,CAAjB,EAAoB;AAClBE,+BAAGE,QAAH,GAAc,IAAd;AACD,2BAFD,MAEK;AACHF,+BAAGE,QAAH,GAAc,KAAd;AACD;AACF,yBAND;AAOAxJ,0BAAE4G,SAAF,GAAcyJ,WAAd;AACD;AACD,0BAAIrQ,EAAE9E,IAAF,IAAU,wBAAd,EAAwC;AACtC8E,0BAAE4G,SAAF,GAActL,KAAK8U,IAAnB;AACD;AACF,qBAzBD;AA0BD;AACF,iBA3CI;AA4CL7U,uBAAO,iBAAU;AACfC,0BAAQC,GAAR,CAAY,OAAZ;AACD;AA9CI,eAAP;AAgDD;AACF,WApEI;AAqELF,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAvEI,SAAP;AAyED,OAlQM;AAmQPsS,8BAAwB,gCAAStJ,EAAT,EAAY;AAClC,YAAIrF,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,0BAD9B;AAELK,gBAAM;AACJ4U,6BAAiB,SADb;AAEJpT,wBAAY2H;AAFR,WAFD;AAMLtJ,mBAAS,yBAA2B;AAAA,gBAAjBC,IAAiB,UAAjBA,IAAiB;AAAA,gBAAXC,GAAW,UAAXA,GAAW;AAAA,gBAANC,IAAM,UAANA,IAAM;;AAClC,gBAAI,KAAKF,IAAL,IAAa,UAAUA,IAA3B,EAAiC;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAI+U,eAAe,EAAnB;AACA7U,mBAAK8U,IAAL,CAAUrQ,OAAV,CAAkB,UAASC,CAAT,EAAW;AAC3B,oBAAI,CAACmQ,aAAapL,IAAb,CAAkB,UAASuE,EAAT,EAAY;AACjC,yBAAOA,MAAMtJ,EAAEgH,KAAF,CAAQ5L,IAArB;AACD,iBAFI,CAAL,EAEI;AACF+U,+BAAalJ,IAAb,CAAkBjH,EAAEgH,KAAF,CAAQ5L,IAA1B;AACD;AACF,eAND;;AAQAd,gBAAEQ,IAAF,CAAO;AACLC,qBAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA4B,yBAD5B;AAELK,sBAAM;AACJ8B,4BAAU+S,aAAahI,IAAb,CAAkB,GAAlB;AADN,iBAFD;AAKLhN,yBAAS,iBAASwG,GAAT,EAAa;AACpB,sBAAI,KAAKA,IAAIvG,IAAb,EAAmB;AACjBE,yBAAK8U,IAAL,CAAUrQ,OAAV,CAAkB,UAASC,CAAT,EAAW;AAC3B2B,0BAAIrG,IAAJ,CAASyE,OAAT,CAAiB,UAASuJ,EAAT,EAAY;AAC3B,4BAAIA,GAAGlM,QAAH,IAAe4C,EAAEgH,KAAF,CAAQ5L,IAA3B,EAAiC;AAC/B4E,4BAAE1B,UAAF,GAAegL,EAAf;AACD;AACF,uBAJD;AAKAtJ,wBAAE6G,OAAF,GAAY,KAAZ;AACD,qBAPD;;AASAzH,0BAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,0BAAIA,EAAE9E,IAAF,IAAU,qBAAd,EAAqC;AACnC8E,0BAAE4G,SAAF,GAActL,KAAK8U,IAAnB;AACD;AACF,qBAJD;AAKD;AACF,iBAtBI;AAuBL7U,uBAAO,iBAAU;AACfC,0BAAQC,GAAR,CAAY,OAAZ;AACD;AAzBI,eAAP;AA2BD,aA5CD,MA4CK;AACHnB,gBAAE+B,QAAF,CAAWhB,GAAX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACF,WA7DI;AA8DLE,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AAhEI,SAAP;AAkED,OAvUM;AAwUPuS,mCAA6B,uCAAU;AACrC,YAAI5O,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,iCAD9B;AAELC,gBAAM,KAFD;AAGLI,gBAAM;AACJiV,kBAAM,CADF;AAEJC,mBAAO,GAFH;AAGJvT,mBAAO,KAAK+I,SAHR;AAIJzI,iBAAK,KAAK0I,OAJN;AAKJnJ,wBAAY,KAAKoM,gBAAL,CAAsBzE;AAL9B,WAHD;AAULtJ,mBAAS,iBAASwG,GAAT,EAAa;AACpB,gBAAI,KAAKA,IAAIvG,IAAb,EAAmB;AACjBgE,oBAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,oBAAIA,EAAE9E,IAAF,IAAU,0BAAd,EAA0C;AACxC8E,oBAAE4G,SAAF,GAAcjF,IAAIrG,IAAJ,CAASA,IAAvB;AACD;AACF,eAJD;AAKD,aAND,MAMK;AACH,kBAAI,UAAUqG,IAAIvG,IAAlB,EAAwB;AACtBgE,sBAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,sBAAIA,EAAE9E,IAAF,IAAU,0BAAd,EAA0C;AACxC8E,sBAAE4G,SAAF,GAAc,EAAd;AACD;AACF,iBAJD;AAKD,eAND,MAMK;AACHtM,kBAAE+B,QAAF,CAAWsF,IAAItG,GAAf;AACD;AACF;AACF,WA5BI;AA6BLE,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AA/BI,SAAP;AAiCD,OA3WM;AA4WPwS,gCAA0B,kCAASxJ,EAAT,EAAY;AACpC,YAAIrF,QAAQ,IAAZ;AACA9E,UAAEQ,IAAF,CAAO;AACLC,eAAK,CAACC,OAAOC,cAAP,IAAuB,EAAxB,IAA8B,8BAD9B;AAELC,gBAAM,KAFD;AAGLI,gBAAM;AACJiV,kBAAM,CADF;AAEJC,mBAAO,GAFH;AAGJvT,mBAAO,KAAK+I,SAHR;AAIJzI,iBAAK,KAAK0I,OAJN;AAKJnJ,wBAAY2H;AALR,WAHD;AAULtJ,mBAAS,iBAASwG,GAAT,EAAa;AACpB,gBAAI,KAAKA,IAAIvG,IAAb,EAAmB;AACjBgE,oBAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,oBAAIA,EAAE9E,IAAF,IAAU,uBAAd,EAAuC;AACrC8E,oBAAE4G,SAAF,GAAcjF,IAAIrG,IAAJ,CAASA,IAAvB;AACD;AACF,eAJD;AAKD,aAND,MAMK;AACH,kBAAI,UAAUqG,IAAIvG,IAAlB,EAAwB;AACtBgE,sBAAMnB,OAAN,CAAc8B,OAAd,CAAsB,UAASC,CAAT,EAAW;AAC/B,sBAAIA,EAAE9E,IAAF,IAAU,uBAAd,EAAuC;AACrC8E,sBAAE4G,SAAF,GAAc,EAAd;AACD;AACF,iBAJD;AAKD,eAND,MAMK;AACFtM,kBAAE+B,QAAF,CAAWsF,IAAItG,GAAf;AACF;AACF;AACF,WA5BI;AA6BLE,iBAAO,iBAAU;AACfC,oBAAQC,GAAR,CAAY,OAAZ;AACD;AA/BI,SAAP;AAiCD,OA/YM;AAgZP0O,cAhZO,oBAgZEC,KAhZF,EAgZQvI,GAhZR,EAgZY;AACjB;AACA,YAAImF,QAAMnF,IAAIzE,QAAd;AACA,YAAIsH,OAAK7C,IAAI1D,UAAb;AACA,YAAG,CAAC6I,KAAJ,EAAU;AACRA,kBAAQnF,IAAIvD,UAAJ,CAAelB,QAAvB;AACD;AACD,YAAG,CAACsH,IAAJ,EAAS;AACPA,iBAAO7C,IAAIvD,UAAJ,CAAeH,UAAtB;AACD;AACD,aAAKyH,KAAL,CAAW6K,aAAX,CAAyBjM,cAAzB,CAAwCwC,KAAxC,EAA8CtC,IAA9C;AAED;AA5ZM;AAv7Be,GAAR,CAAlB;;AAu1CAgI,cAAY8B,cAAZ;AACD,CAhvGD","file":"client.expert.js","sourcesContent":["/**\n * author: liuzeyafzy\n * 专户版交易端\n */\n$(function(){\n  function doClose(num){\n    $('.custom-confirm-form__btn--close').html('关闭('+ num +'秒)')\n\n    if (0 == num) {\n      $('.custom-confirm__content').empty();\n      $('.custom-confirm').addClass('hide');\n    }\n  }\n\n  let refresh_timer = setInterval(function () {\n    $.ajax({\n      url: (window.REQUEST_PREFIX||'') + '/test-cosnis/active',\n      type: 'get',\n      success: function({code, msg, data}){\n        //\n      },\n      error: function(){\n        console.log('error');\n      }\n    })\n  }, 1000 * 10);\n\n  // 顶部菜单\n  Vue.component('client-header', {\n    props: ['product_list', 'cur_product_id', 'cur_nav', 'begin_date', 'end_date', 'query_stock'],\n    template: `\n      <header class=\"client-header\">\n        <h1 class=\"client-header__title\">`+ APP_NAME +`资产管理平台</h1>\n        <select v-if=\"product_list.length > 1\" :value=\"cur_product_id\" v-on:change=\"changeProduct($event)\" class=\"client-header__sub-title--multiple\">\n          <option v-for=\"product in product_list\" :value=\"product.id\">账户：{{product.name}}</option>\n        </select>\n        <span v-if=\"product_list.length == 1\" class=\"client-header__sub-title--single\">账户：{{product_list[0].name}}</span>\n        <div class=\"client-header__controller--main\">\n          <a class=\"client-header__btn--login\" v-on:click=\"doNewWindow()\"><i></i>登录</a>\n          <a class=\"client-header__btn--logout\" v-on:click=\"doLogout()\"><i></i>退出</a>\n          <a class=\"client-header__btn--refresh\" v-on:click=\"doRefresh()\"><i></i>刷新</a>\n        </div>\n        <div v-if=\"'account' == cur_nav || 'position' == cur_nav || 'entrust_today' == cur_nav || 'deal_today' == cur_nav || 'entrust_history' == cur_nav || 'deal_history' == cur_nav\" class=\"client-header__controller--export\">\n          <a v-on:click=\"doExport()\" class=\"client-header__btn--export\"><i></i>导出</a>\n        </div>\n      </header>\n    `,\n    data: function(){\n      return {\n      }\n    },\n    computed: {\n    },\n    methods: {\n      doNewWindow: function(){\n        if (window.require && window.require('electron') && window.require('electron').remote && window.require('electron').remote.require('./main.js')\n            // 下面的判断条件再client上会出现“Uncaught illegal access”，未找到解决版本，目前的判断起始也已经足够了\n            //  && window.require('electron').remote.require('./main.js').createNewWindow instanceof Function\n         ) {\n          window.require('electron').remote.require('./main.js').createNewWindow();\n        }else{\n          $.omsAlert('请使用最新版本的客户端软件！')\n        }\n      },\n      doLogout: function(){\n        LogOut();\n      },\n      doRefresh: function(){\n        this.$emit('refresh');\n      },\n      doExport: function(){\n        // location.href = 'http://192.168.0.20:26080/omsv2/oms/pb/get_deal_list_file?start_date=2017-03-29&stop_date=2017-03-29&product_id=100232'\n        let location_url = '';\n        let location_data = {};\n        if ('account' == this.cur_nav) {\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/today_position';\n          location_data.product_id = this.cur_product_id;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/today_position?product_id=' + this.cur_product_id;\n        }else if('position' == this.cur_nav){\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/today_position';\n          location_data.product_id = this.cur_product_id;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/today_position?product_id=' + this.cur_product_id;\n        }else if('entrust_today' == this.cur_nav){\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/entrust';\n          location_data.export_format = 'expert';\n          location_data.product_id = this.cur_product_id;\n          location_data.start = moment().format('YYYY-MM-DD');\n          location_data.stock_id = this.query_stock;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/entrust?export_format=expert&product_id=' + this.cur_product_id + '&start=' + moment().format('YYYY-MM-DD') + '&stock_id=' + this.query_stock;\n        }else if('deal_today' == this.cur_nav){\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/deal';\n          location_data.export_format = 'expert';\n          location_data.product_id = this.cur_product_id;\n          location_data.start = moment().format('YYYY-MM-DD');\n          location_data.stock_id = this.query_stock;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/deal?export_format=expert&product_id=' + this.cur_product_id + '&start=' + moment().format('YYYY-MM-DD') + '&stock_id=' + this.query_stock;\n        }else if('entrust_history' == this.cur_nav){\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/entrust';\n          location_data.export_format = 'expert';\n          location_data.product_id = this.cur_product_id;\n          location_data.start = this.begin_date;\n          location_data.end = this.end_date;\n          location_data.stock_id = this.query_stock;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/entrust?export_format=expert&product_id=' + this.cur_product_id + '&start=' + this.begin_date + '&end=' + this.end_date + '&stock_id=' + this.query_stock;\n        }else if('deal_history' == this.cur_nav){\n          location_url = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/deal';\n          location_data.export_format = 'expert';\n          location_data.product_id = this.cur_product_id;\n          location_data.start = this.begin_date;\n          location_data.end = this.end_date;\n          location_data.stock_id = this.query_stock;\n          // location.href = (window.REQUEST_PREFIX||'') + '/oms/report/download_report/deal?export_format=expert&product_id=' + this.cur_product_id + '&start=' + this.begin_date + '&end=' + this.end_date + '&stock_id=' + this.query_stock;\n        }\n\n        $.startLoading();\n        $.ajax({\n          url: location_url,\n          type: 'GET',\n          data: location_data,\n          success: () => {\n            $.clearLoading();\n            $.omsAlert('正为您生成报表，成功后可进入文件中心下载');\n          },\n          error: () => {\n            $.omsAlert('网络异常，请重试');\n          }\n        })\n      },\n      changeProduct: function(event){\n        this.$emit('select_product', event.target.value)\n      }\n    }\n  });\n\n  // 左侧菜单\n  Vue.component('client-nav', {\n    props: ['cur_nav'],\n    template: `\n      <nav class=\"client-nav\">\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('account')\" :class=\"cur_nav == 'account' ? 'active' : ''\" class=\"client-nav__main-nav--account\"><i></i>账户</a>\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('buy')\" :class=\"cur_nav == 'buy' ? 'active' : ''\" class=\"client-nav__main-nav--buy\"><i></i>买入</a>\n\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('sell')\" :class=\"cur_nav == 'sell' ? 'active' : ''\" class=\"client-nav__main-nav--sell\"><i></i>卖出</a>\n\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('revert')\" :class=\"cur_nav == 'revert' ? 'active' : ''\" class=\"client-nav__main-nav--revert\"><i></i>撤单</a>\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a :class=\"(cur_nav == 'query' || cur_nav == 'position' || cur_nav == 'entrust_today' || cur_nav == 'deal_today' || cur_nav == 'entrust_history' || cur_nav == 'deal_history') ? 'active' : ''\" class=\"client-nav__main-nav--query\"><i></i>查询\n          </a>\n          <div class=\"client-subNav\" :class=\"(cur_nav == 'position' || cur_nav == 'entrust_today' || cur_nav == 'deal_today' || cur_nav == 'entrust_history' || cur_nav == 'deal_history') ? 'active' : ''\">\n            <a v-on:click=\"selectOne('position')\" :class=\"cur_nav == 'position' ? 'active' : ''\" class=\"client-subNav__item\">资金股份</a>\n            <a v-on:click=\"selectOne('entrust_today')\" :class=\"cur_nav == 'entrust_today' ? 'active' : ''\" class=\"client-subNav__item\">当日委托</a>\n            <a v-on:click=\"selectOne('deal_today')\" :class=\"cur_nav == 'deal_today' ? 'active' : ''\" class=\"client-subNav__item\">当日成交</a>\n            <a v-on:click=\"selectOne('entrust_history')\" :class=\"cur_nav == 'entrust_history' ? 'active' : ''\" class=\"client-subNav__item\">历史委托</a>\n            <a v-on:click=\"selectOne('deal_history')\" :class=\"cur_nav == 'deal_history' ? 'active' : ''\" class=\"client-subNav__item\">历史成交</a>\n          </div>\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('file_center')\" :class=\"cur_nav == 'changePassword' ? 'active' : ''\" class=\"client-nav__main-nav--fileCenter\"><i></i>文件中心</a>\n        </div>\n        <div class=\"client-nav__main-nav\">\n          <a v-on:click=\"selectOne('changePassword')\" :class=\"cur_nav == 'changePassword' ? 'active' : ''\" class=\"client-nav__main-nav--changePassword\"><i></i>修改密码</a>\n        </div>\n      </nav>\n    `,\n    methods: {\n      selectOne: function(v){\n        if (this.cur_nav !== v) {\n          this.$emit('input', v);\n        }\n      }\n    }\n  });\n\n  // 交易模块\n  Vue.component('client-trader', {\n    props: ['cur_nav', 'enable_cash', 'cur_product_id', 'need_show_arr', 'position_realtime'],\n    template: `\n      <section v-show=\"showTrader(cur_nav)\" class=\"client-body__trader client-trader\" style=\"border: 1px solid #ccc\" @keyup=\"listenKeyboard\">\n        <div class=\"client-trader__form\">\n          <form>\n            <div>\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">股票代码</label>\n              <div class=\"client-trader__form--rightContent client-stockInput\">\n                <input ref=0 v-on:focus=\"focusFlag = true;clearErrorTip();keyup_index=0\" v-on:blur=\"focusFlag = false\" class=\"client-stockInput__input\" v-model=\"stock_input\" v-on:input=\"getStockList()\" />\n                <span class=\"client-stockInput__unit\">{{stock_name}}</span>\n                <ul v-if=\"focusFlag\" class=\"client-suggest\">\n                  <li class=\"client-suggest__list\" v-for=\"stock in stockList\" v-on:mousedown=\"selectOneStock(stock.stock_id, stock.stock_name)\"> {{stock.stock_id + '&nbsp' + stock.stock_name}} </li>\n                </ul>\n              </div>\n            </div>\n            <div>\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">报价方式</label>\n              <button  :class=\"['client-trader__form--btn',type_deal2?'active':'']\" @click.prevent.stop=\"mothod_deal(1)\">限价 <i class=\"oms-icon\"></i></button>\n              <button  :class=\"['client-trader__form--btn',type_deal1?'active':'']\" @click.prevent.stop=\"mothod_deal(2)\">市价 <i class=\"oms-icon\"></i></button>\n            </div>\n            <div>\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\" v-text=\"cur_nav == 'sell' ? '卖出价格' : '买入价格'\"></label>\n              <div class=\"client-trader__form--rightContent client-numberInput\">\n                <div class=\"client-numberInput__input\">\n\n                  <input v-if=\"trade_mode==1\" ref=1 v-model=\"submit_price\" v-on:focus=\"clearErrorTip();keyup_index=1\" />\n                  <span v-if=\"trade_mode==2\">市价</span>\n                  <span class=\"client-numberInput__unit\">元</span>\n                </div>\n                <div class=\"client-numberInput__btn\" v-on:click=\"calcSubmitPrice(-0.01)\">\n                  <div class=\"client-numberInput__btn--sign\">－</div><span class=\"client-numberInput__btn--unit\">0.01</span>\n                </div>\n                <div class=\"client-numberInput__btn\" v-on:click=\"calcSubmitPrice(+0.01)\">\n                  <div class=\"client-numberInput__btn--sign\">＋</div><span class=\"client-numberInput__btn--unit\">0.01</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">可用资金</label>\n              <div class=\"client-trader__form--rightContent client-disabledInput\">\n                <input disabled=\"disabled\" class=\"client-disabledInput__input\" :value=\"show_enable_cash\" />\n                <span class=\"client-disabledInput__unit\">元</span>\n              </div>\n            </div>\n            <div v-if=\"cur_nav == 'buy'\">\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">最大可买</label>\n              <div class=\"client-trader__form--rightContent client-disabledInput\">\n                <input disabled=\"disabled\" class=\"client-disabledInput__input\" :value=\"max_amount\" />\n                <span class=\"client-disabledInput__unit\">股</span>\n              </div>\n            </div>\n            <div v-if=\"cur_nav == 'sell'\">\n              <label class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">最大可卖</label>\n              <div class=\"client-trader__form--rightContent client-disabledInput\">\n                <input disabled=\"disabled\" class=\"client-disabledInput__input\" :value=\"max_sell_amount\" />\n                <span class=\"client-disabledInput__unit\">股</span>\n              </div>\n            </div>\n            <div>\n              <label v-if=\"cur_nav == 'buy'\" class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">买入数量</label>\n              <label v-if=\"cur_nav == 'sell'\" class=\"client-trader__form--label\" :class=\"cur_nav == 'sell' ? 'sell' : ''\">卖出数量</label>\n              <div class=\"client-trader__form--rightContent client-numberInput\">\n                <div class=\"client-numberInput__input\">\n                  <input ref=2 v-model=\"submit_amount\" v-on:focus=\"clearErrorTip();keyup_index=2\" />\n                  <span class=\"client-numberInput__unit\">股</span>\n                </div>\n                <div class=\"client-numberInput__btn\" v-on:click=\"calcSubmitAmount(-100)\">\n                  <div class=\"client-numberInput__btn--sign\">－</div><span class=\"client-numberInput__btn--unit\">100</span>\n                </div>\n                <div class=\"client-numberInput__btn\" v-on:click=\"calcSubmitAmount(+100)\">\n                  <div class=\"client-numberInput__btn--sign\">＋</div><span class=\"client-numberInput__btn--unit\">100</span>\n                </div>\n              </div>\n            </div>\n            <div style=\"padding-top: 6px;\">\n              <label class=\"client-trader__form--radio\">\n                <input class=\"client-trader__form--radio-input\" name=\"set_amount_radio\" :value=\"'type_1'\" v-model=\"amount_radio_value\" type=\"radio\" v-on:input=\"setSubmitAmount(1/1)\" />全部\n              </label>\n              <label class=\"client-trader__form--radio\">\n                <input class=\"client-trader__form--radio-input\" name=\"set_amount_radio\" :value=\"'type_2'\" v-model=\"amount_radio_value\" type=\"radio\" v-on:input=\"setSubmitAmount(1/2)\" />1/2\n              </label>\n              <label class=\"client-trader__form--radio\">\n                <input class=\"client-trader__form--radio-input\" name=\"set_amount_radio\" :value=\"'type_3'\" v-model=\"amount_radio_value\" type=\"radio\" v-on:input=\"setSubmitAmount(1/3)\" />1/3\n              </label>\n              <label class=\"client-trader__form--radio\">\n                <input class=\"client-trader__form--radio-input\" name=\"set_amount_radio\" :value=\"'type_5'\" v-model=\"amount_radio_value\" type=\"radio\" v-on:input=\"setSubmitAmount(1/5)\" />1/5\n              </label>\n            </div>\n            <div v-show=\"'buy' == cur_nav\" style=\"padding-top: 6px;\">冻结金额：<span>{{frozen_amount}}</span></div>\n            <div class=\"client-trader__form--submit_info\">\n                <div>\n                <a class=\"client-trader__btn--reset\" v-on:click=\"resetForm()\">重置</a>\n                <a v-if=\"cur_nav == 'buy'\" class=\"client-trader__btn--save\" :class=\"cur_nav == 'sell' ? 'sell' : ''\" v-on:click=\"add_hand_order()\">买入股票</a>\n                <a v-if=\"cur_nav == 'sell'\" class=\"client-trader__btn--save\" :class=\"cur_nav == 'sell' ? 'sell' : ''\" v-on:click=\"add_hand_order()\">卖出股票</a>\n              </div>\n              <div class=\"client-trader__form--error_tip\">\n                <span>{{error_tip}}</span>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div class=\"client-trader__market5 client-market5\">\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">卖5</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.ask5_price)\" :class=\"getColorByPrice(stock_info.ask5_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.ask5_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.ask5_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">卖4</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.ask4_price)\" :class=\"getColorByPrice(stock_info.ask4_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.ask4_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.ask4_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">卖3</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.ask3_price)\" :class=\"getColorByPrice(stock_info.ask3_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.ask3_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.ask3_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">卖2</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.ask2_price)\" :class=\"getColorByPrice(stock_info.ask2_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.ask2_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.ask2_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">卖1</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.ask1_price)\" :class=\"getColorByPrice(stock_info.ask1_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.ask1_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.ask1_volume)}}</span>\n          </div>\n          <div>\n            <hr class=\"client-market5__hr\">\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">买1</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.bid1_price)\" :class=\"getColorByPrice(stock_info.bid1_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.bid1_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.bid1_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">买2</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.bid2_price)\" :class=\"getColorByPrice(stock_info.bid2_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.bid2_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.bid2_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">买3</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.bid3_price)\" :class=\"getColorByPrice(stock_info.bid3_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.bid3_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.bid3_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">买4</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.bid4_price)\" :class=\"getColorByPrice(stock_info.bid4_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.bid4_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.bid4_volume)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">买5</span>\n            <span class=\"client-market5__line--middleChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.bid5_price)\" :class=\"getColorByPrice(stock_info.bid5_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.bid5_price)}}</span>\n            <span class=\"client-market5__line--lastChild\">{{parseNumber(stock_info.bid5_volume)}}</span>\n          </div>\n          <div>\n            <hr class=\"client-market5__hr\">\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">现价</span>\n            <span class=\"client-market5__line--lastChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.last_price)\" :class=\"getColorByPrice(stock_info.last_price, stock_info.prev_close_price)\">{{parsePrice(stock_info.last_price)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">涨幅</span>\n            <span class=\"client-market5__line--lastChild\" :class=\"getColorByPrice(stock_info.last_price, stock_info.prev_close_price)\">{{parsePercent(stock_info.change_ratio)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">涨停</span>\n            <span class=\"client-market5__line--lastChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.stop_top)\" :class=\"getColorByPrice(stock_info.stop_top, stock_info.prev_close_price)\">{{parsePrice(stock_info.stop_top)}}</span>\n          </div>\n          <div class=\"client-market5__line\">\n            <span class=\"client-market5__line--firstChild\">跌停</span>\n            <span class=\"client-market5__line--lastChild\" style=\"cursor: pointer;\" v-on:click=\"setSubmitPrice(stock_info.stop_down)\" :class=\"getColorByPrice(stock_info.stop_down, stock_info.prev_close_price)\">{{parsePrice(stock_info.stop_down)}}</span>\n          </div>\n        </div>\n      </section>\n    `,\n    data: function(){\n      return {\n        // 可以通过showArr内部添加字段来控制显示效果\n        showArr: [{\n          cur_nav: 'buy'\n        }, {\n          cur_nav: 'sell'\n        }],\n        focusFlag: false,\n        stock_id: '',\n        stock_name: '',\n        // inputStockCode: '',\n        stock_input: '',\n        stockList: [],\n        stock_info: {},\n        // frozen_amount: '',\n        latest_suggest_timestamp: '',\n\n        submit_price: '',\n        submit_amount: '',\n        amount_radio_value: '',\n        error_tip: '',\n        // max_sell_amount: '', //如果computed中的方法名不能在data中定义\n        update_timer: '',\n        end: '',\n        keyup_arr:[0,1,2],\n        keyup_index:0,\n        type_deal1:false,\n        type_deal2:true,\n        trade_mode:1,\n        temp_price:'', //缓存切换时的限价价格\n      }\n    },\n    computed: {\n      show_enable_cash: function(){\n        let _this = this;\n        if ('buy' == this.cur_nav) {\n          if ('' == this.stock_id) {\n            return '';\n          }else{\n            return numeral(_this.enable_cash).format('0.00');\n          }\n        }else if('sell' == this.cur_nav){\n          if ('' == this.stock_id) {\n            return '';\n          }else{\n            return numeral(_this.enable_cash).format('0.00');\n          }\n        }\n      },\n      max_amount: function(){\n        let _this = this;\n        if ('buy' == this.cur_nav) {\n\n          if(!this.submit_price || this.submit_price == 0 ){\n            // 当价格不存在时 返回空\n            return ''\n          }\n          if ('' == this.stock_id) {\n            return '';\n          }else if(0 == this.submit_price || '' == this.submit_price){\n            // 涨停价计算 stock_info.stop_top\n            var tmpStopTop = this.stock_info.stop_top;\n            if (undefined == tmpStopTop) {\n              return '';\n            }\n            return Math.floor(this.show_enable_cash / this.stock_info.stop_top / 100) * 100;\n          }else{\n            return Math.floor(this.show_enable_cash / this.submit_price / 100) * 100;\n          }\n        }else if('sell' == this.cur_nav){\n          if ('' == this.stock_id) {\n            return '';\n          }else{\n            // 从持仓中获取当前股票的可卖数量\n            let rtn = 0;\n            this.position_realtime.forEach(function(e){\n              if (_this.stock_id ==  e.stock_id) {\n                rtn = e.enable_sell_volume;\n              }\n            })\n            return rtn;\n          }\n        }\n      },\n      max_sell_amount: function(){\n        let _this = this;\n        if ('sell' == this.cur_nav) {\n          if ('' == this.stock_id) {\n            return '';\n          }else{\n            // 从持仓中获取当前股票的可卖数量\n            let rtn = 0;\n            this.position_realtime.forEach(function(e){\n              if (_this.stock_id ==  e.stock_id) {\n                rtn = e.enable_sell_volume;\n              }\n            })\n            return rtn;\n          }\n        }\n      },\n      frozen_amount: function(){\n        let _this = this;\n        if ('buy' == this.cur_nav) {\n          if (this.submit_amount) {\n            if (0 == this.submit_price || '' == this.submit_price) {\n              return numeral(this.submit_amount * this.stock_info.stop_top).format('0.00')\n            }else{\n              return numeral(this.submit_amount * this.submit_price).format('0.00')\n            }\n          }else{\n            return 0;\n          }\n        }else{\n          return 0;\n        }\n      }\n    },\n    watch: {\n      stock_id: function(){\n        var _this = this;\n        var rtn = '';\n        // 从持仓中获取当前股票的可卖数量\n        this.position_realtime.forEach(function (e) {\n          if (_this.stock_id == e.stock_id) {\n            rtn = e.enable_sell_volume;\n          }\n        });\n        // this.max_sell_amount = rtn;\n\n        if (undefined == this.stock_id || '' == this.stock_id) {\n          console.log('this.stock_id: ' + this.stock_id);\n          clearInterval(this.update_timer);\n        }\n      },\n      submit_price: function(){\n        if (this.submit_price < 0) {\n          this.submit_price = 0;\n        }\n      },\n      submit_amount: function(){\n        if (this.submit_amount > this.max_amount) {\n          this.submit_amount = this.max_amount;\n        }\n        if (this.submit_amount < 0) {\n          this.submit_amount = 0;\n        }\n        // this.amount_radio_value = '';\n      },\n      amount_radio_value: function(){\n        if ('' == this.amount_radio_value) {\n          return;\n        }else if('type_1' == this.amount_radio_value){\n          this.submit_amount = this.max_amount;\n          this.clearErrorTip();\n        }else if('type_2' == this.amount_radio_value){\n          this.submit_amount = Math.floor(this.max_amount * (1 / 2) / 100) * 100;\n          this.clearErrorTip();\n        }else if('type_3' == this.amount_radio_value){\n          this.submit_amount = Math.floor(this.max_amount * (1 / 3) / 100) * 100;\n          this.clearErrorTip();\n        }else if('type_5' == this.amount_radio_value){\n          this.submit_amount = Math.floor(this.max_amount * (1 / 5) / 100) * 100;\n          this.clearErrorTip();\n        }\n      }\n    },\n    methods: {\n      mothod_deal(val){\n        if(val == 2){\n          this.type_deal1 = true;\n          this.type_deal2 = false;//市价\n          this.temp_price = this.submit_price;\n          this.setSubmitPrice(this.stock_info.stop_top);\n        }\n        if(val==1){\n          this.type_deal1 = false;\n          this.type_deal2 = true;\n          this.setSubmitPrice(this.temp_price);\n        }\n        this.trade_mode = val;\n\n      },\n      setSubmitPrice: function(v){\n        if (v) {\n          this.submit_price = v;\n        }\n      },\n      getColorByPrice: function(v, line){\n        if (v > line) {\n          return 'num_red';\n        }else if(v < line){\n          return 'num_green';\n        }else{\n          return '';\n        }\n      },\n      getMaxSellAmount: function(){\n        // console.log(this.need_show_arr);\n        let _this = this;\n        let rtn = '';\n        // this.need_show_arr.forEach(function(e){\n        //   if (e.type == 'positionGrid') {\n        //     e.tableData.forEach(function(el){\n        //       if (_this.stock_id  == el.stock_id) {\n        //         rtn = el.enable_sell_volume;\n        //       }\n        //     })\n        //   }\n        // });\n        // 从持仓中获取当前股票的可卖数量\n        this.position_realtime.forEach(function(e){\n          if (_this.stock_id ==  e.stock_id) {\n            rtn = e.enable_sell_volume;\n          }\n        })\n        return rtn;\n      },\n      clearErrorTip: function(){\n        this.error_tip = '';\n      },\n      add_hand_order: function(){\n        let _this = this;\n        let trade_mode = this.trade_mode;\n        if ('' == this.stock_id) {\n          _this.error_tip = '请输入股票代码'\n          return;\n        }\n        // if ('' == this.submit_price) {\n        //   _this.error_tip = '请输入交易价格'\n        //   return;\n        // }\n        if ('' == this.submit_amount) {\n          _this.error_tip = '请输入交易数量'\n          return;\n        }\n        if (0 == this.submit_price || '' == this.submit_price) {\n          if (/sz/i.test(this.stock_id)) {\n            trade_mode = 3;\n          }else if(/sh/i.test(this.stock_id)){\n            trade_mode = 8;\n          }else{\n            $.omsAlert('股票代码错误')\n          }\n        }\n\n        let total_amount = 0;\n        if ('buy' == this.cur_nav) {\n          if (1 !== trade_mode) {\n            total_amount = numeral(this.submit_amount * this.stock_info.stop_top).format('0.00')\n          }else{\n            total_amount = numeral(this.submit_amount * this.submit_price).format('0.00')\n          }\n        }else{\n          if (1 !== trade_mode) {\n            total_amount = numeral(this.submit_amount * this.stock_info.stop_down).format('0.00')\n          }else{\n            total_amount = numeral(this.submit_amount * this.submit_price).format('0.00')\n          }\n        }\n\n        var html = `\n          <article class=\"custom-confirm__body\">\n            <header class=\"custom-confirm__header\">\n              <h2>`+ ('buy' == _this.cur_nav ? '买入确认' : '卖出确认') +`</h2>\n            </header>\n            <main>\n              <form class=\"custom-confirm-form\">\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">股票代码/名称</label>\n                  <div style=\"font-weight: bold;\" class=\"custom-confirm-form__value `+ ('buy' == _this.cur_nav ? '': 'sell') +`\">`+ this.stock_id.substring(0, 6) + ' ' + this.stock_name +`</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易价格<span>(元/股)</span></label>\n                  <div class=\"custom-confirm-form__value `+ ('buy' == _this.cur_nav ? '': 'sell') +`\">`+ ((1 == trade_mode) ? this.submit_price : '市价') +`</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易数量<span>(股)</span></label>\n                  <div class=\"custom-confirm-form__value `+ ('buy' == _this.cur_nav ? '': 'sell') +`\">`+ this.submit_amount +`</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易金额<span>(元)</span></label>\n                  <div class=\"custom-confirm-form__value `+ ('buy' == _this.cur_nav ? '': 'sell') +`\">`+ total_amount +`</div>\n                </div>\n                <div class=\"custom-confirm-form__button\">\n                  <a class=\"custom-confirm-form__btn doAddHandOrder `+ ('buy' == _this.cur_nav ? '': 'sell') +`\">`+ ('buy' == _this.cur_nav ? '确认买入' : '确认卖出') +`</a>\n                </div>\n             </form>\n            </main>\n            <button class=\"custom-confirm__cancel-icon\">X</button>\n          </article>\n        `;\n        $('.custom-confirm__content').empty().html(html);\n        $('.custom-confirm').removeClass('hide');\n        // return;\n        $('.custom-confirm__cancel-icon').on('click', function(){\n          $('.custom-confirm__content').empty();\n          $('.custom-confirm').addClass('hide');\n        })\n        $('.doAddHandOrder').on('click', function(){\n\n          // $.startLoading('正在提交...');\n          $.ajax({\n            url: (window.REQUEST_PREFIX||'') + '/oms/workflow/'+ _this.cur_product_id+'/add_hand_order',\n            type: 'post',\n            data: {\n              stock_code: _this.stock_id,\n              trade_mode: _this.trade_mode,//1 限价 3\\8 市价(深圳 上海)\n              trade_direction: 'buy' == _this.cur_nav ? 1 : 2,//1 买入 2 卖出\n              price: _this.submit_price,//价格\n              volume: _this.submit_amount,//数量\n              is_manual_order: 0 ,//是否自动委托 0 为自动委托 1为手动\n              ignore_tips:0,\n              market:1\n            },\n            success: function(res){\n              // _this.$root.getPositionRealtimeInfo()\n              // _this.$root.getEntrustInfo()\n             // _this.$root.refresh();//刷新页面数据\n\n              $.clearLoading();\n              _this.result_order(res);\n              // 提交后刷新\n             // _this.resetForm();\n            },\n            error: function(){\n              _this.submit_amount = '';\n              $.clearLoading();\n              console.log('error');\n            }\n          })\n        });\n      },\n      result_order(res){\n\n        $('.custom-confirm__content').empty();\n        $('.custom-confirm').addClass('hide');\n        let _this = this;\n        let row = {};\n\n        //是否显示继续购买按钮\n        if(res.code == 0){\n            //购买成功\n            row.btnType =  false;\n            row.entrustStatus = \"pass\";\n            row.style = {}\n        }else if(res.code == 5022111){\n            if(res.data[this.stock_id]){\n              let temp = res.data[this.stock_id];\n              if(temp.code == 0){\n                  row.btnType =  false;\n                  row.entrustStatus = \"pass\";\n                  row.style = {\n\n                  }\n              }else if(temp.code == 5022111){\n                //提示性风控\n                if(temp.msg==\"\"){\n                    if(temp.data.limit_action == 0){\n                        //alert\n                        row.btnType =  true;\n                        row.msg = temp.data.msg;\n                        row.entrustStatus = \"alert\";\n                        row.style = {\n                        color:\"#FAA11F\"\n                        }\n                    }else{\n                        //购买失败\n                        row.btnType = false;\n                        row.entrustStatus = \"fail\";\n                        row.style = {\n                            color:\"red\"\n                        }\n                        if(temp.msg ==\"\"){\n                            row.msg = temp.data.msg;\n                        }else{\n                            row.msg = [temp.msg];\n                        }\n                    }\n                }else{\n                    //购买失败\n                    row.btnType = false;\n                    row.entrustStatus = \"fail\";\n                    row.style = {\n                        color:\"red\"\n                    }\n                    if(temp.msg ==\"\"){\n                        row.msg = []\n                    }else{\n                        row.msg = [temp.msg];\n                    }\n                }\n              } else if(temp.code == 5022110){\n                  //禁止性风控\n                  row.btnType = false;\n                  row.msg = [temp.msg];\n                  row.msg.unshift(\"委托失败\");\n                  row.entrustStatus = \"fail\";\n                  row.style = {\n                    color: \"＃F44336\"\n                  }\n              }else{\n                //禁止性风控\n                row.btnType =  false;\n                row.msg = temp.data.msg;\n                row.entrustStatus = \"fail\";\n                row.style = {\n                    color:\"red\"\n                }\n            }\n          }else{\n          //购买成功\n          row.btnType =  false;\n          row.msg = [\"委托成功\"];\n          row.entrustStatus = \"pass\";\n          row.style = {}\n          }\n\n        }else{\n            //购买失败\n            row.btnType = false;\n            row.entrustStatus = \"fail\";\n            row.style = {\n                color:\"red\"\n            }\n            if(res.msg ==\"\"){\n                row.msg = [];\n            }else{\n                row.msg = [res.msg];\n            }\n        }\n        let contentChild = Vue.extend({\n            data(){\n              let total = (+_this.submit_price)*(+_this.submit_amount);\n              let submit_amount = _this.submit_amount;\n               _this.submit_amount = '';//清空数量\n              total = total.toFixed(2)\n              return {\n                  stock_id: _this.stock_id.substring(0, 5),\n                  stock_name:_this.stock_name,\n                  submit_price:_this.submit_price,\n                  submit_amount:submit_amount,\n                  total:total,\n                  result:row,\n                  trade_mode:_this.trade_mode\n              }\n            },\n            template:`\n                <form class=\"custom-confirm-form\" style=\"padding:0;width:222px;\">\n                <template v-if=\"result.entrustStatus=='pass'\">\n                  <div class=\"custom-confirm__status\">\n                    <i></i> 提交成功\n                  </div>\n                </template>\n                <template v-else>\n                  <div class=\"custom-confirm__status custom-confirm__status--failure\">\n                    <i></i> 提交失败\n                    <span v-for=\"msg in result.msg\" class=\"custom-confirm__status--failure-reason\">{{msg}}</br></span>\n                  </div>\n                </template>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">股票代码/名称</label>\n                  <div style=\"font-weight: bold;\" class=\"custom-confirm-form__value \">{{stock_id}} {{stock_name}}</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易价格<span>(元/股)</span></label>\n                  <div class=\"custom-confirm-form__value \">{{trade_mode==2?\"市价\":submit_price}}</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易数量<span>(股)</span></label>\n                  <div class=\"custom-confirm-form__value \">{{submit_amount}}</div>\n                </div>\n                <div class=\"custom-confirm-form__item\">\n                  <label class=\"custom-confirm-form__label\">交易金额<span>(元)</span></label>\n                  <div class=\"custom-confirm-form__value \">{{total}}</div>\n                </div>\n                <div class=\"buttons\" style=\"margin-top:30px\">\n                  <template v-if=\"result.entrustStatus =='alert'\">\n                    <button  type=\"button\" class=\"vue-confirm__btns--cancel\"  @click=btn_submit style=\"width:60px\">确定</button>\n                    <button type=\"button\" class=\"vue-confirm__btns--submit\"  @click=btn_cancel style=\"width:60px\">取消</button>\n                  </template>\n                  <template v-if=\"result.entrustStatus =='pass'\">\n                    <button type=\"button\" class=\"vue-confirm__btns--cancel\"  @click=btn_cancel style=\"width:60px\">确认</button>\n                  </template>\n                  <template v-if=\"result.entrustStatus =='fail'\">\n                    <button type=\"button\" class=\"vue-confirm__btns--submit\"  @click=btn_cancel style=\"width:60px\">取消</button>\n                  </template>\n                </div>\n             </form>\n\n            `,\n            methods:{\n              btn_submit(){\n                  //忽略提示性风控 继续购买\n                  var self = this;\n                  $.post((window.REQUEST_PREFIX||'')+'/oms/workflow/'+ _this.cur_product_id+'/add_hand_order',{\n                    stock_code: _this.stock_id,\n                    trade_mode: this.trade_mode,//1 限价 3\\8 市价(深圳 上海)\n                    trade_direction: 'buy' == _this.cur_nav ? 1 : 2,//1 买入 2 卖出\n                    price: this.submit_price,//价格\n                    volume: this.submit_amount,//数量\n                    is_manual_order: 0 ,//是否自动委托 0 为自动委托 1为手动\n                    market:1,\n                    ignore_tips:1,//忽略提示风控\n\n                  }).done(function(res){\n                   if(res.code == 0){\n                    $.omsAlert(\"委托成功\");\n                   }else{\n                    $.omsAlert(res.msg);\n                   }\n                   setTimeout(function(){\n                    self.$parent.close();\n                   },500)\n                   //_this.tableData = Object.assign({}, _this.tableData)\n                  }).fail(function(){\n                    $.omsAlert(\"委托失败\");\n                    setTimeout(function(){\n                      self.$parent.close();\n                    },500)\n                  }).always(function(){\n                    _this.$root.refresh();\n                  });\n              },\n              btn_cancel(){\n                this.$parent.close();\n                _this.$root.refresh();\n              }\n            },\n            mounted(){\n                $.clearLoading();\n            }\n        });\n\n        Vue.prototype.$confirm({\n            title: '',\n            content:contentChild,\n            closeIcon: false,\n        });\n\n      },\n      resetForm: function(){\n        this.stock_id = '';\n        this.stock_name = '';\n        this.stock_input = '';\n        this.stockList = '';\n        this.stock_info = '';\n        this.submit_price = '';\n        this.submit_amount = '';\n        this.amount_radio_value = '';\n      },\n      setSubmitAmount: function(v){\n        this.clearErrorTip();\n        var oldValue = this.submit_amount;\n        if (!this.submit_amount) {\n          oldValue = 0;\n        }\n        this.submit_amount = Math.floor(parseFloat(oldValue) * v / 100) * 100;\n      },\n      calcSubmitPrice: function(v){\n        this.clearErrorTip();\n        var oldValue = this.submit_price;\n        if (!this.submit_price) {\n          oldValue = 0;\n        }\n        this.submit_price = parseFloat((parseFloat(oldValue) * 1000 + parseFloat(v) * 1000) / 1000);\n      },\n      calcSubmitAmount: function(v){\n        this.clearErrorTip();\n        var oldValue = this.submit_amount;\n        if (!this.submit_amount) {\n          oldValue = 0;\n        }\n        this.submit_amount = parseFloat(oldValue) + parseFloat(v);\n      },\n      parsePrice: function(v){\n        if (undefined == v) {\n          return '- -'\n        }\n        return numeral(v).format('0.000');\n        // if (/\\.\\d{3}/.test(v)) {\n        //   return numeral(v).format('0.000');\n        // }else{\n        //   return numeral(v).format('0.00');\n        // }\n\n      },\n      parseNumber: function(v){\n        if (undefined == v) {\n          return '- -'\n        }\n        // if (v >= 1000) {\n        //   return numeral(v / 1000).format('0.0') + 'K';\n        // }else{\n        //   return numeral(v).format('0,0');\n        // }\n        var reg=/(?=(?!\\b)(\\d{3})+$)/g;\n        return String(v).replace(reg, ',');\n\n      },\n      parsePercent: function(v){\n        if (v == undefined) {\n          return '- -';\n        }else{\n          return numeral(v).format('0.00%');\n        }\n\n      },\n      selectOneStock: function(id, name){\n        let _this = this;\n        // this.inputStockCode = id;\n        this.stock_name = name;\n        this.stock_input = id.substring(0, 6);\n        this.stock_id = id;\n        this.getStockDetail(function(){\n          if ('buy' == _this.cur_nav) {\n            _this.submit_price = _this.stock_info.ask1_price;\n          }else if('sell' == _this.cur_nav){\n            _this.submit_price = _this.stock_info.bid1_price;\n          }\n        });\n        // 额外，每五秒刷新\n        clearInterval(this.update_timer);\n        this.update_timer = setInterval(function(){\n          _this.getStockDetail()\n        },5000);\n\n        this.stockList = [];\n      },\n      showTrader: function(cur_nav){\n        if (this.showArr.some(function(e){\n          return e.cur_nav == cur_nav;\n        })) {\n          return true;\n        }\n\n        return false;\n      },\n      getStockDetail: function(callback){\n        let _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'') + '/oms/helper/stock_detail',\n          type: 'get',\n          data: {\n            stock_id: this.stock_id\n          },\n          success: function({code, msg, data}){\n            if (0 == code) {\n              _this.stock_info = data[0];\n              if (Object.prototype.toString.call(callback) == '[object Function]') {\n                callback();\n              }\n            }else{\n              //$.failNotice(msg);\n              _this.resetForm();//请求异常时清空股票详情\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getStockList: function(event){\n        let _this = this;\n        // 判断stock_input 和 stock_id前六位是否一致\n        if (this.stock_input !== this.stock_id.substring(0, 6)) {\n          this.stock_id = '';\n          this.stock_name = '';\n          this.stock_info = '';\n        }\n        this.latest_suggest_timestamp = new Date().valueOf();\n        let latest_suggest_timestamp = this.latest_suggest_timestamp;\n        var str = (window.REQUEST_PREFIX||'')+'/oms/helper/code_genius?stock_code=' + this.stock_input;\n        $.getJSON(str).done(function(res){\n          if (latest_suggest_timestamp != _this.latest_suggest_timestamp) {\n            return;\n          }\n          if(res.code==0 || res.code==1123124){\n            _this.stockList = res.data;\n            // var html = '';\n            // res.data.forEach(function(e){\n            //   html += '<li data-id=\"' + e.stock_id +'\" data-name=\"'+ e.stock_name +'\">' + e.stock_id + ' &nbsp; ' + e.stock_name + '</li>';\n            // });\n            // $('.custom-stock-suggest').html(html).slideDown(300);\n\n            // // 当只有一个符合条件时，默认选中该项。\n            // if(1 == res.code.length){\n            //   selectOneStock($('.custom-stock-suggest>li'));\n            // }\n\n            if (1 == _this.stockList.length) {\n              _this.selectOneStock(_this.stockList[0].stock_id, _this.stockList[0].stock_name)\n            }\n          }else{\n            // $.omsAlert('获取建议证券列表失败！',false,300);\n          }\n        }).always(function(){\n          $('.stock-input').removeClass('loading');\n        });\n      },\n      listenKeyboard($event){\n        //监听键盘事件\n        if($event.code == \"ArrowDown\"){\n          //向下\n          this.keyup_index++;\n        }\n        if($event.code == \"ArrowUp\"){\n          //向下\n          this.keyup_index--;\n        }\n        this.keyup_index = this.keyup_index%3;\n        this.$refs[this.keyup_index].focus();\n        if($event.code == \"ArrowLeft\"){\n          //向左\n          if(this.keyup_index  == 1){\n            this.calcSubmitPrice(-0.01)\n          }\n          if(this.keyup_index  == 2){\n            this.calcSubmitAmount(-100)\n          }\n        }\n        if($event.code == \"ArrowRight\"){\n          //向右\n          if(this.keyup_index  == 1){\n            this.calcSubmitPrice(+0.01)\n          }\n          if(this.keyup_index  == 2){\n            this.calcSubmitAmount(+100)\n          }\n        }\n        if($event.code == \"Enter\"){\n          this.add_hand_order()\n        }\n      }\n    }\n  });\n  // 表格显示模块\n  Vue.component('client-grid', {\n    props: ['cur_nav', 'cur_product_info', 'need_show_arr', 'profit_of_today_v2', 'profit_of_today_v2_id', 'center_list'],\n    template: `\n      <section class=\"client-body__grid client-grid\" :class=\"{'file-bgd': 'file_center' == cur_nav}\" style=\"display: flex;flex-direction:column;\">\n        <div class=\"client-body__gather\">\n          <template v-if=\"cur_nav == 'account' || cur_nav == 'position' || cur_nav == 'buy' || cur_nav == 'sell'\">\n            <div>资产：</br><span>{{ parseNumber(cur_product_info.total_assets, '0.00') }}</span></div>\n            <div>资金余额：</br><span>{{ parseNumber(cur_product_info.balance_amount, '0.00') }}</span></div>\n            <div>股票市值：</br><span>{{ parseNumber(cur_product_info.security, '0.00') }}</span></div>\n            <div>总盈亏：</br><span :class=\"checkPositive(cur_product_info.net_profite)\">{{ parseNumber(cur_product_info.net_profite, '0.00') }}</span></div>\n            <div>今日盈亏：</br><span :class=\"checkPositive(getProfitOfToday(cur_product_info))\">{{ getProfitOfToday(cur_product_info) }}</span></div>\n            <div>借款：</br><span>{{ parseNumber(cur_product_info.loan_capital, '0.00') }}</span></div>\n            <div>权益：</br><span>{{ parseNumber(cur_product_info.right_capital, '0.00') }}</span></div>\n            <div>单位净值：</br><span>{{ parseNumber(cur_product_info.net_value, '0.00') }}</span></div>\n            <div>止损线：</br><span>{{ parseNumber(cur_product_info.closing_line_data_net_value, '0.00') }}</span></div>\n            <div>预警线：</br><span>{{ parseNumber(cur_product_info.risk_line_data_net_value, '0.00') }}</span></div>\n            <div v-if=\"false\">牛人盈亏：</br><span>{{ parseNumber(cur_product_info.trader_profite, '0.00') }}</span></div>\n          </template>\n          <template v-if=\"cur_nav == 'revert'\">\n            <div class=\"client-revert\" style=\"line-height:50px;padding:0\">\n              <label class=\"\">股票代码</label>\n              <div class=\"client-stockQuery\">\n                <input v-model=\"queryStock\" class=\"client-stockQuery__input\" />\n              </div>\n              <a class=\"client-revert__btn\" v-on:click=\"selectAll\">全选</a>\n              <a class=\"client-revert__btn\" v-on:click=\"deselectAll\">全不选</a>\n              <a class=\"client-revert__btn client-revert__btn--revert\" v-on:click=\"doRevert(null)\">撤单</a>\n            </div>\n          </template>\n          <template v-if=\"cur_nav == 'deal_today' || cur_nav == 'entrust_today'\">\n            <div class=\"client-revert\" style=\"line-height:50px;padding:0\">\n              <label class=\"\">股票代码</label>\n              <div class=\"client-stockQuery\">\n                <input v-model=\"queryStock\" class=\"client-stockQuery__input\" />\n              </div>\n            </div>\n          </template>\n          <template v-if=\"cur_nav == 'entrust_history' || cur_nav == 'deal_history'\">\n            <div style=\"display: flex;line-height:50px;padding:0\">\n              <label>起始日期</label>\n              <div style=\"position: relative;margin-right: 20px;margin-left: 5px;\">\n                <vue-zebra_date_picker :value=\"beginDate\" :minDate=\"minDate\" :maxDate=\"maxDate\" v-on:select=\"beginDate = ($event)\"></vue-zebra_date_picker>\n              </div>\n              <label>结束日期</label>\n              <div style=\"position: relative;margin-right: 20px;margin-left: 5px;\">\n                <vue-zebra_date_picker :value=\"endDate\" :minDate=\"minDate\" :maxDate=\"maxDate\" v-on:select=\"endDate = ($event)\"></vue-zebra_date_picker>\n              </div>\n              <label>股票代码</label>\n              <div class=\"client-stockQuery\">\n                <input v-model=\"queryStock\" class=\"client-stockQuery__input\" />\n              </div>\n            </div>\n          </template>\n          <template v-if=\"'file_center' == cur_nav\">\n            <div class=\"file-center-head fileCenterHead\">\n              <div class=\"file-center-head__report fileCenterSelect\">\n                <vue-multiple_select :options=\"options\" :flag_check_all=\"true\" :checked_arr=\"select_id\" :init_obj=\"init_obj\" v-on:multiple_select=\"select_id = ($event)\"></vue-multiple_select>\n              </div>\n              <div class=\"file-center-head__data fileCenterData\">\n                <vue-zebra_date_picker :value=\"currentDate\" v-on:select=\"currentDate = ($event)\"  :min_date=\"minDate\" :max_date=\"maxDate\"></vue-zebra_date_picker>\n              </div>\n              <div style=\"flex-grow: 1;\"></div>\n              <button class=\"file-center-head__botchDown fileBotchDown\" @click=\"batch_down()\">批量下载</button>\n            </div>\n          </template>\n        </div>\n        <div style=\"display: flex;flex: 1;\">\n          <slot></slot>\n          <div style=\"flex: 1;\">\n            <vue-table v-if=\"!showDisplayTableData() && !showDisplayTableDataV2()\" v-for=\"show in need_show_arr\" :tableController=\"show.tableController\" :tableData=\"show.tableData\" @tr_click=\"tr_click\" @tr_dbclick=tr_dbclick></vue-table>\n            <vue-table v-if=\"showDisplayTableDataV2()\" v-for=\"show in need_show_arr\" :tableController=\"show.tableController\" :tableData=\"displayTableDataV2\" @tr_click=\"tr_click\" @tr_dbclick=tr_dbclick></vue-table>\n            <vue-table v-if=\"showDisplayTableData()\" v-for=\"show in need_show_arr\" :tableController=\"show.tableController\" :tableData=\"displayTableData\" @tr_click=\"tr_click\" @tr_dbclick=tr_dbclick></vue-table>\n            <file-center-content v-if=\"'file_center' == cur_nav\" @batch_down_report_id=\"batch_down_list = $event\" :product_list=\"center_list\" :product_data=\"currentDate\"></file-center-content>\n          </div>\n\n        </div>\n\n      </section>\n    `,\n    data: function(){\n      return {\n        minDate: '2015-01-01',\n        maxDate: (function(){return moment().format('YYYY-MM-DD')})(),\n        beginDate: (function(){return moment().format('YYYY-MM-DD')})(),\n        endDate: (function(){return moment().format('YYYY-MM-DD')})(),\n        currentDate: (function(){return moment().format('YYYY-MM-DD')})(), //针对文件中心\n        queryStock: '',\n        focusFlag: '',\n        stockList: [],\n        init_obj: {\n          allSelected: '全部报表',\n          noMatchesFound: '未选择任何报表',\n          placeholder: '请先选择报表'\n        },\n        select_id: '',\n        batch_down_fn: false,\n        batch_down_list: []\n      }\n    },\n    watch: {\n      select_id: function () {\n        this.$emit('select_report_id', this.select_id);\n      },\n      queryStock: function(){\n        this.need_show_arr[0].tableData.forEach(function(e){\n          e.checked = false;\n        });\n        this.$emit('change_query_stock', this.queryStock);\n      },\n      beginDate: function(){\n        this.$emit('change_begin_date', this.beginDate);\n      },\n      endDate: function(){\n        this.$emit('change_end_date', this.endDate);\n      },\n      currentDate: function () {\n        this.batch_down_list = [];\n        this.$emit('current_date_change', this.currentDate);\n      },\n      cur_nav: function () {\n        this.batch_down_list = [];\n      }\n    },\n    computed: {\n      displayTableData: function(){\n        let _this = this;\n        if ('deal_today' == this.cur_nav || 'entrust_today' == this.cur_nav) {\n          let rtn = [];\n          this.need_show_arr[0].tableData.forEach(function(e){\n            if (new RegExp(_this.queryStock).test(e.stock.code)) {\n              rtn.push(e);\n            }\n          });\n          return rtn;\n        }else{\n          return [];\n        }\n      },\n      options: function () {\n        if ('file_center' != this.cur_nav) { //主要是为了防止离开文件中心页面之后batch_down_list数组里面还有原先选中的报表id\n          this.batch_down_list = [];\n        }\n        let report_file_center = [];\n        //机构版专户版报表\n        if (3 == window.LOGIN_INFO.org_info.theme) {\n          report_file_center = [\n            {\n              value: '资产查询数据',\n              label: '资产查询数据',\n              num: '0'\n            },\n            {\n              value: '持仓查询数据',\n              label: '持仓查询数据',\n              num: '1'\n            },\n            {\n              value: '委托查询数据',\n              label: '委托查询数据',\n              num: '2'\n            },\n            {\n              value: '成交查询数据',\n              label: '成交查询数据',\n              num: '3'\n            },\n            {\n              value: '清算查询数据',\n              label: '清算查询数据',\n              num: '4'\n            }\n          ];\n        } else {\n          report_file_center = [\n            {\n              value: '产品报表',\n              label: '产品报表',\n              num: '0'\n            },\n            {\n              value: '股票持仓报表',\n              label: '股票持仓报表',\n              num: '1'\n            },\n            {\n              value: '资产查询数据',\n              label: '资产查询数据',\n              num: '2'\n            },\n            {\n              value: '持仓查询数据',\n              label: '持仓查询数据',\n              num: '3'\n            },\n            {\n              value: '委托查询数据',\n              label: '委托查询数据',\n              num: '4'\n            },\n            {\n              value: '成交查询数据',\n              label: '成交查询数据',\n              num: '5'\n            }\n          ];\n        }\n        return report_file_center;\n      },\n      displayTableDataV2: function(){\n        let _this = this;\n        if ('revert' == this.cur_nav || 'entrust_history' == this.cur_nav || 'deal_history' == this.cur_nav) {\n          let rtn = [];\n          if(this.need_show_arr[0].tableData){\n            this.need_show_arr[0].tableData.forEach(function(e){\n              if (new RegExp(_this.queryStock).test(e.stock_code)) {\n                rtn.push(e);\n              }else if(e.stock && new RegExp(_this.queryStock).test(e.stock.code)){\n                rtn.push(e);\n              }\n            });\n            return rtn;\n          }else{\n            return []\n          }\n\n        }else{\n          return [];\n        }\n      }\n    },\n    methods: {\n      //文件中心  批量下载\n      batch_down: function () {\n        let _this = this;\n        this.batch_down_fn = true;\n        // 如果没有选中的报表id,禁止点击\n        if (undefined == this.batch_down_list || '' == this.batch_down_list || 0 == this.batch_down_list.length) {\n          $.omsAlert('请先选择报表');\n          return false;\n        }\n\n        let down_url_arr = [];\n        this.batch_down_list.forEach((e) => {\n          _this.center_list.forEach((i) => {\n            if (e == i.id) {\n              let obj = '';\n              obj = i.down_url.split('storage/')[1];\n              down_url_arr.push(decodeURI(obj));\n            }\n          })\n        })\n        if (0 == down_url_arr.length) {\n          $.omsAlert('请先选择报表');\n          return false;\n        }\n        $.ajax({\n          url: '/utility/downloadzip',\n          type: 'GET',\n          data: {\n            user_id: window.LOGIN_INFO.user_id,\n            file_name:down_url_arr.join(','),\n            date: this.currentDate.split('-').join('')\n          },\n          success: ({code,msg,data}) => {\n            window.location.href = '/utility/downloadzip?user_id='+window.LOGIN_INFO.user_id+'&file_name='+down_url_arr.join(',')+'&date='+this.currentDate.split('-').join('');\n            return false;\n          },\n          error: () => {\n            $.omsAlert('网络异常，请尝试');\n          }\n        })\n\n      },\n      showDisplayTableData: function(){\n        return (this.cur_nav == 'deal_today' || this.cur_nav == 'entrust_today');\n      },\n      showDisplayTableDataV2: function(){\n        return (this.cur_nav == 'revert' || this.cur_nav == 'entrust_history' || this.cur_nav == 'deal_history');\n      },\n      doRevert: function(stock){\n        // TODO  撤单需要支持批量，目前只取了最后一个\n        // let order_id;\n          let _this = this;\n          let orderArr = [];\n          let trHtml = '';\n        if(stock == null){//没有单只股票时 为批量交易\n          this.displayTableDataV2.forEach(function(e){\n            if (e.checked == true) {\n              // order_id = e.id;\n              orderArr.push({\n                order_id: e.id,\n                stock_code: e.stock_info.stock_code,\n                stock_name: e.stock_info.stock_name,\n                type: e.entrust.type //买卖方向\n              })\n            }\n          });\n        }else{\n          orderArr.push({\n            order_id: stock.id,\n            stock_code: stock.stock_info.stock_code,\n            stock_name: stock.stock_info.stock_name,\n            type: stock.entrust.type //买卖方向\n          })\n        }\n        if (orderArr.length == 0) {\n          $.omsAlert('请选择需要撤单的委托');\n          return;\n        }\n        orderArr.forEach(function(e){\n          trHtml += `<tr>\n            <td>`+ e.stock_code +`</td>\n            <td>`+ e.stock_name +`</td>\n            <td class=\"`+ (e.type == 1 ? 'red' : 'blue') +`\">`+ (e.type == 1 ? '买入' : '卖出') +`</td>\n            <td>`+ e.order_id +`</td>\n          </tr>`;\n        })\n\n        let html = `\n          <article class=\"custom-confirm__body\" style=\"width: 390px;\">\n            <header class=\"custom-confirm__header\">\n              <h2>撤单确认</h2>\n            </header>\n            <main>\n              <form class=\"custom-confirm-form\">\n                <div class=\"custom-confirm-form__title\">待撤单委托：`+ orderArr.length +`条，确定撤销以下委托？</div>\n                <table class=\"custom-confirm-form__table\">\n                  <tbody>\n                    <tr>\n                      <td>股票代码</td>\n                      <td>股票名称</td>\n                      <td>买卖方向</td>\n                      <td>编号</td>\n                    </tr>\n                  </tbody>\n                  <tbody>\n                    `+ trHtml +`\n                  </tbody>\n                </table>\n                <div class=\"custom-confirm-form__button\">\n                  <a class=\"doRevertOrder custom-confirm-form__btn custom-confirm-form__btn--doCancel\">确认撤单</a>\n                </div>\n             </form>\n            </main>\n            <button class=\"custom-confirm__cancel-icon\">X</button>\n          </article>\n        `;\n        $('.custom-confirm__content').empty().html(html);\n        $('.custom-confirm').removeClass('hide');\n\n        $('.custom-confirm__cancel-icon').on('click', function(){\n          $('.custom-confirm__content').empty();\n          $('.custom-confirm').addClass('hide');\n        })\n\n        let showRevertResult = function(){\n          $.clearLoading();\n          _this.$root.refresh();\n          let resultHtml = '';\n          let okNum = 0;\n          let notOkNum = 0;\n          orderArr.forEach(function(e){\n            resultHtml += `\n            <tr>\n              <td>`+ e.stock_code +`</td>\n              <td>`+ e.stock_name +`</td>\n              <td class=\"`+ (e.type == 1 ? 'red' : 'blue') +`\">`+ (e.type == 1 ? '买入' : '卖出') +`</td>\n              <td>`+ e.order_id +`</td>\n              <td class=\"`+ (e.code == 0 ? 'statusSuccess' : 'statusFailure') +`\">`+ (e.code == 0 ? '成功' : '撤单失败') +`</td>\n              <td class=\"`+ (e.code == 0 ? '' : 'statusFailure') +`\">`+ (0 == e.code ? '无' : e.msg) +`</td>\n            </tr>\n            `;\n\n            if (0 == e.code) {\n              okNum += 1;\n            }else{\n              notOkNum += 1;\n            }\n          });\n          let html = `\n          <article class=\"custom-confirm__body\" style=\"width: 552px;\">\n            <main>\n              <form class=\"custom-confirm-form\">\n                <div class=\"custom-confirm-form__title\">当前`+ okNum +`条<span class=\"statusSuccess\">撤单成功</span>，`+ notOkNum +`条<span class=\"statusFailure\">撤单失败</span></div>\n                <table class=\"custom-confirm-form__table\">\n                  <tbody>\n                    <tr>\n                      <td>股票代码</td>\n                      <td>股票名称</td>\n                      <td>买卖方向</td>\n                      <td>编号</td>\n                      <td>撤单状态</td>\n                      <td>备注</td>\n                    </tr>\n                  </tbody>\n                  <tbody>\n                    `+ resultHtml +`\n                  </tbody>\n                </table>\n                <div class=\"custom-confirm-form__button\">\n                  <a class=\"custom-confirm-form__btn custom-confirm-form__btn--close\">关闭</a>\n                </div>\n             </form>\n            </main>\n          </article>\n          `;\n          $('.custom-confirm__content').empty().html(html);\n          $('.custom-confirm').removeClass('hide');\n          $('.custom-confirm-form__btn--close').on('click', function(){\n            $('.custom-confirm__content').empty();\n            $('.custom-confirm').addClass('hide');\n          });\n\n          // var secs =3; //倒计时的秒数\n          // for(let i=secs;i>=0;i--) {\n          //   // 这里使用的i是通过let定义的。\n          //   window.setTimeout(function(){\n          //     doClose(i);\n          //   }, (secs-i) * 1000);\n          // }\n        };\n\n        $('.doRevertOrder').on('click', function(){\n          // 批量处理之后，修改列表\n          $.startLoading();\n          orderArr.forEach(function(e){\n            let order_id = e.order_id;\n            $.ajax({\n              url: (window.REQUEST_PREFIX||'')+'/oms/workflow/'+ _this.cur_product_info.id+'/'+order_id +'/do_cancel',\n              type: 'post',\n              data: {\n                workflow_id: e.order_id\n              },\n              success: function({code, msg, data}){\n                if (0 == code) {\n\n                }else{\n                  // $.omsAlert(msg);\n                }\n                e.msg = msg;\n                e.code = code;\n                e.status = 'finished';\n\n                if (orderArr.every(function(el){\n                  return el.status == 'finished';\n                })) {\n                  showRevertResult();\n                }\n              },\n              error: function(){\n                console.log('error')\n                e.msg = '网络异常';\n                e.code = -1;\n                e.status = 'finished';\n\n                if (orderArr.every(function(el){\n                  return el.status == 'finished';\n                })) {\n                  showRevertResult();\n                }\n              }\n            })\n          })\n        });\n\n        // $.ajax({\n        //   url: (window.REQUEST_PREFIX||'')+'/oms/workflow/'+this.cur_product_info.id+'/'+order_id +'/do_cancel',\n        //   type: 'post',\n        //   data: {\n        //     workflow_id: order_id\n        //   },\n        //   success: function({code, msg, data}){\n        //     if (0 == code) {\n        //       // TODO\n        //       debugger;\n        //     }else{\n        //       $.omsAlert(msg);\n        //     }\n        //   },\n        //   error: function(){\n        //     console.log('error')\n        //   }\n        // })\n      },\n      selectAll: function(){\n        // 这里需要把tableData动态的到，因为要通过股票代码遍历\n        this.need_show_arr.forEach(function(e){\n          e.tableData.forEach(function(el){\n            if (!el.disabled) {\n              el.checked = true;\n            }\n          })\n        })\n      },\n      deselectAll: function(){\n        // 这里需要把tableData动态的到，因为要通过股票代码遍历\n        this.need_show_arr.forEach(function(e){\n          e.tableData.forEach(function(el){\n            if (!el.disabled) {\n              el.checked = false;\n            }\n          })\n        })\n      },\n      parseNumber: function(v, rule){\n        if(!v){\n          return \"- -\"\n        }\n        return numeral(v).format(rule);\n      },\n      checkPositive: function(v){\n        if(parseFloat(v) > 0){\n          return 'num_positive';\n        }else if (parseFloat(v) < 0) {\n          return 'num_negative';\n        }\n\n        return '';\n      },\n      getProfitOfToday: function(info){\n        if (info.id != this.profit_of_today_v2_id) {\n          return '- -';\n        }\n        if (info.redeem_fee == undefined || info.manage_fee == undefined || info.other_fee == undefined) {\n          return '- -';\n        }\n        return numeral(this.profit_of_today_v2 - info.redeem_fee - info.manage_fee - info.other_fee).format('0.00');\n      },\n      tr_click(index,row){\n        //子模块的点击事件\n        //表格内的tr被点击\n        if(this.cur_nav != \"revert\"){//撤单页面不需要点击\n          this.$emit(\"tr_click\",index,row);//将index 和row 传递给 根节点\n        }\n\n      },\n      tr_dbclick(index,row){\n        if(this.cur_nav == \"revert\"){//撤单页面双击撤单\n          this.$emit('tr_dbclick',index,row);\n          // 双击撤单\n          this.doRevert(row);\n        }\n\n      }\n    }\n  });\n\n  // 重置密码\n  Vue.component('client-form-password', {\n    props: [],\n    template: `\n      <section class=\"client-body__password section-resetPassword\">\n        <div class=\"section-resetPassword__content\">\n          <h1>`+ APP_NAME +`资产管理平台</h1>\n          <form>\n            <div class=\"section-resetPassword__item\"><span class=\"section-resetPassword__error-tip\">{{error_tip}}</span></div>\n            <div class=\"section-resetPassword__item\"><label><input autocomplete=\"new-password\" type=\"password\" v-model=\"old_password\" placeHolder=\"请输入原密码\" /></label></div>\n            <div class=\"section-resetPassword__item\"><label><input autocomplete=\"new-password\" type=\"password\" v-model=\"new_password\" placeHolder=\"请输入新密码\" /></label></div>\n\n            <div class=\"section-resetPassword__controller\">\n              <a class=\"section-resetPassword__controller--btn\" v-on:click=\"doSubmit\">确认修改</a>\n            </div>\n          </form>\n        </div>\n      </section>\n    `,\n    data: function(){\n      return {\n        error_tip: '',\n        old_password: '',\n        new_password: ''\n      }\n    },\n    methods: {\n      resetForm: function(){\n        this.error_tip = '';\n        this.old_password = '';\n        this.new_password = '';\n      },\n      doSubmit: function(){\n        let _this = this;\n        let old_password = this.old_password;\n        let new_password = this.new_password;\n        if (new_password.length > 20 || new_password.length < 1) {\n          this.error_tip = '提示：1-20个字符，只允许字母和数字';\n          return;\n        }\n        if ( null === new_password.match(/^([a-zA-Z0-9])*$/) ) {\n          this.error_tip = '提示：1-20个字符，只允许字母和数字';\n          return;\n        }\n        // if (new_password !== new_password) {\n        //   this.error_tip = '提示：您输入的密码不一致';\n        //   return;\n        // }\n        $.startLoading('正在提交...');\n        $.ajax({\n          type: 'post',\n          url: '/bms-pub/user/modify_self_password',\n          data:{\n            user_id: LOGIN_INFO.user_id,\n            login_password: old_password,\n            new_password: new_password\n          },\n          success: function(res){\n            $.clearLoading();\n            if (0 == res.code) {\n              _this.resetForm();\n              $.omsAlert(res.msg);\n            }else{\n              _this.error_tip = res.msg;\n            }\n          },\n          error: function(){\n            $.clearLoading();\n            $.failNotice();\n          }\n        });\n      }\n    }\n  });\n\n  //文件中心\n  //input 点击事件，方便传值全选\n  Vue.component('report-input-checkout', {\n    props: ['reportItem', 'reportAllSelected', 'change_selected_id'],\n    template: `\n      <div>\n        <input type=\"checkbox\" v-model=\"change_model\" :disabled=\"disabledFn(reportItem)\" @click=\"change_selected_model()\"/>\n        {{reportItem.category}}\n      </div>\n    `,\n    data: function () {\n      return {\n        change_model: false,  //单个报表选中判断\n        change_model_id: this.reportItem.id  //当前报表id\n      }\n    },\n    watch: {\n      change_model: function () {  //通过是否勾选来得到选中的报表id\n        let _this = this;\n        if (false == this.change_model) {\n          this.change_selected_id.forEach((e,index) => {\n            if (_this.reportItem.id == e) {\n              _this.change_selected_id.splice(index,1);\n            }\n          })\n        } else {\n          this.change_selected_id.push(this.reportItem.id);\n        }\n        this.$emit('change_model_report', this.change_model);\n      },\n      change_model_id: function () {\n        this.$emit('change_model_report_id', this.change_model_id);\n      },\n      reportAllSelected: function () { //通过是否勾选来判断是否全部选中报表\n        if (1 != this.reportItem.status) {\n          return false;\n        }\n        this.change_model = this.reportAllSelected;\n      }\n    },\n    methods: {\n      change_selected_model: function () {\n        if (false == this.change_model) {\n          return this.change_model = false;\n        }\n        return this.change_model = true;\n      },\n      disabledFn: function (reportItem) {\n        if (1 != reportItem.status) {\n          return 'disabled';\n        }\n      }\n    }\n  })\n  //文件中心表格\n  Vue.component('file-center-content', {\n    props: ['product_list', 'product_data'],\n    template: `\n      <table class=\"file-center-content\">\n        <tr>\n          <th><input type=\"checkbox\" v-model=\"reportAllSelected\"/>类别</th>\n          <th>报表名</th>\n          <th>状态</th>\n          <th>生成时间</th>\n          <th></th>\n          <th></th>\n          <th></th>\n        </tr>\n        <tr v-for=\"reportItem in product_list\">\n          <td>\n            <report-input-checkout :change_selected_id=\"change_selected_id\" :reportAllSelected=\"reportAllSelected\" :reportItem=\"reportItem\"></report-input-checkout>\n          </td>\n          <td>{{reportItem.report_name}}</td>\n          <td v-text=\"reportStatus(reportItem)\"></td>\n          <td>{{reportItem.down_time}}</td>\n          <td><a :id=\"'report_id'+reportItem.id\" :class=\"{click_change: 1==reportItem.status,no_click_change:1!=reportItem.status}\" @click=\"reportDoenLoad(reportItem)\">下载</a></td>\n          <td><a class=\"file-center-content__reGenerate\" :class=\"{click_change: 1!=reportItem.status,no_click_change:1==reportItem.status || 0 == reportItem.status}\" @click=\"regenerate(reportItem)\">重新生成</a></td>\n          <td><a class=\"file-center-content__delete\" @click=\"deleteReport(reportItem)\">删除</a></td>\n        </tr>\n        <tr v-if=\"0 == product_list.length\">\n          <td colspan=\"7\">该时段暂无匹配记录</td>\n        </tr>\n      </table>\n    `,\n    data: function(){\n      return {\n        reportAllSelected: false,  //全选\n        change_selected_id: []\n      }\n    },\n    watch: {\n      change_selected_id: function () {\n        this.$emit('batch_down_report_id', this.change_selected_id);\n      },\n      product_data: function () {\n        this.reportAllSelected = false;\n      }\n    },\n    methods: {\n      reportStatus: function (itemId) {\n        if (0 == itemId.status) {\n          return '生成中';\n        } else if (1 == itemId.status) {\n          return '已生成';\n        } else if (2 == itemId.status) {\n          return '已失败';\n        }\n      },\n      deleteReport: function (item) {  //删除报表文件\n        let _this = this;\n        $.confirm({\n          title: '退出确认',\n          content: `\n            <div class=\"vue-confirm\">\n              <div style=\"font-size: 14px; text-align: center; color: #000000; padding: 60px 0;\">确认删除该文件？</div>\n            </div>\n          `,\n          closeIcon: true,\n          columnClass: 'custom-window-width',\n          confirmButton: '确定',\n          confirmButtonClass: 'vue-confirm__btns--cancel',\n          confirm: function(){\n            $.startLoading();\n            $.ajax({\n              url: '/bms-pub/report/file_delete',\n              type: 'POST',\n              data: {\n                id: item.id\n              },\n              success: ({code,msg,data}) => {\n                if (0 == code) {\n                  //刷新页面,方便组件重复利用\n                  if (\"[object Function]\" == Object.prototype.toString.call(_this.$root.doRefresh)) {\n                    _this.$root.doRefresh(true);\n                  }\n                  $.clearLoading();\n                  $.omsAlert('删除成功');\n                }\n              },\n              error: () => {\n                $.omsAlert('网络异常');\n              }\n            })\n          },\n          cancelButton: false\n        })\n\n      },\n      reportDoenLoad: function (reportItem) { //下载\n        let _this = this;\n        if (1 != reportItem.status) {  //如果是生成不成功的报表，下载不可点击\n          return false;\n        }\n        window.location.href = reportItem.down_url+'?n='+reportItem.report_name;\n      },\n      regenerate: function (reportItem) {\n        if (1 == reportItem.status || 0 == reportItem.status) { //如果是报表生成成功的时候，重新生成不可点\n          return false;\n        }\n        //由于各种类型的报表的参数结构不一致，与后台确认，只能根据数据的类型来得到数据\n        let  data = [];\n        $.each(reportItem.request_url.data, (key, val) => {\n          let str = '';\n          if ('string' == (typeof val)) {\n            str = key+'='+val;\n            data.push(str);\n          } else if ('object' == (typeof val)){\n            $.each(val, (key1, val1) => {\n              if ('string' == (typeof val1)) {\n                str = key1 + '=' + val1;\n                data.push(str);\n              }\n            })\n          }\n        })\n        $.ajax({\n          url: reportItem.request_url.url+'?'+data.join('&'),\n          type: 'GET',\n          data: {\n            file_id: reportItem.id\n          },\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              $.omsAlert('重新生成成功');\n              //刷新页面,方便组件重复利用\n              if (\"[object Function]\" == Object.prototype.toString.call(this.$root.doRefresh)) {\n                this.$root.doRefresh(true);\n              }\n            } else {\n              $.omsAlert(msg);\n            }\n          },\n          error: () => {\n            $.omsAlert('网络异常，请重试');\n          }\n        })\n      }\n    }\n  })\n\n  // 页面底部\n  Vue.component('client-footer', {\n    props: ['security', 'total_assets', 'right_capital'],\n    template: `\n      <footer class=\"client-footer\">\n        <div class=\"client-footer__content\">股票市值：{{parseNumber(security, '0.00')}}</div>\n        <div class=\"client-footer__content client-footer__content--warn\">风险系数：{{getRiskRatio()}}</div>\n      </footer>\n    `,\n    data: function(){\n      return {\n      }\n    },\n    methods: {\n      parseNumber: function(v, rule){\n        return numeral(v).format(rule);\n      },\n      getRiskRatio: function(){\n        if (this.right_capital == 0 || undefined == this.right_capital) {\n          return 0;\n          // return '- -';\n        }else{\n          return numeral(this.total_assets / this.right_capital).format('0.00')\n        }\n      }\n    }\n  })\n\n  let client_body = new Vue({\n    el: '#client-body',\n    data: {\n      product_list: [],\n      productInfo: {},\n      cur_product_index: 0,\n      cur_nav: 'account',\n      profit_of_today_v2: 0,\n      profit_of_today_v2_id: '',\n      position_realtime: [],\n      beginDate: (function(){return moment().format('YYYY-MM-DD')})(),\n      endDate: (function(){return moment().format('YYYY-MM-DD')})(),\n      current_data: (function(){return moment().format('YYYY-MM-DD')})(),\n      queryStock: '',\n      chgSelected: '', //选中的报表类型\n      center_list: [], //文件中心所有报表\n      // cur_product_info: {},\n      showArr: [{\n        type: 'positionGrid',\n        display_nav: ['account', 'buy', 'sell'],\n        getDataFn: function(id){\n          this.getPositionRealtimeInfo(id);\n        },\n        tableController: [{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_name'\n        },{\n          tableHead: '当前数量',\n          type: 'text',\n          mapping: 'real_total_amount',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '可卖数量',\n          type: 'text',\n          mapping: 'enable_sell_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '成本价',\n          type: 'text',\n          mapping: 'cost_price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '最新价',\n          type: 'text',\n          mapping: 'market_price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '当前市值',\n          type: 'text',\n          mapping: 'market_value',\n          numeralFormat: '0,0.00'\n        },{\n          tableHead: '浮动盈亏',\n          type: 'text',\n          mapping: 'earning',\n          numeralFormat: '0,0.00',\n          showPositiveSign: true,\n          display: function(value){\n            if (value > 0) {\n              this.controller.customColor = 'red';\n              if (this.controller.showPositiveSign) {\n                return '+' + numeral(value).format(this.controller.numeralFormat)\n              }else{\n                return numeral(value).format(this.controller.numeralFormat)\n              }\n            }else if(value < 0){\n              this.controller.customColor = 'green';\n              return numeral(value).format(this.controller.numeralFormat);\n            }else{\n              this.controller.customColor = '';\n              return numeral(value).format(this.controller.numeralFormat);\n            }\n\n          }\n        },{\n          tableHead: '盈亏比例',\n          type: 'text',\n          mapping: 'earning_ratio',\n          numeralFormat: '0,0.00%',\n          showPositiveSign: true,\n          display: function(value){\n            if (value > 0) {\n              this.controller.customColor = 'red';\n              if (this.controller.showPositiveSign) {\n                return '+' + numeral(value).format(this.controller.numeralFormat)\n              }else{\n                return numeral(value).format(this.controller.numeralFormat)\n              }\n            }else if(value < 0){\n              this.controller.customColor = 'green';\n              return numeral(value).format(this.controller.numeralFormat);\n            }else{\n              this.controller.customColor = '';\n              return numeral(value).format(this.controller.numeralFormat);\n            }\n          }\n        },{\n          tableHead: '卖出冻结',\n          type: 'text',\n          mapping: 'sell_frozen_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '今日买入',\n          type: 'text',\n          mapping: 'today_buy_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '今日卖出',\n          type: 'text',\n          mapping: 'today_sell_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'stock_id',\n          display: function(value){\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            }else if(tmp == 'sz'){\n              return '深圳';\n            }else{\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      },{\n        display_nav: ['buy', 'sell'],\n        type: 'entrustGrid',\n        getDataFn: function(id){\n          this.getEntrustInfo(id);\n        },\n        tableController: [{\n          tableHead: '日期',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('YYYYMMDD');\n          }\n        },{\n          tableHead: '委托时间',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('HH:mm:ss');\n          }\n        },{\n          tableHead: '编号',\n          type: 'text',\n          mapping: 'id'\n        },{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_info.stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_info.stock_name'\n        },{\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'entrust.type',\n          display: function(value){\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            }else if(2 == value){\n              this.controller.customColor = 'blue';\n              return '卖出';\n            }else{\n              return '--';\n            }\n          }\n        },{\n        //   tableHead: '操作方式',\n        //   type: 'text',\n        //   mapping: '',\n        //   display: function(){\n        //     return '交易端';\n        //   }\n        // },{\n          tableHead: '委托状态',\n          type: 'text',\n          mapping: 'status',\n          display: function(value){\n            switch(value.toString()){\n              case '1': return '等待执行';\n              case '2': return '已委托';\n              case '3': return '已退回';\n              case '4': return '部分成交';\n              case '5': return '全部成交';\n              case '6': return '等待撤单';\n              case '7': return '已撤单';\n              case '8': return '废单';\n              case '9': return '已删除';\n\n              //多策略订单合并状态\n              case '101': return '未完成';\n              case '105': return '已完成';\n              case '108': return '已完成（有废单）';\n\n              //刚刚添加的订单\n              case '0': return '提交中..';\n\n              default: return '- -';\n            }\n          }\n        },{\n          tableHead: '委托价格',\n          type: 'text',\n          mapping: 'entrust.price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '委托数量',\n          type: 'text',\n          mapping: 'entrust.amount',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal.amount'\n        },{\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal.price'\n        },{\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal.total',\n          numeralFormat: '0,0.00'\n        },{\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'stock.code',\n          display: function(value){\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            }else if(tmp == 'sz'){\n              return '深圳';\n            }else{\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      },{\n        display_nav: ['revert'],\n        type: 'entrustGridForRevert',\n        getDataFn: function(id){\n          this.getEntrustInfo(id);\n        },\n        tableController: [{\n          type: 'checkbox',\n          mapping: 'checked',\n          disabledMapping: 'disabled'\n        },{\n          tableHead: '委托时间',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('HH:mm:ss');\n          }\n        },{\n          tableHead: '编号',\n          type: 'text',\n          mapping: 'id'\n        },{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_info.stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_info.stock_name'\n        },{\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'entrust.type',\n          display: function(value){\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            }else if(2 == value){\n              this.controller.customColor = 'blue';\n              return '卖出';\n            }else{\n              return '--';\n            }\n          }\n        },{\n        //   tableHead: '操作方式',\n        //   type: 'text',\n        //   mapping: '',\n        //   display: function(){\n        //     return '交易端';\n        //   }\n        // },{\n          tableHead: '委托状态',\n          type: 'text',\n          mapping: 'status',\n          display: function(value){\n            switch(value.toString()){\n              case '1': return '等待执行';\n              case '2': return '已委托';\n              case '3': return '已退回';\n              case '4': return '部分成交';\n              case '5': return '全部成交';\n              case '6': return '等待撤单';\n              case '7': return '已撤单';\n              case '8': return '废单';\n              case '9': return '已删除';\n\n              //多策略订单合并状态\n              case '101': return '未完成';\n              case '105': return '已完成';\n              case '108': return '已完成（有废单）';\n\n              //刚刚添加的订单\n              case '0': return '提交中..';\n\n              default: return '- -';\n            }\n          }\n        },{\n          tableHead: '委托价格',\n          type: 'text',\n          mapping: 'entrust.price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '委托数量',\n          type: 'text',\n          mapping: 'entrust.amount',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal.amount'\n        },{\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal.price'\n        },{\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal.total',\n          numeralFormat: '0,0.00'\n        },{\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'stock.code',\n          display: function(value){\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            }else if(tmp == 'sz'){\n              return '深圳';\n            }else{\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      },{\n        // 持仓／资金股份\n        display_nav: ['position'],\n        type: 'reportPositionGrid',\n        getDataFn: function(id){\n          // 改为以下接口查询\n          this.getPositionRealtimeInfo(id);\n        },\n        tableController: [{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_name'\n        },{\n          tableHead: '当前数量',\n          type: 'text',\n          mapping: 'real_total_amount',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '可卖数量',\n          type: 'text',\n          mapping: 'enable_sell_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '成本价',\n          type: 'text',\n          mapping: 'cost_price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '最新价',\n          type: 'text',\n          mapping: 'market_price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '当前市值',\n          type: 'text',\n          mapping: 'market_value',\n          numeralFormat: '0,0.00'\n        },{\n          tableHead: '浮动盈亏',\n          type: 'text',\n          mapping: 'earning',\n          numeralFormat: '0,0.00',\n          showPositiveSign: true,\n          display: function(value){\n            if (value > 0) {\n              this.controller.customColor = 'red';\n              if (this.controller.showPositiveSign) {\n                return '+' + numeral(value).format(this.controller.numeralFormat)\n              }else{\n                return numeral(value).format(this.controller.numeralFormat)\n              }\n            }else if(value < 0){\n              this.controller.customColor = 'green';\n              return numeral(value).format(this.controller.numeralFormat);\n            }else{\n              this.controller.customColor = '';\n              return numeral(value).format(this.controller.numeralFormat);\n            }\n\n          }\n        },{\n          tableHead: '盈亏比例',\n          type: 'text',\n          mapping: 'earning_ratio',\n          numeralFormat: '0,0.00%',\n          showPositiveSign: true,\n          display: function(value){\n            if (value > 0) {\n              this.controller.customColor = 'red';\n              if (this.controller.showPositiveSign) {\n                return '+' + numeral(value).format(this.controller.numeralFormat)\n              }else{\n                return numeral(value).format(this.controller.numeralFormat)\n              }\n            }else if(value < 0){\n              this.controller.customColor = 'green';\n              return numeral(value).format(this.controller.numeralFormat);\n            }else{\n              this.controller.customColor = '';\n              return numeral(value).format(this.controller.numeralFormat);\n            }\n          }\n        },{\n          tableHead: '卖出冻结',\n          type: 'text',\n          mapping: 'sell_frozen_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '今日买入',\n          type: 'text',\n          mapping: 'today_buy_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '今日卖出',\n          type: 'text',\n          mapping: 'today_sell_volume',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'stock_id',\n          display: function(value){\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            }else if(tmp == 'sz'){\n              return '深圳';\n            }else{\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      },{\n        // 当日委托\n        display_nav: ['entrust_today'],\n        type: 'reportEntrustTodayGrid',\n        getDataFn: function(id){\n          this.getEntrustInfo(id);\n        },\n        tableController: [{\n          tableHead: '日期',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('YYYYMMDD');\n          }\n        },{\n          tableHead: '委托时间',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('HH:mm:ss');\n          }\n        },{\n          tableHead: '编号',\n          type: 'text',\n          mapping: 'id'\n        },{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_info.stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_info.stock_name'\n        },{\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'entrust.type',\n          display: function(value){\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            }else if(2 == value){\n              this.controller.customColor = 'blue';\n              return '卖出';\n            }else{\n              return '--';\n            }\n          }\n        },{\n        //   tableHead: '操作方式',\n        //   type: 'text',\n        //   mapping: '',\n        //   display: function(){\n        //     return '交易端';\n        //   }\n        // },{\n          tableHead: '委托状态',\n          type: 'text',\n          mapping: 'status',\n          display: function(value){\n            switch(value.toString()){\n              case '1': return '等待执行';\n              case '2': return '已委托';\n              case '3': return '已退回';\n              case '4': return '部分成交';\n              case '5': return '全部成交';\n              case '6': return '等待撤单';\n              case '7': return '已撤单';\n              case '8': return '废单';\n              case '9': return '已删除';\n\n              //多策略订单合并状态\n              case '101': return '未完成';\n              case '105': return '已完成';\n              case '108': return '已完成（有废单）';\n\n              //刚刚添加的订单\n              case '0': return '提交中..';\n\n              default: return '- -';\n            }\n          }\n        },{\n          tableHead: '委托价格',\n          type: 'text',\n          mapping: 'entrust.price',\n          numeralFormat: '0,0.000'\n        },{\n          tableHead: '委托数量',\n          type: 'text',\n          mapping: 'entrust.amount',\n          numeralFormat: '0,0'\n        },{\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal.amount'\n        },{\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal.price'\n        },{\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal.total',\n          numeralFormat: '0,0.00'\n        },{\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'stock.code',\n          display: function(value){\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            }else if(tmp == 'sz'){\n              return '深圳';\n            }else{\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      },{\n        // 当日成交\n        display_nav: ['deal_today'],\n        type: 'reportDealTodayGrid',\n        getDataFn: function(id){\n          this.getReportDealTodayInfo(id);\n        },\n        tableController: [{\n          tableHead: '日期',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('YYYYMMDD');\n          }\n        },{\n          tableHead: '成交时间',\n          type: 'text',\n          mapping: 'created_at',\n          display: function(value){\n            return moment(value * 1000).format('HH:mm:ss');\n          }\n        }\n        // ,{\n        //   tableHead: '流水号',\n        //   type: 'text',\n        //   mapping: 'created_at'\n        // },{\n        //   tableHead: '成交编号',\n        //   type: 'text',\n        //   mapping: 'id'\n        // }\n        ,{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_info.stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_info.stock_name'\n        },{\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'entrust.type',\n          display: function(value){\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            }else if(2 == value){\n              this.controller.customColor = 'blue';\n              return '卖出';\n            }else{\n              return '--';\n            }\n          }\n        },{\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal.amount'\n        },{\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal.price'\n        },{\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal.total',\n          numeralFormat: '0,0.00'\n        }\n        // ,{\n        //   tableHead: '委托号',\n        //   type: 'text',\n        //   mapping: 'id'\n        // },{\n        //   tableHead: '申报号',\n        //   type: 'text',\n        //   mapping: 'id'\n        // }\n        ],\n        tableData: []\n      }, {\n        // 历史委托\n        display_nav: ['entrust_history'],\n        type: 'reportEntrustHistoryGrid',\n        getDataFn: function(id) {\n          this.getReportEntrustHistoryInfo(id);\n        },\n        tableController: [{\n          tableHead: '日期',\n          type: 'text',\n          mapping: 'entrust_date'\n        }, {\n          tableHead: '委托时间',\n          type: 'text',\n          mapping: 'entrust_time'\n        }, {\n          tableHead: '编号',\n          type: 'text',\n          mapping: 'id'\n        }, {\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'entrust_stock_code'\n        }, {\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'entrust_stock_name'\n        }, {\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'entrust_type',\n          display: function(value) {\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            } else if (2 == value) {\n              this.controller.customColor = 'blue';\n              return '卖出';\n            } else {\n              return '--';\n            }\n          }\n        }, {\n        //   tableHead: '委托类别',\n        //   type: 'text',\n        //   mapping: 'entrust_system'\n        // }, {\n          tableHead: '委托状态',\n          type: 'text',\n          mapping: 'status_desc'\n        }, {\n          tableHead: '委托价格',\n          type: 'text',\n          mapping: 'entrust_price',\n          numeralFormat: '0,0.000'\n        }, {\n          tableHead: '委托数量',\n          type: 'text',\n          mapping: 'entrust_amount',\n          numeralFormat: '0,0'\n        }, {\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal_volume'\n        }, {\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal_price'\n        }, {\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal_amount',\n          numeralFormat: '0,0.00'\n        }, {\n          tableHead: '市场类别',\n          type: 'text',\n          mapping: 'entrust_stock_code',\n          display: function(value) {\n            var tmp = value.match(/[^\\d\\.]+/)[0].toLowerCase();\n            if (tmp == 'sh') {\n              return '上海';\n            } else if (tmp == 'sz') {\n              return '深圳';\n            } else {\n              return '';\n            }\n          }\n        }],\n        tableData: []\n      }, {\n        // 历史成交\n        display_nav: ['deal_history'],\n        type: 'reportDealHistoryGrid',\n        getDataFn: function(id){\n          this.getReportDealHistoryInfo(id);\n        },\n        tableController: [{\n          tableHead: '日期',\n          type: 'text',\n          mapping: 'deal_date'\n        },{\n          tableHead: '成交时间',\n          type: 'text',\n          mapping: 'deal_time'\n        },{\n        //   tableHead: '流水号',//与alen确认，流水号和成交编号都不要用\n        //   type: 'text',\n        //   mapping: ''\n        // },{\n        //   tableHead: '成交编号',\n        //   type: 'text',\n        //   mapping: ''\n        // },{\n          tableHead: '股票代码',\n          type: 'text',\n          mapping: 'stock_code'\n        },{\n          tableHead: '股票名称',\n          type: 'text',\n          mapping: 'stock_name'\n        },{\n          tableHead: '买卖方向',\n          type: 'text',\n          mapping: 'deal_type',\n          display: function(value){\n            if (1 == value) {\n              this.controller.customColor = 'red';\n              return '买入';\n            }else if(2 == value){\n              this.controller.customColor = 'blue';\n              return '卖出';\n            }else{\n              return '--';\n            }\n          }\n        },{\n        //   tableHead: '委托类别',\n        //   type: 'text',\n        //   mapping: '',\n        //   display: function(){\n        //     return '交易端';\n        //   }\n        // },{\n        //   tableHead: '委托状态',\n        //   type: 'text',\n        //   mapping: 'status'\n        // },{\n        //   tableHead: '委托价格',\n        //   type: 'text',\n        //   mapping: 'entrust.price',\n          // numeralFormat: '0,0.000'\n        // },{\n        //   tableHead: '委托数量',\n        //   type: 'text',\n        //   mapping: 'entrust.amount',\n          // numeralFormat: '0,0'\n        // },{\n          tableHead: '成交数量',\n          type: 'text',\n          mapping: 'deal_volume'\n        },{\n          tableHead: '成交价格',\n          type: 'text',\n          numeralFormat: '0.000',\n          mapping: 'deal_price'\n        },{\n          tableHead: '成交金额',\n          type: 'text',\n          mapping: 'deal_amount',\n          numeralFormat: '0,0.00'\n        // },{\n        //   tableHead: '委托号',\n        //   type: 'text',\n        //   mapping: 'entrust_id'\n        // },{\n        //   tableHead: '申报号',\n        //   type: 'text',\n        //   mapping: 'id'\n        }],\n        tableData: [],\n\n      }],\n    },\n    watch: {\n      cur_nav: function(){\n        let _this = this;\n        // // 只对需要显示的数据进行获取\n        // _this.need_show_arr.forEach(function(e){\n        //   e.tableData = [];\n        //   e.getDataFn.call(_this);\n        // })\n\n        // 为了刷新product的信息\n        this.getProductInfo(this.product_list[this.cur_product_index].id);\n      },\n      beginDate: function(){\n        if (this.cur_nav == 'entrust_history') {\n          this.getReportEntrustHistoryInfo();\n        } else if(this.cur_nav == 'deal_history'){\n          this.getReportDealHistoryInfo(this.product_list[this.cur_product_index].id);\n        }\n      },\n      endDate: function(){\n        if (this.cur_nav == 'entrust_history') {\n          this.getReportEntrustHistoryInfo();\n        }else if(this.cur_nav == 'deal_history'){\n          this.getReportDealHistoryInfo(this.product_list[this.cur_product_index].id);\n        }\n      },\n      chgSelected: function () {\n        this.getCenterList(this.current_data,this.chgSelected);\n      },\n      current_data: function () {\n        this.getCenterList(this.current_data,this.chgSelected);\n      },\n\n    },\n    computed: {\n      cur_product_info:function(){\n\n        let product = this.product_list[this.cur_product_index];\n\n        // if (product) {\n        //   riskCheck.getRulesData([product.id], function(){\n        //     var obj = riskCheck.getPositionInfo({\n        //       total_assets: Infinity,\n        //       net_value: Infinity,\n        //       product_id: product.id\n        //     });\n        //     var risk_arr = [];\n        //     obj.forEach(function(e){\n        //         risk_arr.push({\n        //             net_value: Number(e.net_value),\n        //             position: e.position / 100\n        //         })\n        //     });\n        //     product.risk_line_data = risk_arr.sort(function(a, b){\n        //         return a.net_value < b.net_value;// 排序取出净值最大的数据\n        //     })[0];\n\n        //     product.closing_line_data = risk_arr.filter(function(e){\n        //         return e.position == 0; //取出清仓的数据\n        //     })[0];\n        //   });\n        // }\n        return $.extend({}, product, this.productInfo);\n      },\n      need_show_arr: function(){\n        var _this = this;\n        var tmpArr = [];\n        this.showArr.forEach(function(e){\n          if (e.display_nav.some(function(el){\n            return el == _this.cur_nav;\n          })) {\n            tmpArr.push(e);\n          }\n        })\n        return tmpArr;\n      }\n    },\n    methods: {\n      //下拉列表中产品的数据 文件中心\n      getCenterList: function(current_data,reportType){\n        let _this = this;\n        let date = current_data.split('-').join('');\n        $.startLoading('正在查询');\n        $.ajax({\n          url: '/bms-pub/report/file_list?date='+ parseFloat(date)+'&category='+reportType,\n          type: 'GET',\n          success: ({code,msg,data}) => {\n            if (0 == code) {\n              _this.center_list = data;\n            } else {\n              $.omsAlert(msg);\n            }\n            $.clearLoading();\n          },\n          error: () => {\n            $.omsAlert('网络异常');\n            $.clearLoading();\n          }\n        })\n      },\n      doRefresh: function () { //文件中心刷新\n        this.getCenterList(this.current_data, this.chgSelected)\n      },\n      changeSelectProduct: function(product_id){\n        let _this = this;\n        this.product_list.forEach(function(e, index){\n          if (e.id == product_id) {\n            _this.cur_product_index = index;\n            _this.getProductInfo(_this.product_list[_this.cur_product_index].id);\n            _this.cur_nav = 'account';\n          }\n        })\n      },\n      refresh: function(){\n        // this.getProductInfo(this.product_list[this.cur_product_index].id);\n        this.getProductList();\n      },\n      getProductList: function(){\n        let _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'') + '/oms/helper/get_all_products',\n          data: {\n\n          },\n          success: function({code, data, msg}){\n            if (0 == code) {\n              _this.product_list = data.filter(function(e){\n                return e.is_running == true;\n              });\n              if (_this.product_list.length == 0) {\n                return;\n              }\n              if (_this.product_list.length > _this.cur_product_index) {\n                ;\n              }else{\n                _this.cur_product_index = 0;\n              }\n              _this.getRiskList();\n              \n              _this.getProductInfo(_this.product_list[_this.cur_product_index].id);\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getRiskList(){\n      //获取所有产品的预警线和止损线\n        let product_id_list = this.product_list.map(function(product) {\n          return product.id;\n        });\n        let self = this;\n        riskCheck.getRulesData(product_id_list, function(){\n          self.product_list.forEach((product)=>{\n            var obj = riskCheck.getPositionInfo({\n              total_assets: Infinity,\n              net_value: Infinity,\n              product_id: product.id\n            });\n            var risk_arr = [];\n            obj.forEach(function(e){\n                risk_arr.push({\n                    net_value: Number(e.net_value),\n                    position: e.position / 100\n                })\n            });\n            //计算预警线\n            var tempArr  = risk_arr.sort(function(a, b){ //预警线\n                return a.net_value > b.net_value;// 从小往大排\n            });\n            var obj;//保存当前的预警线对象\n            tempArr.forEach(function(e){\n              if(self.productInfo.net_value>e.net_value){\n                obj = e;\n              }\n            })\n            //判断仓位是否为0\n            if(obj && obj.position != 0 ){\n              product.risk_line_data_net_value = obj.net_value;\n            }\n            //止损线\n            product.closing_line_data = risk_arr.filter(function(e){\n                return e.position == 0; //取出清仓的数据\n            })[0];\n            if(product.closing_line_data){\n              product.closing_line_data_net_value = product.closing_line_data.net_value;\n            }\n          })\n        });\n      },\n      getProductInfo: function(id){\n        let _this = this;\n        $.startLoading('正在加载')\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'')+'/oms/api/get_settlement_info',\n          data: {\n            product_id: id\n          },\n          success: function({code, data, msg}){\n            _this.productInfo = data;\n            // 只对需要显示的数据进行获取\n            _this.need_show_arr.forEach(function(e){\n              e.getDataFn.call(_this, id);\n              $.clearLoading();\n            })\n\n            if (_this.need_show_arr.length == 0) {\n              $.clearLoading();\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getPositionRealtimeInfo: function(id){\n        var _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'')+'/oms/api/position_realtime',\n          data: {\n            product_id: id\n          },\n          success: function({code, msg, data}){\n            if (0 == code) {\n              data.forEach(function(e){\n                e.real_total_amount = e.total_amount - e.entrust_volume;\n              });\n\n              // 额外计算today_earning汇总 － (redeem_fee － manage_fee － other_fee)汇总，得到今日收益\n              let profit_of_today = 0;\n              data.forEach(function(e){\n                profit_of_today += e.today_earning;\n              })\n              _this.profit_of_today_v2 = profit_of_today;\n              _this.profit_of_today_v2_id = _this.cur_product_info.id;\n\n              // 额外记录position_realtime\n              _this.position_realtime = data;\n\n              let newData = data.filter(function(e){\n                return e.real_total_amount != 0;\n              })\n              _this.showArr.forEach(function(e){\n                if (e.type == 'positionGrid') {\n                  e.tableData = newData;\n                }\n                if (e.type == 'reportPositionGrid') {\n                  e.tableData = newData;\n                }\n              })\n\n\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getEntrustInfo: function(id){\n        var _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'')+'/oms/order/get_entrust_list',\n          data: {\n            permission_type: 'product',\n            product_id: id,\n            type: 'all'\n          },\n          success: function({code, msg, data}){\n            if (0 == code) {\n              // 获取所有的股票id，查询股票信息，附到tableData上\n              var stock_id_arr = [];\n              data.list.forEach(function(e){\n                if (!stock_id_arr.some(function(el){\n                  return el == e.stock.code;\n                })) {\n                  stock_id_arr.push(e.stock.code);\n                }\n              });\n\n              $.ajax({\n                url: (window.REQUEST_PREFIX||'')+'/oms/helper/stock_brief',\n                data: {\n                  stock_id: stock_id_arr.join(',')\n                },\n                success: function(res){\n                  if (0 == res.code) {\n                    data.list.forEach(function(e){\n                      res.data.forEach(function(el){\n                        if (el.stock_id == e.stock.code) {\n                          e.stock_info = el;\n                        }\n                      })\n                      e.checked = false;\n                    });\n\n                    _this.showArr.forEach(function(e){\n                      if (e.type == 'entrustGrid') {\n                        e.tableData = data.list;\n                      }\n                      if (e.type == 'entrustGridForRevert') {\n                        let afterFilter = data.list.filter(function(el){\n                          // 等待执行 1\n                          // 已委托  2\n                          // 部分成交 4\n                          // 等待撤单 6\n                          // 另外 cancel_status不为1或者2\n                          return (el.status == 1 || el.status == 2 || el.status == 4 || el.status == 6) && (el.cancel_status != 2);\n                        });\n                        afterFilter.forEach(function(el){\n                          if (el.status == 6) {\n                            el.disabled = true;\n                          }else{\n                            el.disabled = false;\n                          }\n                        })\n                        e.tableData = afterFilter;\n                      }\n                      if (e.type == 'reportEntrustTodayGrid') {\n                        e.tableData = data.list;\n                      }\n                    })\n                  }\n                },\n                error: function(){\n                  console.log('error');\n                }\n              })\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getReportDealTodayInfo: function(id){\n        let _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'') + '/oms/order/get_deal_list',\n          data: {\n            permission_type: 'product',\n            product_id: id\n          },\n          success: function({code, msg, data}){\n            if (0 == code || 500901 == code) {\n              // _this.showArr.forEach(function(e){\n              //   if (e.type == 'reportDealTodayGrid') {\n              //     e.tableData = data.list;\n              //   }\n              // })\n\n              // 获取所有的股票id，查询股票信息，附到tableData上\n              var stock_id_arr = [];\n              data.list.forEach(function(e){\n                if (!stock_id_arr.some(function(el){\n                  return el == e.stock.code;\n                })) {\n                  stock_id_arr.push(e.stock.code);\n                }\n              });\n\n              $.ajax({\n                url: (window.REQUEST_PREFIX||'')+'/oms/helper/stock_brief',\n                data: {\n                  stock_id: stock_id_arr.join(',')\n                },\n                success: function(res){\n                  if (0 == res.code) {\n                    data.list.forEach(function(e){\n                      res.data.forEach(function(el){\n                        if (el.stock_id == e.stock.code) {\n                          e.stock_info = el;\n                        }\n                      })\n                      e.checked = false;\n                    });\n\n                    _this.showArr.forEach(function(e){\n                      if (e.type == 'reportDealTodayGrid') {\n                        e.tableData = data.list;\n                      }\n                    })\n                  }\n                },\n                error: function(){\n                  console.log('error');\n                }\n              })\n            }else{\n              $.omsAlert(msg);\n              // if (500901 == code) {\n              //   _this.showArr.forEach(function(e){\n              //     if (e.type == 'reportDealTodayGrid') {\n              //       e.tableData = data.list;\n              //     }\n              //   })\n              // }\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      getReportEntrustHistoryInfo: function(){\n        let _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'') + '/oms/report/report_list/entrust',\n          type: 'get',\n          data: {\n            page: 1,\n            count: 999,\n            start: this.beginDate,\n            end: this.endDate,\n            product_id: this.cur_product_info.id\n          },\n          success: function(res){\n            if (0 == res.code) {\n              _this.showArr.forEach(function(e){\n                if (e.type == 'reportEntrustHistoryGrid') {\n                  e.tableData = res.data.data;\n                }\n              })\n            }else{\n              if (500901 == res.code) {\n                _this.showArr.forEach(function(e){\n                  if (e.type == 'reportEntrustHistoryGrid') {\n                    e.tableData = [];\n                  }\n                })\n              }else{\n                $.omsAlert(res.msg);\n              }\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        });\n      },\n      getReportDealHistoryInfo: function(id){\n        let _this = this;\n        $.ajax({\n          url: (window.REQUEST_PREFIX||'') + '/oms/report/report_list/deal',\n          type: 'get',\n          data: {\n            page: 1,\n            count: 999,\n            start: this.beginDate,\n            end: this.endDate,\n            product_id: id\n          },\n          success: function(res){\n            if (0 == res.code) {\n              _this.showArr.forEach(function(e){\n                if (e.type == 'reportDealHistoryGrid') {\n                  e.tableData = res.data.data;\n                }\n              })\n            }else{\n              if (500901 == res.code) {\n                _this.showArr.forEach(function(e){\n                  if (e.type == 'reportDealHistoryGrid') {\n                    e.tableData = [];\n                  }\n                })\n              }else{\n                 $.omsAlert(res.msg);\n              }\n            }\n          },\n          error: function(){\n            console.log('error');\n          }\n        })\n      },\n      tr_click(index,row){\n        //调用子节点的方法 修改交易模块的股票代码id和股票名称\n        let stock=row.stock_id;\n        let name=row.stock_name;\n        if(!stock){\n          stock = row.stock_info.stock_id\n        }\n        if(!name){\n          name = row.stock_info.stock_name\n        }\n        this.$refs.client_trader.selectOneStock(stock,name);\n\n      }\n    }\n  })\n\n  client_body.getProductList();\n})\n"]}
{"version":3,"sources":["oms/instruction/review.js"],"names":["tableData_wait","th","show_type","name","class_name","float","tableData_result","review_vm","Vue","el","data","template","mounted","self","review_ajax","checkarr","Array","list_data","length","i","setInterval","watch","status","ele","table_data","methods","doExport","window","location","href","REQUEST_PREFIX","LOGIN_INFO","org_id","loading","url","$","get","done","res","code","isObjectValueEqual","list","omsAlert","msg","fail","failNotice","bind","always","get_sec_with_th","list_item","route","split","temp","forEach","get_secStyle_with_th","result","review_status","btn_click","btn_refresh","btn_pass","index","push","instruction","id","join","post","refuse_reason","ins_amount","btn_refuse","check_all","event","target","checked","check_one","bool","checkAll","a","b","JSON","stringify"],"mappings":"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","file":"review.js","sourcesContent":["/**\n * Author: jiangjian; liuzeyafzy@gmail.com\n * 指令审核\n */\n\nvar tableData_wait = [{\n  th: \"stock.stock_code\", //证劵代码\n  show_type: 'checkbox',\n  name: \"证券代码\",\n  class_name: \"vue_text_default\",\n  float: 'right'\n}, {\n  th: \"stock.stock_name\",\n  show_type: \"text\",\n  name: \"证券名称\",\n  class_name: \"vue_text_default\",\n  float: 'right'\n}, {\n  th: \"stock.market_name\",\n  show_type: \"text\",\n  name: \"交易市场\",\n  class_name: \"vue_text_default\",\n  float: 'right'\n}, {\n  th: \"gathering.product_name_list\",\n  show_type: \"text\",\n  name: \"产品账户\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n},{\n  th: \"gathering.unit_name_list\",\n  show_type: \"text\",\n  name: \"单元名称\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"instruction.invest_type\",\n  show_type: \"text\",\n  name: \"投资类型\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"gathering.deal_direction_name\",\n  show_type: \"text\",\n  name: \"买卖标记\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"gathering.price\",\n  show_type: \"text\",\n  name: \"价格\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"gathering.ins_amount\",\n  show_type: \"text\",\n  name: \"指令数量\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"gathering.ins_balance\",\n  show_type: \"text\",\n  name: \"金额\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"instruction.entrust_flag\",\n  show_type: \"text\",\n  name: \"标识\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.ins_id\",\n  show_type: \"text\",\n  name: \"原委托序号\",\n  class_name: \"\",\n  float: 'left'\n}, {\n  th: \"instruction.creator_name\",\n  show_type: \"text\",\n  name: \"创建人\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.created_at\",\n  show_type: \"text\",\n  name: \"创建时间\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.comment\",\n  show_type: \"text\",\n  name: \"备注\",\n  class_name: \"overhide\",\n  float: 'right'\n}, {\n  th: \"instruction.status_desc\",\n  show_type: \"text\",\n  name: \"审批状态\",\n  class_name: \"vue_input_default\",\n  float: 'left'\n}];\n\nvar tableData_result = [{\n  th: \"stock.stock_code\", //证劵代码\n  show_type: 'text',\n  name: \"证券代码\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"stock.stock_name\",\n  show_type: \"text\",\n  name: \"证券名称\",\n  class_name: \"vue_text_default\",\n  float: 'right'\n}, {\n  th: \"gathering.product_name_list\",\n  show_type: \"text\",\n  name: \"产品账户\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"gathering.unit_name_list\",\n  show_type: \"text\",\n  name: \"单元名称\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"instruction.invest_type\",\n  show_type: \"text\",\n  name: \"投资类型\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"gathering.deal_direction_name\",\n  show_type: \"text\",\n  name: \"买卖标记\",\n  class_name: \"vue_number_default\",\n  float: 'right'\n}, {\n  th: \"gathering.price\",\n  show_type: \"text\",\n  name: \"价格\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"gathering.ins_amount\",\n  show_type: \"text\",\n  name: \"指令数量\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"gathering.ins_balance\",\n  show_type: \"text\",\n  name: \"金额\",\n  class_name: \"vue_number_default\",\n  float: 'left'\n}, {\n  th: \"instruction.entrust_flag\",\n  show_type: \"text\",\n  name: \"标识\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.ins_id\",\n  show_type: \"text\",\n  name: \"原委托序号\",\n  class_name: \"vue_input_default\",\n  float: 'left'\n}, {\n  th: \"instruction.creator_name\",\n  show_type: \"text\",\n  name: \"创建人\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.created_at\",\n  show_type: \"text\",\n  name: \"创建时间\",\n  class_name: \"vue_input_default\",\n  float: 'right'\n}, {\n  th: \"instruction.review_username\",\n  show_type: \"text\",\n  name: \"审批人\",\n  class_name: \"vue_input_default\",\n  float: 'left'\n}, {\n  th: \"instruction.review_time\",\n  show_type: \"text\",\n  name: \"审批时间\",\n  class_name: \"vue_input_default\",\n  float: 'left'\n}, {\n  th: \"instruction.comment\",\n  show_type: \"text\",\n  name: \"备注\",\n  class_name: \"overhide\",\n  float: 'right'\n}, {\n  th: \"instruction.status_desc\",\n  show_type: \"text\",\n  name: \"审批状态\",\n  class_name: \"vue_input_default\",\n  float: 'left'\n}];\n\nvar review_vm = new Vue({\n  el:'[review_top]',\n  data:{\n    'table_data':tableData_wait,\n    'status':\"wait\",\n    'list_data':[],\n    'timer':'',\n    'checkarr':[],\n    'checkAll':false,\n    'newdata':'',\n    'loading':false,\n  },\n  template:`\n    <div style=\"background: white; padding: 0 0 20px;flex:1\">\n      <div class=\"review_top\">\n        <h2>指令审批</h2>\n        <button class=\"pass\" @click=\"btn_pass\" v-show=\"status=='wait'\">通过</button>\n        <button class=\"refuse\" @click=\"btn_refuse\" v-show=\"status=='wait'\">拒绝</button>\n        <div class=\"btn-box\">\n          <label><input name=\"approval\" type=\"radio\" value=\"\" checked @click=\"btn_click('wait')\"/>待审批指令 </label> \n          <label><input name=\"approval\" type=\"radio\" value=\"\" @click=\"btn_click('done')\" />已审批指令 </label>\n          <a v-if=\"status=='done'\" style=\"height: 32px;display: inline-block;line-height: 32px;background-color: #e8e9ed;border-radius: 4px;\" class=\"custom-grey-btn custom-grey-btn__export\" :class=\"{'doBtnExport_bgd': true}\"  v-on:click=\"doExport()\">\n            <i class=\"oms-icon oms-icon-export\"></i>导出\n          </a>\n          <a refresh-btn=\"\" @click=\"btn_refresh\" v-bind:class=\"{'loading': loading}\" class=\"refresh oms-btn gray refresh-btn loading-loading right\" href=\"javascript:;\"><i class=\"oms-icon refresh\"></i>刷新</a>\n        </div>\n      </div>\n      <div class=\"review_section\" >\n        <table class=\"newweb-common-grid\">\n          <tbody>\n            <tr>\n              <th v-for=\"(item,index) in table_data\" :style=\"{'text-align':item.float}\"\">\n                  <input type=\"checkbox\"  v-if=\"item.show_type=='checkbox'\" @change=\"check_all\" v-model=checkAll />\n                  <span>{{item.name}}</span>\n              </th>\n            </tr>\n            <tr v-for=\"(list_item,list_index) in list_data\">\n              <td v-for=\"(head_item,head_index) in table_data\" :style=\"{'text-align':head_item.float}\" :class=\"{'overhide':head_item.class_name == 'overhide'}\">\n                <input type=\"checkbox\" v-if=\"head_item.show_type=='checkbox'\" @change=\"check_one\" v-model=checkarr[list_index] />\n                <span v-if=\"head_item.class_name == 'overhide'\" :title=\"get_sec_with_th(list_item,head_item.th)\" v-bind:style=\"get_secStyle_with_th(list_item,head_item.th)\" v-html=\"get_sec_with_th(list_item,head_item.th)\"></span>\n                <span v-else v-bind:style=\"get_secStyle_with_th(list_item,head_item.th)\">{{ get_sec_with_th(list_item,head_item.th) }}</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div> \n    </div>\n  `,\n  mounted(){\n    let self = this;\n    this.review_ajax();\n    this.checkarr  = new Array(this.list_data.length);\n    for(let i =0;i<this.checkarr.length;i++){\n      this.checkarr[i]  = false;\n    };\n\n    setInterval(function(){\n      self.review_ajax();\n    }, 1000 * 3);\n  },\n  watch:{\n    status(ele){\n      if(ele == \"done\"){\n        this.table_data = tableData_result;\n      }\n      if(ele == \"wait\"){\n        this.table_data = tableData_wait;\n      }\n    },\n    // list_data(){\n    //   this.checkarr  = new Array(this.list_data.length);\n    //   for(let i =0;i<this.checkarr.length;i++){\n    //     this.checkarr[i]  = false;\n    //   }\n    // }\n  },\n  methods:{\n    doExport: function(){\n      window.location.href = window.REQUEST_PREFIX + '/sync/pb_ins/export_reviewed' +'?org_id='+window.LOGIN_INFO.org_id;\n\n      // let _this = this;\n      // $.ajax({\n      //   url: window.REQUEST_PREFIX + '/sync/pb_ins/export_reviewed',\n      //   data: {\n      //     org_id: window.LOGIN_INFO.org_id\n      //   },\n      //   type: 'get',\n      //   success: function({msg, code, data}){\n      //     if (0 == code) {\n\n      //     }else{\n      //       $.omsAlert(msg);\n      //     }\n      //   },\n      //   error: function(){\n      //       $.omsAlert('网络异常');\n      //   }\n      // })\n    },\n    review_ajax(){\n      var self = this;\n      if(!this.loading){\n        var url = (window.REQUEST_PREFIX||'')+'/sync/pb_ins/review_lists?status='+this.status;\n        self.loading = true;\n        $.get(url,\"\").done(function(res){\n          if(res.code == 0){\n            if(!self.isObjectValueEqual(self.list_data,res.data.list)){\n              self.list_data = res.data.list;\n\n              self.checkarr  = new Array(self.list_data.length);\n              for(let i =0; i<self.checkarr.length;i++){\n                self.checkarr[i]  = false;\n              }\n            }\n          }else{\n            $.omsAlert(res.msg);\n          }\n          self.loading = false;\n        }).fail($.failNotice.bind(null,url)).always(function(){\n          self.loading = false;\n        });\n      }\n    },\n    get_sec_with_th(list_item,th){\n      let route =  th.split('.');\n      let temp = list_item;\n      route.forEach(function(ele){\n        temp = temp[ele];\n      })\n      if(th==\"instruction.review_status\"){\n        if(temp == 0){\n          temp = \"已撤销\"\n        }\n        if(temp == 1){\n          temp = \"审批通过\"\n        }\n        if(temp == 2){\n          temp = \"审批拒绝\"\n        }\n        if(temp == 3){\n          temp = \"待审批\"\n        }\n      }\n\n      return temp;\n    },\n    get_secStyle_with_th(list_item,th){\n      let route =  th.split('.');\n      let temp = list_item;\n      route.forEach(function(ele){\n        temp = temp[ele];\n      })\n\n      if(th==\"instruction.status_desc\"){\n\n        let result =  list_item['instruction'].review_status\n        if(result == 0){\n          temp = \"color: black;\"\n        }\n        if(result == 1){\n          temp = \"color: black;\"\n        }\n        if(result == 2){\n          temp = \"color: #F44336;\"\n        }\n        if(result == 3){\n          temp = \"color: #F44336;\"\n        }\n      }\n      return temp;\n    },\n    btn_click(status){\n      this.status = status;\n      this.list_data = [];\n      this.checkarr  = new Array(this.list_data.length);\n      for(let i =0; i<this.checkarr.length;i++){\n        this.checkarr[i]  = false;\n      }\n      this.review_ajax();\n    },\n    btn_refresh(){\n      this.review_ajax();\n    },\n    btn_pass(){\n      let temp = [];\n      var self = this;\n      this.checkarr.forEach(function(ele,index){\n        if(ele){\n          temp.push(self.list_data[index].instruction.id)\n        }\n      });\n      if (0 == temp.length) {\n        $.omsAlert('请选择指令');\n        return;\n      }\n      let result = temp.join(',');\n\n      if(result){\n        var self = this;\n        var url = (window.REQUEST_PREFIX||'')+'/sync/pb_ins/review';\n        self.loading = true;\n        $.post(url,{\n          id:result,\n          review_status:1,\n          refuse_reason:\"\",\n          ins_amount:'',\n        }).done(function(res){\n          if(res.code == 0){\n            $.omsAlert('指令审批成功');\n          }else{\n            $.omsAlert(res.msg);\n          }\n          self.loading = false;\n          self.review_ajax();\n        }).fail(()=>{\n          $.failNotice.bind(null,url).always(function(){\n            $.omsAlert('指令审批失败');\n            self.loading = false\n          })\n        })\n      }\n    },\n    btn_refuse(){\n      let temp = [];\n      var self = this;\n      this.checkarr.forEach(function(ele,index){\n        if(ele){\n          temp.push(self.list_data[index].instruction.id)\n        }\n      });\n      if (0 == temp.length) {\n        $.omsAlert('请选择指令');\n        return;\n      }\n      let result = temp.join(',');\n      if(result){\n        var self = this;\n        // clearTimeout(this.timer)\n        var url = (window.REQUEST_PREFIX||'')+'/sync/pb_ins/review';\n        self.loading = true\n        $.post(url,{id:result,review_status:2,refuse_reason:\"\"}).done(function(res){\n          if(res.code == 0){\n            $.omsAlert('指令审批成功');\n          }else{\n            $.omsAlert(res.msg);\n          }\n          self.loading = false\n          self.review_ajax();\n        }).fail(()=>{\n          $.failNotice.bind(null,url).always(function(){\n            $.omsAlert('指令审批失败');\n            self.loading = false\n          })\n        });\n      }\n    },\n    check_all(event){\n      //全选按钮\n      this.checkarr  = new Array(this.list_data.length);\n      for(let i =0;i<this.checkarr.length;i++){\n        this.checkarr[i]  = event.target.checked;\n      }\n    },\n    check_one(){\n      //列表checkbox\n      let bool = true;\n      this.checkarr.forEach(function(ele){\n        if( ele== false){\n          bool = false\n        }\n      })\n      if(bool){\n        this.checkAll = true;\n      }else{\n        this.checkAll = false;\n      }\n    },\n    isObjectValueEqual(a, b) {\n      return JSON.stringify(b) ==  JSON.stringify(a)\n    }\n  }\n})\n\n"]}
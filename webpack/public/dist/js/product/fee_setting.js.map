{"version":3,"sources":["product/fee_setting.js"],"names":["JS_fee_setting","prefix","validPreVal","feeStaticData","type","market","name","sh_fee_prefix","sz_fee_prefix","fee_prefix","fee_suffix","fee_unit","has_upper_limit","has_lower_limit","fee_limit_unit","fee_text","showRate","fee_textNext","initProductHeader","productMenu","Vue","el","data","active","permission","FD","disabled","fee_mode","methods","goto","e","li","$","currentTarget","hasClass","location","href","attr","product_id","feeList","computed","rulesStockLevy","arr","rulesInfo","forEach","status","fee_rate","numeral","format","fee_lower_limit","fee_upper_limit","sh_fee_rate","sh_fee_lower_limit","sh_fee_upper_limit","sz_fee_rate","sz_fee_lower_limit","sz_fee_upper_limit","push","rulesFundLevy","rulesCommonLevy","rulesStockExempt","rulesFundExempt","rulesCommonExempt","editData","id","fee_type","displayInfo","a","watch","handler","val","oldVal","flag","test","Object","assign","deep","toggleDidplay","v","doEdit","_this","doExempt","changeStatus","doLevy","startLoading","ajax","url","success","code","msg","clearLoading","omsAlert","getRulesInfo","error","failNotice","cancelEdit","saveEdit","isNaN","Number","ajaxData","hasFeeLowerLimit","rtn","hasFeeUpperLimit","getFeeName","getFeePrefix","preStr","getFeeUnit","getFeeSuffix","getFeeText","rate","urlBack","doSaveTpl","document","on"],"mappings":"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","file":"fee_setting.js","sourcesContent":["/**\n * author: liuzeyafzy\n * 费用信息页面\n */\nfunction JS_fee_setting(prefix){\n  let validPreVal;\n  // market 1股票 2基金 0公关费用\n  var feeStaticData = [{\n    type: 1,\n    market: 1,\n    name: '印花税',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：卖出时单向收取'//、上交所/深交所收取\n  },{\n    type: 2,\n    market: 1,\n    name: '过户费',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双方收取'//、上交所/深交所收取\n  },{\n    type: 3,\n    market: 1,\n    name: '经手费',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双向收取'//、上交所收取\n  },{\n    type: 3,\n    market: 2, //基金\n    name: '经手费',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双向收取（货币ETF、债券ETF暂免）'\n  },{\n    type: 4,\n    market: 1,\n    name: '证管费',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双向收取'//、上交所收取\n  },{\n    type: 5,\n    market: 1,\n    name: '交易佣金',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: true,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双向收取'//、上交所/深交所收取\n  },{\n    type: 5,\n    market: 2, //基金\n    name: '交易佣金',\n    sh_fee_prefix: '上交所：',\n    sz_fee_prefix: '深交所：',\n    fee_prefix: '按成交金额的',\n    fee_suffix: '收取',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: true,\n    fee_limit_unit: '元',\n    fee_text: '收取规则：买卖双向收取'\n  },{\n    type: 6,\n    market: 0,\n    name: '管理费',\n    fee_prefix: '净资产的年化',\n    fee_suffix: '',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    showRate: true,\n    fee_text: '收取规则：每日计提（每日计提管理费=当前资产总值*',\n    fee_textNext: '‰）/当年天数'\n  },{\n    type: 7,\n    market: 0,\n    name: '退出费',\n    fee_prefix: '净资产的年化',\n    fee_suffix: '',\n    fee_unit: '‰',\n    has_upper_limit: false,\n    has_lower_limit: false,\n    fee_limit_unit: '元',\n    showRate: true,\n    fee_text: '收取规则：每日计提（每日计退出费=当前资产总值*',\n    fee_textNext: '‰）/当年天数'\n  }];\n\n  initProductHeader(prefix);\n\n  // FD.org_info\n  let productMenu = new Vue({\n    el: '#productMenu',\n    data: {\n      active: 'fee_setting',\n      permission: FD.permission,\n      disabled: (FD.fee_mode == 1) ? 'fee_setting' : ''\n    },\n    methods: {\n      goto: function goto(e) {\n        var li = $(e.currentTarget);\n        if (!li.hasClass('active') && !li.hasClass('disabled')) {\n          location.href = prefix + '/product/' + li.attr('data-str') + '?product_id=' + FD.product_id;\n        }\n      }\n    }\n  });\n  \n  let feeList = new Vue({\n    el: '#rules_content',\n    computed: {\n      rulesStockLevy: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 1 && e.status == 0) { //status 0征收 1免征； market 1股票 2基金 0公共费用\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            e.sh_fee_rate = numeral(e.sh_fee_rate).format( '0,0.000000' );\n            e.sh_fee_lower_limit = numeral(e.sh_fee_lower_limit).format( '0,0.000' );\n            e.sh_fee_upper_limit = numeral(e.sh_fee_upper_limit).format( '0,0.000' );\n            e.sz_fee_rate = numeral(e.sz_fee_rate).format( '0,0.000000' );\n            e.sz_fee_lower_limit = numeral(e.sz_fee_lower_limit).format( '0,0.000' );\n            e.sz_fee_upper_limit = numeral(e.sz_fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr; \n      },\n      rulesFundLevy: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 2 && e.status == 0) {\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            e.sh_fee_rate = numeral(e.sh_fee_rate).format( '0,0.000000' );\n            e.sh_fee_lower_limit = numeral(e.sh_fee_lower_limit).format( '0,0.000' );\n            e.sh_fee_upper_limit = numeral(e.sh_fee_upper_limit).format( '0,0.000' );\n            e.sz_fee_rate = numeral(e.sz_fee_rate).format( '0,0.000000' );\n            e.sz_fee_lower_limit = numeral(e.sz_fee_lower_limit).format( '0,0.000' );\n            e.sz_fee_upper_limit = numeral(e.sz_fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr; \n      },\n      rulesCommonLevy: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 0 && e.status == 0) {\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr;\n      },\n      rulesStockExempt: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 1 && e.status == 1) {\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            e.sh_fee_rate = numeral(e.sh_fee_rate).format( '0,0.000000' );\n            e.sh_fee_lower_limit = numeral(e.sh_fee_lower_limit).format( '0,0.000' );\n            e.sh_fee_upper_limit = numeral(e.sh_fee_upper_limit).format( '0,0.000' );\n            e.sz_fee_rate = numeral(e.sz_fee_rate).format( '0,0.000000' );\n            e.sz_fee_lower_limit = numeral(e.sz_fee_lower_limit).format( '0,0.000' );\n            e.sz_fee_upper_limit = numeral(e.sz_fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr;\n      },\n      rulesFundExempt: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 2 && e.status == 1) {\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            e.sh_fee_rate = numeral(e.sh_fee_rate).format( '0,0.000000' );\n            e.sh_fee_lower_limit = numeral(e.sh_fee_lower_limit).format( '0,0.000' );\n            e.sh_fee_upper_limit = numeral(e.sh_fee_upper_limit).format( '0,0.000' );\n            e.sz_fee_rate = numeral(e.sz_fee_rate).format( '0,0.000000' );\n            e.sz_fee_lower_limit = numeral(e.sz_fee_lower_limit).format( '0,0.000' );\n            e.sz_fee_upper_limit = numeral(e.sz_fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr;\n      },\n      rulesCommonExempt: function(){\n        let arr = [];\n        this.rulesInfo.forEach(function(e){\n          if (e.market == 0 && e.status == 1) {\n            e.fee_rate = numeral(e.fee_rate).format( '0,0.000000' );\n            e.fee_lower_limit = numeral(e.fee_lower_limit).format( '0,0.000' );\n            e.fee_upper_limit = numeral(e.fee_upper_limit).format( '0,0.000' );\n            arr.push(e);\n          }\n        });\n        return arr;\n      }\n    },\n    data: {\n      editData: {\n        id: '',\n        market: '',\n        fee_type: '',\n        fee_rate: '',\n        fee_upper_limit: '',\n        fee_lower_limit: ''\n      },\n      displayInfo: {\n        rulesStockLevy: true,\n        rulesFundLevy: true,\n        rulesCommonLevy: true,\n        rulesStockExempt: true,\n        rulesFundExempt: true,\n        rulesCommonExempt: true\n      },\n      rulesInfo: [],\n      a: []\n    },\n    watch: {\n      editData: {\n        handler: function(val, oldVal){\n          var flag = false;\n          if (/^\\d+\\.?\\d{0,6}$/.test(val.fee_rate) || val.fee_rate == '' || val.fee_rate == 0) {\n            ;\n          }else{\n            flag = true;\n            val.fee_rate = numeral(validPreVal).format( '0,0.000000' );\n          }\n\n          if (/^\\d+\\.?\\d{0,3}$/.test(val.fee_upper_limit) || val.fee_upper_limit == '' || val.fee_upper_limit == 0) {\n            ;\n          }else{\n            flag = true;\n            val.fee_upper_limit = numeral(validPreVal).format( '0,0.000' );\n          }\n\n          if (/^\\d+\\.?\\d{0,3}$/.test(val.fee_lower_limit) || val.fee_lower_limit == '' || val.fee_lower_limit == 0) {\n            ;\n          }else{\n            flag = true;\n            val.fee_lower_limit = numeral(validPreVal).format( '0,0.000' );\n          }\n\n          // market不为0，则不是“其他费用”，那么额外判断 sh_ 和 sz_ 开头的数据\n          if (val.market != 0) {\n            if (/^\\d+\\.?\\d{0,6}$/.test(val.sh_fee_rate) || val.sh_fee_rate == '' || val.sh_fee_rate == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sh_fee_rate = numeral(validPreVal).format( '0,0.000000' );\n            }\n\n            if (/^\\d+\\.?\\d{0,3}$/.test(val.sh_fee_upper_limit) || val.sh_fee_upper_limit == '' || val.sh_fee_upper_limit == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sh_fee_upper_limit = numeral(validPreVal).format( '0,0.000' );\n            }\n\n            if (/^\\d+\\.?\\d{0,3}$/.test(val.sh_fee_lower_limit) || val.sh_fee_lower_limit == '' || val.sh_fee_lower_limit == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sh_fee_lower_limit = numeral(validPreVal).format( '0,0.000' );\n            }\n\n            if (/^\\d+\\.?\\d{0,6}$/.test(val.sz_fee_rate) || val.sz_fee_rate == '' || val.sz_fee_rate == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sz_fee_rate = numeral(validPreVal).format( '0,0.000000' );\n            }\n\n            if (/^\\d+\\.?\\d{0,3}$/.test(val.sz_fee_upper_limit) || val.sz_fee_upper_limit == '' || val.sz_fee_upper_limit == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sz_fee_upper_limit = numeral(validPreVal).format( '0,0.000' );\n            }\n\n            if (/^\\d+\\.?\\d{0,3}$/.test(val.sz_fee_lower_limit) || val.sz_fee_lower_limit == '' || val.sz_fee_lower_limit == 0) {\n              ;\n            }else{\n              flag = true;\n              val.sz_fee_lower_limit = numeral(validPreVal).format( '0,0.000' );\n            }\n          }\n\n          if (true == flag) {\n            this.editData = Object.assign({}, this.editData, val);\n          }\n        },\n        deep: true\n      }\n    },\n    methods: {\n      toggleDidplay: function(v){\n        this.displayInfo[v] = !this.displayInfo[v];\n      },\n      doEdit: function(id){\n        var _this = this;\n        this.rulesInfo.forEach(function(e){\n          if (e.id == id) {\n            _this.editData = {\n              id: id,\n              market: e.market,\n              fee_type: e.fee_type,\n              fee_rate: numeral(e.fee_rate).format( '0,0.000000' ),\n              fee_upper_limit: numeral(e.fee_upper_limit).format( '0,0.000' ),\n              fee_lower_limit: numeral(e.fee_lower_limit).format( '0,0.000' ),\n\n              sh_fee_rate: numeral(e.sh_fee_rate).format( '0,0.000000' ),\n              sh_fee_lower_limit: numeral(e.sh_fee_lower_limit).format( '0,0.000' ),\n              sh_fee_upper_limit: numeral(e.sh_fee_upper_limit).format( '0,0.000' ),\n              sz_fee_rate: numeral(e.sz_fee_rate).format( '0,0.000000' ),\n              sz_fee_lower_limit: numeral(e.sz_fee_lower_limit).format( '0,0.000' ),\n              sz_fee_upper_limit: numeral(e.sz_fee_upper_limit).format( '0,0.000' )\n            };\n          }\n        });\n      },\n      doExempt: function(id){\n        let _this = this;\n        this.rulesInfo.forEach(function(e){\n          if (e.id == id) {\n            // e.status = 1;\n            _this.changeStatus(id, 1);\n          }\n        });\n      },\n      doLevy: function(id){\n        let _this = this;\n        this.rulesInfo.forEach(function(e){\n          if (e.id == id) {\n            // e.status = 0;\n            _this.changeStatus(id, 0);\n          }\n        });\n      },\n      changeStatus: function(id, status){\n        let _this = this;\n        $.startLoading('正在修改...');\n        $.ajax({\n          url: prefix + '/portfolio/fee-update-status',\n          type: 'post',\n          data: {\n            id: id,\n            status: status\n          },\n          success: function({code, msg, data}){\n            $.clearLoading();\n            if (0 == code) {\n              $.omsAlert('修改成功');\n              _this.getRulesInfo();\n            }else{\n              $.omsAlert(msg);\n            }\n          },\n          error: function(){\n            $.clearLoading();\n            $.failNotice('网络失败，请重试');\n          }\n        })\n      },\n      cancelEdit: function(){\n        this.editData = {\n          id: '',\n          market: '',\n          fee_type: '',\n          fee_rate: '',\n          fee_upper_limit: '',\n          fee_lower_limit: ''\n        };\n      },\n      saveEdit: function(){\n        let _this = this;\n        let id = this.editData.id;\n        let fee_rate = this.editData.fee_rate;\n        let fee_upper_limit = this.editData.fee_upper_limit;\n        let fee_lower_limit = this.editData.fee_lower_limit;\n\n        let sh_fee_rate = this.editData.sh_fee_rate;\n        let sh_fee_upper_limit = this.editData.sh_fee_upper_limit;\n        let sh_fee_lower_limit = this.editData.sh_fee_lower_limit;\n        let sz_fee_rate = this.editData.sz_fee_rate;\n        let sz_fee_upper_limit = this.editData.sz_fee_upper_limit;\n        let sz_fee_lower_limit = this.editData.sz_fee_lower_limit;\n\n        var status = true;\n        if (isNaN(Number(fee_rate)) || false == /^\\-?\\d+(\\.\\d{1,6})?$/.test(fee_rate) || '' == fee_rate) {\n          status = false;\n        }\n        if (isNaN(Number(fee_upper_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(fee_upper_limit) || '' == fee_upper_limit) {\n          status = false;\n        }\n        if (isNaN(Number(fee_lower_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(fee_lower_limit) || '' == fee_lower_limit) {\n          status = false;\n        }\n\n        var ajaxData = {\n          id: id,\n          fee_rate: fee_rate,\n          fee_upper_limit: fee_upper_limit,\n          fee_lower_limit: fee_lower_limit\n        };\n\n        // market不为0，则不是“其他费用”，那么额外判断 sh_ 和 sz_ 开头的数据\n        if (!(0 == this.editData.market)) {\n          if (isNaN(Number(sh_fee_rate)) || false == /^\\-?\\d+(\\.\\d{1,6})?$/.test(sh_fee_rate) || '' == sh_fee_rate) {\n            status = false;\n          }\n          if (isNaN(Number(sh_fee_upper_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(sh_fee_upper_limit) || '' == sh_fee_upper_limit) {\n            status = false;\n          }\n          if (isNaN(Number(sh_fee_lower_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(sh_fee_lower_limit) || '' == sh_fee_lower_limit) {\n            status = false;\n          }\n\n          if (isNaN(Number(sz_fee_rate)) || false == /^\\-?\\d+(\\.\\d{1,6})?$/.test(sz_fee_rate) || '' == sz_fee_rate) {\n            status = false;\n          }\n          if (isNaN(Number(sz_fee_upper_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(sz_fee_upper_limit) || '' == sz_fee_upper_limit) {\n            status = false;\n          }\n          if (isNaN(Number(sz_fee_lower_limit)) || false == /^\\-?\\d+(\\.\\d{1,3})?$/.test(sz_fee_lower_limit) || '' == sz_fee_lower_limit) {\n            status = false;\n          }\n          ajaxData.fee_rate = sh_fee_rate;\n          ajaxData.fee_upper_limit = sh_fee_upper_limit;\n          ajaxData.fee_lower_limit = sh_fee_lower_limit;\n          ajaxData.sz_fee_rate = sz_fee_rate;\n          ajaxData.sz_fee_upper_limit = sz_fee_upper_limit;\n          ajaxData.sz_fee_lower_limit = sz_fee_lower_limit;\n        }\n\n        if (false == status) {\n          $.omsAlert('请输入正确的数字');\n          return;\n        }\n        $.startLoading('正在修改...');\n        $.ajax({\n          url: prefix + '/portfolio/fee-modify',\n          data: ajaxData,\n          type: 'post',\n          success: function({code, msg, data}){\n            $.clearLoading();\n            if (0 == code) {\n              _this.cancelEdit();\n              _this.getRulesInfo();\n            }else{\n              $.omsAlert(msg);\n            }\n          },\n          error: function(){\n            $.clearLoading();\n            $.failNotice('网络错误，请重试');\n          }\n        });\n      },\n      hasFeeLowerLimit: function(type, market){\n        let rtn = false;\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market && e.has_lower_limit) {\n            rtn = e.name;\n          }\n        });\n        return rtn;\n      },\n      hasFeeUpperLimit: function(type, market){\n        let rtn = false;\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market && e.has_upper_limit) {\n            rtn = e.name;\n          }\n        });\n        return rtn;\n      },\n      getFeeName: function(type, market){\n        let rtn = '';\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market) {\n            rtn = e.name;\n          }\n        });\n        return rtn;\n      },\n      getFeePrefix: function(type, market, preStr){\n        let rtn = '';\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market) {\n            if (preStr) {\n              rtn = e[preStr + 'fee_prefix'] + e.fee_prefix;\n            }else{\n              rtn = e.fee_prefix;\n            }\n          }\n        });\n        return rtn;\n      },\n      getFeeUnit: function(type, market){\n        let rtn = '';\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market) {\n            rtn = e.fee_unit;\n          }\n        });\n        return rtn;\n      },\n      getFeeSuffix: function(type, market){\n        let rtn = '';\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market) {\n            rtn = e.fee_suffix;\n          }\n        });\n        return rtn;\n      },\n      getFeeText: function(type, rate, market){\n        let rtn = '';\n        feeStaticData.forEach(function(e){\n          if (e.type == type && e.market == market) {\n            if (e.showRate == true) {\n              rtn = e.fee_text + rate + e.fee_textNext;\n            }else{\n              rtn = e.fee_text;\n            }\n          }\n        });\n        return rtn;\n      },\n      urlBack: function(){\n        location.href = prefix + '/product/base_lists';\n      },\n      doSaveTpl: function(){\n        $.startLoading('正在保存...');\n        $.ajax({\n          url: prefix + '/portfolio/fee-save-template',\n          type: 'post',\n          data: {\n            product_id: FD.product_id\n          },\n          success: function({code, msg, data}){\n            $.clearLoading();\n            if (0 == code) {\n              $.omsAlert('保存成功');\n            }else{\n              $.omsAlert(msg);\n            }\n          },\n          error: function(){\n            $.clearLoading();\n          }\n        });\n      },\n      getRulesInfo: function(){\n        var _this = this;\n        $.ajax({\n          url: prefix + '/portfolio/fee-list/' + FD.product_id,\n          type: 'get',\n          success: function({code, msg, data}){\n            data.forEach(function(e){\n              e.sh_fee_rate = e.fee_rate;\n              e.sh_fee_lower_limit = e.fee_lower_limit;\n              e.sh_fee_upper_limit = e.fee_upper_limit;\n            })\n            feeList.rulesInfo = data;\n            \n          },\n          error: function(){\n            \n          }\n        })\n      }\n    }\n  });\n\n  feeList.getRulesInfo();\n\n  $(document).on('keydown', '.rules_input>input', function (e) {\n    validPreVal = $(this).val();\n  });\n}"]}
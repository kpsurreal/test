{"version":3,"sources":["product/base_lists.js"],"names":["JS_base_lists","prefix","selectize","search_product","$","valueField","labelField","create","createOnBlur","persist","allowEmptyOption","placeholder","searchField","render","item","escape","value","label","option","searchProductArr","PRODUCTS","forEach","e","is_running","push","name","addOption","getCanChangeInfo","callback","ajax","url","success","code","msg","data","Object","prototype","toString","call","lists","omsAlert","error","clearLoading","accountList","Vue","el","accountInfo","orgInfo","pageInfo","methods","getShowChildrenFlag","v","toggleShowChildren","showChildren","getAccountInfo","FD","_this","canChangeData","id","base_id","com_pw","tx_pw","getOrgInfo","searchAccountInfo","product_name","getValue","startLoading","splice","getsecuritiesType","test","numeralNumber","arg","num","undefined","str","i","numeral","format","checkSplit","checkShow","checkShowSplit","LOGIN_INFO","role_id","some","doSplit","location","href","doConfig","type","showProgress","doChangePassword","jc_warn","confirm","title","content","closeIcon","confirmButton","close","html","jc","cancelButton","validate","required","messages","errorPlacement","element","appendTo","parents","submitHandler","form","login_password","val","new_password","tx_new_passwd","new_passwd","doChangeComunicationCode","checkPassword","login_code","tx_src_passwd","document","on"],"mappings":";;AAAA;;;;;AAKA,SAASA,aAAT,CAAuBC,MAAvB,EAA8B;AAC5B,MAAIC,YAAY,EAAhB;AACAA,YAAUC,cAAV,GAA2BC,EAAE,iBAAF,EAAqBF,SAArB,CAA+B;AACxDG,gBAAY,OAD4C;AAExDC,gBAAY,OAF4C;AAGxDC,YAAQ,IAHgD;AAIxDC,kBAAc,IAJ0C;AAKxDC,aAAS,KAL+C;AAMxDC,sBAAkB,IANsC;AAOxDC,iBAAa,WAP2C;AAQxDC,iBAAa,OAR2C;AASxDC,YAAQ;AACNC,YAAM,cAASA,KAAT,EAAeC,MAAf,EAAsB;AAC1B,eAAO,mCAAkCD,MAAKE,KAAvC,GAA8C,WAA9C,GAA2DF,MAAKG,KAAhE,GAAuE,IAAvE,GAA8EF,OAAOD,MAAKG,KAAZ,CAA9E,GAAmG,QAA1G;AACD,OAHK;AAINC,cAAQ,gBAASJ,IAAT,EAAeC,MAAf,EAAsB;AAC5B,YAAIE,QAAQH,KAAKE,KAAjB;AACA,eAAO,gCAA+BF,KAAKG,KAApC,GAA2C,IAA3C,GAAkDF,OAAOD,KAAKG,KAAZ,CAAlD,GACP,QADA;AAED;AARK;AATgD,GAA/B,EAmBxB,CAnBwB,EAmBrBf,SAnBN;;AAqBA,MAAIiB,mBAAmB,EAAvB;AACA;AACAC,WAASC,OAAT,CAAiB,UAASC,CAAT,EAAW;AAC1B,QAAIA,EAAEC,UAAF,IAAgB,IAApB,EAA0B;AACxBJ,uBAAiBK,IAAjB,CAAsB;AACpBP,eAAOK,EAAEG,IADW;AAEpBT,eAAOM,EAAEG;AAFW,OAAtB;AAID;AAEF,GARD;AASAvB,YAAUC,cAAV,CAAyBuB,SAAzB,CAAmCP,gBAAnC;AACA;AACA;;AAEA,MAAIQ,mBAAmB,SAAnBA,gBAAmB,CAASC,QAAT,EAAkB;AACvCxB,MAAEyB,IAAF,CAAO;AACLC,WAAK7B,SAAS,wCADT;AAEL;AACA;AACA;AACA8B,eAAS,uBAA2B;AAAA,YAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,YAAXC,GAAW,QAAXA,GAAW;AAAA,YAANC,IAAM,QAANA,IAAM;;AAClC,YAAI,KAAKF,IAAT,EAAe;AACb,cAAIG,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BV,QAA/B,MAA6C,mBAAjD,EAAsE;AACpEA,qBAASM,KAAKK,KAAd;AACD;AACF,SAJD,MAIK;AACHnC,YAAEoC,QAAF,CAAWP,GAAX;AACD;AACF,OAbI;AAcLQ,aAAO,iBAAU;AACf;AACArC,UAAEsC,YAAF;AACD;AAjBI,KAAP;AAmBD,GApBD;;AAsBA,MAAIC,cAAc,IAAIC,GAAJ,CAAQ;AACxBC,QAAI,cADoB;AAExBX,UAAM;AACJhC,iBAAWA,SADP;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA4C,mBAAa,EAbT;AAcJC,eAAS,EAdL;AAeJ;AACAC,gBAAU;AAhBN,KAFkB;AAoBxBC,aAAS;AACPC,2BAAqB,6BAASC,CAAT,EAAW;AAC9B,eAAOA,KAAK,MAAZ;AACD,OAHM;AAIPC,0BAAoB,4BAASD,CAAT,EAAW;AAC7BA,UAAEE,YAAF,GAAiB,CAACF,EAAEE,YAApB;AACD,OANM;AAOPC,sBAAgB,0BAAU;AACxBC,WAAGT,WAAH,CAAezB,OAAf,CAAuB,UAASC,CAAT,EAAW;AAChCA,YAAE+B,YAAF,GAAiB,IAAjB;AACD,SAFD;AAGA,YAAIG,QAAQ,IAAZ;AACA7B,yBAAiB,UAAS8B,aAAT,EAAuB;AACtCF,aAAGT,WAAH,CAAezB,OAAf,CAAuB,UAASC,CAAT,EAAW;AAChCmC,0BAAcpC,OAAd,CAAsB,UAASwB,EAAT,EAAY;AAChC,kBAAIvB,EAAEoC,EAAF,IAAQb,GAAGc,OAAf,EAAwB;AACtBrC,kBAAEsC,MAAF,GAAWf,GAAGe,MAAd;AACAtC,kBAAEuC,KAAF,GAAUhB,GAAGgB,KAAb;AACD;AACF,aALD;AAMD,WAPD;AAQAL,gBAAMV,WAAN,GAAoBS,GAAGT,WAAvB;AAED,SAXD;AAYD,OAxBM;AAyBPgB,kBAAY,sBAAU;AACpB,aAAKf,OAAL,GAAeQ,GAAGR,OAAlB;AACD,OA3BM;AA4BPgB,yBAAmB,6BAAU;AAC3B,YAAIC,eAAe,KAAK9D,SAAL,CAAeC,cAAf,CAA8B8D,QAA9B,EAAnB;;AAEA,YAAIT,QAAQ,IAAZ;AACApD,UAAE8D,YAAF,CAAe,SAAf;AACA9D,UAAEyB,IAAF,CAAO;AACLC,eAAK7B,SAAS,iCADT;AAELiC,gBAAM;AACJT,kBAAMuC;AADF,WAFD;AAKLjC,mBAAS,wBAA2B;AAAA,gBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,gBAAXC,GAAW,SAAXA,GAAW;AAAA,gBAANC,IAAM,SAANA,IAAM;;AAClC,gBAAI,MAAMF,IAAV,EAAgB;AACdwB,oBAAMV,WAAN,CAAkBqB,MAAlB,CAAyB,CAAzB;AACAxC,+BAAiB,UAAS8B,aAAT,EAAuB;AACtCvB,qBAAKK,KAAL,CAAWlB,OAAX,CAAmB,UAASC,CAAT,EAAW;AAC5BA,oBAAE+B,YAAF,GAAiB,IAAjB;AACAI,gCAAcpC,OAAd,CAAsB,UAASwB,EAAT,EAAY;AAChC,wBAAIvB,EAAEoC,EAAF,IAAQb,GAAGc,OAAf,EAAwB;AACtBrC,wBAAEsC,MAAF,GAAWf,GAAGe,MAAd;AACAtC,wBAAEuC,KAAF,GAAUhB,GAAGgB,KAAb;AACD;AACF,mBALD;AAMAL,wBAAMV,WAAN,CAAkBtB,IAAlB,CAAuBF,CAAvB;AACD,iBATD;AAUAlB,kBAAEsC,YAAF;AACD,eAZD;AAcD,aAhBD,MAgBK;AACHtC,gBAAEoC,QAAF,CAAWP,GAAX;AACA7B,gBAAEsC,YAAF;AACD;AACF,WA1BI;AA2BLD,iBAAO,iBAAU;AACfrC,cAAEsC,YAAF;AACD;AA7BI,SAAP;AA+BD,OAhEM;AAiEP0B,yBAAmB,2BAASV,EAAT,EAAY;AAC7B,YAAI,MAAMW,IAAN,CAAWX,EAAX,CAAJ,EAAoB;AAClB,iBAAO,MAAP;AACD,SAFD,MAEK;AACH,iBAAO,IAAP;AACD;AACF,OAvEM;AAwEPY,qBAAe,uBAASC,GAAT,EAAcC,GAAd,EAAkB;AAC/B,YAAIC,aAAaD,GAAjB,EAAsB;AACpB,cAAIE,MAAM,IAAV;AACA,eAAK,IAAIC,IAAIH,MAAM,CAAnB,EAAsBG,KAAK,CAA3B,EAA8BA,GAA9B,EAAmC;AACjCD,mBAAO,GAAP;AACD;AACD,iBAAOE,QAAQL,GAAR,EAAaM,MAAb,CAAqB,OAAOH,GAA5B,CAAP;AACD;AACD,eAAOE,QAAQL,GAAR,EAAaM,MAAb,CAAqB,QAArB,CAAP;AACD,OAjFM;AAkFPC,kBAAY,oBAAS3B,CAAT,EAAW;AACrB,eAAO,KAAKA,CAAZ;AACD,OApFM;AAqFP4B,iBAAW,mBAAS5B,CAAT,EAAW;AACpB,eAAO,KAAKA,CAAZ;AACD,OAvFM;AAwFP6B,sBAAgB,0BAAU;AACxB,eAAOC,WAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAS7D,CAAT,EAAW;AACxC,iBAAOA,KAAK,CAAZ;AACD,SAFM,CAAP;AAGD,OA5FM;AA6FP8D,eAAS,iBAASjC,CAAT,EAAW;AAClBkC,iBAASC,IAAT,GAAgBrF,SAAS,eAAT,GAA2BkD,CAA3C;AACD,OA/FM;AAgGPoC,gBAAU,kBAASpC,CAAT,EAAYqC,IAAZ,EAAiB;AACzB;AACA,YAAIA,IAAJ,EAAU;AACRH,mBAASC,IAAT,GAAgBrF,SAAS,WAAT,GAAsBuF,IAAtB,GAA4B,cAA5B,GAA6CrC,CAA7D;AACD,SAFD,MAEK;AACHkC,mBAASC,IAAT,GAAgBrF,SAAS,uCAAT,GAAmDkD,CAAnE;AACD;AACF,OAvGM;AAwGPsC,oBAAc,sBAAS/B,EAAT,EAAa8B,IAAb,EAAkB;AAC9B;;;AAGD,OA5GM;AA6GPE,wBAAkB,0BAASvC,CAAT,EAAYU,KAAZ,EAAkB;AAClC;AACA,YAAI8B,UAAUvF,EAAEwF,OAAF,CAAU;AACtBC,iBAAO,EADe;AAEtBC,gQAFsB;AAGtBC,qBAAW,IAHW;AAItBC,yBAAe,MAJO;AAKtBJ,mBAAS,mBAAU;AACjBD,oBAAQM,KAAR;AACAN,sBAAU,IAAV;AACA,gBAAIO,OAAO,EAAX;AACA,gBAAIrC,KAAJ,EAAW;AACTqC,qBAAO,mVAIU/C,CAJV,gvCAAP;AAmBD,aApBD,MAoBK;AACH+C,qBAAO,mVAIU/C,CAJV,u1BAAP;AAeD;AACD,gBAAIgD,KAAK/F,EAAEwF,OAAF,CAAU;AACjBC,qBAAO,MADU;AAEjBC,uBAASI,IAFQ;AAGjBH,yBAAW,IAHM;AAIjBC,6BAAe,KAJE;AAKjBI,4BAAc;AALG,aAAV,CAAT;AAOAhG,cAAE,oBAAF,EAAwBiG,QAAxB,CAAiC;AAC/B,4BAAc,cADiB;AAE/B;AACA,uBAAS;AACP,gCAAgB;AAChB;AACEC,4BAAU;AAFI,iBADT;AAKP,iCAAiB;AACjB;AACEA,4BAAU;AAFK;AALV,eAHsB;AAa/BC,wBAAU;AACR,gCAAe;AACf;AACED,4BAAU;AAFG,iBADP;AAKR,iCAAgB;AAChB;AACEA,4BAAU;AAFI;AALR,eAbqB;AAuB/BE,8BAAgB,wBAAS/D,KAAT,EAAgBgE,OAAhB,EAAyB;AACvChE,sBAAMiE,QAAN,CAAeD,QAAQE,OAAR,CAAgB,aAAhB,CAAf;AACD,eAzB8B;AA0B/B;AACA;AACA;AACA;AACAC,6BAAe,uBAAUC,IAAV,EAAgB;AAC7B,oBAAIC,iBAAiB1G,EAAE,iBAAF,EAAqB2G,GAArB,EAArB;AACA,oBAAIC,eAAe5G,EAAE,eAAF,EAAmB2G,GAAnB,EAAnB;AACA,oBAAIE,gBAAgB7G,EAAE,gBAAF,EAAoB2G,GAApB,EAApB;AACA3G,kBAAE8D,YAAF,CAAe,SAAf;AACA9D,kBAAEyB,IAAF,CAAO;AACLC,uBAAK7B,SAAS,+BADT;AAELuF,wBAAM,MAFD;AAGLtD,wBAAM;AACJyB,6BAASR,CADL;AAEJ;AACA;AACA+D,gCAAYF,YAJR;AAKJC,mCAAeA;AALX,mBAHD;AAULlF,2BAAS,wBAA2B;AAAA,wBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,wBAAXC,GAAW,SAAXA,GAAW;AAAA,wBAANC,IAAM,SAANA,IAAM;;AAClC9B,sBAAEsC,YAAF;AACA,wBAAI,KAAKV,IAAT,EAAe;AACb;AACAmE,yBAAGF,KAAH;AACA7F,wBAAEoC,QAAF,CAAWP,GAAX;AACA;AACAkE,2BAAK,IAAL;AACD,qBAND,MAMK;AACH/F,wBAAEoC,QAAF,CAAWP,GAAX;AACD;AAGF,mBAvBI;AAwBLQ,yBAAO,iBAAU;AACfrC,sBAAEsC,YAAF;AACD;AA1BI,iBAAP;AA4BD;AA/D8B,aAAjC;AAiED,WAtHqB;AAuHtB0D,wBAAc;AAvHQ,SAAV,CAAd;AAyHD,OAxOM;AAyOPe,gCAA0B,kCAAShE,CAAT,EAAW;AACnC,YAAIgD,KAAK/F,EAAEwF,OAAF,CAAU;AACjBC,iBAAO,OADU;AAEjBC,mBAAS,+TAIQ3C,CAJR,49BAFQ;AAqBjB4C,qBAAW,IArBM;AAsBjBC,yBAAe,KAtBE;AAuBjBI,wBAAc;AAvBG,SAAV,CAAT;;AA0BAhG,UAAE,gBAAF,EAAoBiG,QAApB,CAA6B;AAC3B,wBAAc,cADa;AAE3B;AACA,mBAAS;AACP,0BAAa;AACXe,6BAAe,IADJ;AAEXd,wBAAU;AAFC,aADN;AAKP,6BAAiB;AACfc,6BAAe,IADA;AAEfd,wBAAU;AAFK;AALV,WAHkB;AAa3BC,oBAAU;AACR,0BAAa;AACXa,6BAAe,YADJ;AAEXd,wBAAU;AAFC,aADL;AAKR,6BAAgB;AACdc,6BAAe,YADD;AAEdd,wBAAU;AAFI;AALR,WAbiB;AAuB3BE,0BAAgB,wBAAS/D,KAAT,EAAgBgE,OAAhB,EAAyB;AACvChE,kBAAMiE,QAAN,CAAeD,QAAQE,OAAR,CAAgB,aAAhB,CAAf;AACD,WAzB0B;AA0B3B;AACA;AACA;AACA;AACAC,yBAAe,uBAAUC,IAAV,EAAgB;AAC7B,gBAAIlB,UAAUvF,EAAEwF,OAAF,CAAU;AACtBC,qBAAO,EADe;AAEtBC,0QAFsB;AAGtBC,yBAAW,IAHW;AAItBC,6BAAe,MAJO;AAKtBJ,uBAAS,mBAAU;AACjB,oBAAIyB,aAAajH,EAAE,aAAF,EAAiB2G,GAAjB,EAAjB;AACA,oBAAIE,gBAAgB7G,EAAE,gBAAF,EAAoB2G,GAApB,EAApB;AACA3G,kBAAE8D,YAAF,CAAe,SAAf;AACA9D,kBAAEyB,IAAF,CAAO;AACLC,uBAAK7B,SAAS,+BADT;AAELuF,wBAAM,MAFD;AAGLtD,wBAAM;AACJyB,6BAASR,CADL;AAEJqC,0BAAM,CAFF,EAEI;AACR8B,mCAAeD,UAHX;AAIJJ,mCAAeA;AAJX,mBAHD;AASLlF,2BAAS,wBAA2B;AAAA,wBAAjBC,IAAiB,SAAjBA,IAAiB;AAAA,wBAAXC,GAAW,SAAXA,GAAW;AAAA,wBAANC,IAAM,SAANA,IAAM;;AAClC9B,sBAAEsC,YAAF;AACA,wBAAI,KAAKV,IAAT,EAAe;AACb2D,8BAAQM,KAAR;AACAE,yBAAGF,KAAH;AACA7F,wBAAEoC,QAAF,CAAWP,GAAX;AACA0D,gCAAU,IAAV;AACAQ,2BAAK,IAAL;AACD,qBAND,MAMK;AACH/F,wBAAEsC,YAAF;AACAtC,wBAAEoC,QAAF,CAAWP,GAAX;AACD;AACF,mBArBI;AAsBLQ,yBAAO,iBAAU;AACfrC,sBAAEsC,YAAF;AACD;AAxBI,iBAAP;AA0BD,eAnCqB;AAoCtB0D,4BAAc;AApCQ,aAAV,CAAd;AAsCD;AArE0B,SAA7B;AAuED;AA3UM;AApBe,GAAR,CAAlB;;AAmWAzD,cAAYW,cAAZ;AACAX,cAAYmB,UAAZ;;AAEA1D,IAAEmH,QAAF,EAAYC,EAAZ,CAAe,OAAf,EAAwB,aAAxB,EAAuC,YAAU;AAC/C7E,gBAAYoB,iBAAZ;AACD,GAFD;;AAIA;AACD","file":"base_lists.js","sourcesContent":["/**\n * author: liuzeyafzy\n * 账户管理页面\n */\n\nfunction JS_base_lists(prefix){\n  let selectize = {};\n  selectize.search_product = $('#search_product').selectize({\n    valueField: 'value',\n    labelField: 'label',\n    create: true,\n    createOnBlur: true,\n    persist: false,\n    allowEmptyOption: true,\n    placeholder: '请选择或输入策略名',\n    searchField: 'label',\n    render: {\n      item: function(item, escape){\n        return '<div class=\"item\" data-value=\"'+ item.value +'\" title=\"'+ item.label +'\">' + escape(item.label) + '</div>';\n      },\n      option: function(item, escape){\n        var label = item.value;\n        return '<div class=\"option\" title=\"'+ item.label +'\">' + escape(item.label) +\n        '</div>';\n      }\n    }\n  })[0].selectize;\n\n  var searchProductArr = [];\n  // Begin 使用公共部分获取到的组合信息\n  PRODUCTS.forEach(function(e){\n    if (e.is_running == true) {\n      searchProductArr.push({\n        label: e.name,\n        value: e.name\n      });\n    }\n\n  });\n  selectize.search_product.addOption(searchProductArr);\n  // selectize.search_product.setValue('');\n  // End 使用公共部分获取到的组合信息\n\n  let getCanChangeInfo = function(callback){\n    $.ajax({\n      url: prefix + '/product/get_canchange_base_pw_account',\n      // data: {\n      //   base_id: id\n      // },\n      success: function({code, msg, data}){\n        if (0 == code) {\n          if (Object.prototype.toString.call(callback) === '[object Function]') {\n            callback(data.lists);\n          }\n        }else{\n          $.omsAlert(msg);\n        }\n      },\n      error: function(){\n        // 列表合并显示的数据，并不需要提示错误信息\n        $.clearLoading();\n      }\n    });\n  }\n\n  let accountList = new Vue({\n    el: '#accountList',\n    data: {\n      selectize: selectize,\n      // 账户信息\n      // roboter_id:\n      // name:                    名称\n      // securities_id:           不是PB就是资金账户\n      // securities_name:         所属证券\n      // 初始资金\n      // 资产总值                  total_amount\n      // 可用余额                  available_amount改成balance_amount\n      // able_split               是否可拆分 1可 2不可\n      // child[]: product_id产品id, name产品名称, market_value证券市值, tmp_frozen_cash冻结资金, updated_at更新时间,\n      //\n      accountInfo: [],\n      orgInfo: [],\n      // 分页信息\n      pageInfo: ''\n    },\n    methods: {\n      getShowChildrenFlag: function(v){\n        return v == 'true';\n      },\n      toggleShowChildren: function(v){\n        v.showChildren = !v.showChildren;\n      },\n      getAccountInfo: function(){\n        FD.accountInfo.forEach(function(e){\n          e.showChildren = true;\n        });\n        let _this = this;\n        getCanChangeInfo(function(canChangeData){\n          FD.accountInfo.forEach(function(e){\n            canChangeData.forEach(function(el){\n              if (e.id == el.base_id) {\n                e.com_pw = el.com_pw;\n                e.tx_pw = el.tx_pw;\n              }\n            });\n          })\n          _this.accountInfo = FD.accountInfo;\n\n        });\n      },\n      getOrgInfo: function(){\n        this.orgInfo = FD.orgInfo;\n      },\n      searchAccountInfo: function(){\n        var product_name = this.selectize.search_product.getValue();\n\n        var _this = this;\n        $.startLoading('正在搜索...');\n        $.ajax({\n          url: prefix + '/product/base_lists?format=json',\n          data: {\n            name: product_name\n          },\n          success: function({code, msg, data}){\n            if (0 === code) {\n              _this.accountInfo.splice(0)\n              getCanChangeInfo(function(canChangeData){\n                data.lists.forEach(function(e){\n                  e.showChildren = true;\n                  canChangeData.forEach(function(el){\n                    if (e.id == el.base_id) {\n                      e.com_pw = el.com_pw;\n                      e.tx_pw = el.tx_pw;\n                    }\n                  });\n                  _this.accountInfo.push(e);\n                });\n                $.clearLoading();\n              })\n\n            }else{\n              $.omsAlert(msg);\n              $.clearLoading();\n            }\n          },\n          error: function(){\n            $.clearLoading();\n          }\n        });\n      },\n      getsecuritiesType: function(id){\n        if (/pb/i.test(id)) {\n          return 'PB账户';\n        }else{\n          return '账户'\n        }\n      },\n      numeralNumber: function(arg, num){\n        if (undefined != num) {\n          var str = '0.'\n          for (let i = num - 1; i >= 0; i--) {\n            str += '0';\n          }\n          return numeral(arg).format( '0,' + str );\n        }\n        return numeral(arg).format( '0,0.00' );\n      },\n      checkSplit: function(v){\n        return 1 == v;\n      },\n      checkShow: function(v){\n        return 1 == v;\n      },\n      checkShowSplit: function(){\n        return LOGIN_INFO.role_id.some(function(e){\n          return e == 1;\n        })\n      },\n      doSplit: function(v){\n        location.href = prefix + '/product/add/' + v;\n      },\n      doConfig: function(v, type){\n        // location.href = prefix + '/product/setting_redirect?product_id=' + v;\n        if (type) {\n          location.href = prefix + '/product/'+ type +'?product_id=' + v;\n        }else{\n          location.href = prefix + '/product/setting_redirect?product_id=' + v;\n        }\n      },\n      showProgress: function(id, type){\n        // id: 账户id; type: 2为密码 1为通信码\n\n\n      },\n      doChangePassword: function(v, tx_pw){\n        // console.log(tx_pw);\n        var jc_warn = $.confirm({\n          title: '',\n          content: `<div style=\"text-align: center;height: 150px;line-height: 150px;\"><i class=\"warn-icon\"></i>慎重！密码修改过程中账号将无法下单，确认继续？</div>`,\n          closeIcon: true,\n          confirmButton: ' 确定 ',\n          confirm: function(){\n            jc_warn.close();\n            jc_warn = null;\n            var html = '';\n            if (tx_pw) {\n              html = `<form id=\"userpassword-form\" class=\"common-form\" style=\"margin-left: 40px;margin-top: 30px;\">\n                  <span style=\"display:none;\" class=\"user_id\"></span>\n                  <div class=\"form-field\" style=\"margin-left: 20px;\">\n                      <label class=\"form-left\">账户</label>\n                      <span>`+ v +`</span>\n                  </div>\n                  <div class=\"form-field\" style=\"margin-left: 20px;\">\n                      <label class=\"form-left\">账户密码<b>*</b></label>\n                      <input name=\"new_password\" class=\"input-text new_password\" style=\"width: 450px;\" type=\"password\" autocomplete=\"new_password\" placeholder=\"请输入正确密码（多次提交错误密码可能导致系统被锁，请谨慎）\"  />\n                  </div>\n                  <div class=\"form-field\" style=\"margin-left: 20px;\">\n                      <label class=\"form-left\">通讯密码<b>*</b></label>\n                      <input name=\"tx_new_passwd\" class=\"input-text tx_new_passwd\" style=\"width: 450px;\" type=\"password\" autocomplete=\"new_password\" placeholder=\"请输入正确通讯密码\"  />\n                  </div>\n                  <div class=\"form-btns\" style=\"margin-left: 0;text-align: center;\">\n                      <button type=\"submit\" class=\"submit_btn\">确定</button>\n                      <div style=\"display:block;clear:both;\"></div>\n                  </div>\n              </form>`\n            }else{\n              html = `<form id=\"userpassword-form\" class=\"common-form\" style=\"margin-left: 40px;margin-top: 30px;\">\n                  <span style=\"display:none;\" class=\"user_id\"></span>\n                  <div class=\"form-field\" style=\"margin-left: 20px;\">\n                      <label class=\"form-left\">账户</label>\n                      <span>`+ v +`</span>\n                  </div>\n                  <div class=\"form-field\" style=\"margin-left: 20px;\">\n                      <label class=\"form-left\">账户密码<b>*</b></label>\n                      <input name=\"new_password\" class=\"input-text new_password\" style=\"width: 450px;\" type=\"password\" autocomplete=\"new_password\" placeholder=\"请输入正确密码（多次提交错误密码可能导致系统被锁，请谨慎）\"  />\n                  </div>\n                  <div class=\"form-btns\" style=\"margin-left: 0;text-align: center;\">\n                      <button type=\"submit\" class=\"submit_btn\">确定</button>\n                      <div style=\"display:block;clear:both;\"></div>\n                  </div>\n              </form>`;\n            }\n            var jc = $.confirm({\n              title: '修改密码',\n              content: html,\n              closeIcon: true,\n              confirmButton: false,\n              cancelButton: false\n            });\n            $(\"#userpassword-form\").validate({\n              'errorClass': 'confirm-tips',\n              // 'errorElement': 'div',\n              'rules': {\n                'new_password': {\n                //   checkPassword: true,\n                  required: true\n                },\n                'tx_new_passwd': {\n                //   checkPassword: true,\n                  required: true\n                }\n              },\n              messages: {\n                'new_password':{\n                //   checkPassword: '只允许输入字母与数字',\n                  required: '请输入账户密码'\n                },\n                'tx_new_passwd':{\n                //   checkPassword: '只允许输入字母与数字',\n                  required: '请输入通讯密码',\n                }\n              },\n              errorPlacement: function(error, element) {\n                error.appendTo(element.parents(\".form-field\"));\n              },\n              // errorElement: function(error, element) {\n              //   debugger;\n              //   error.appendTo(element.parents(\".form-field\").next(\"div\"));\n              // },\n              submitHandler: function (form) {\n                var login_password = $('.login_password').val();\n                var new_password = $('.new_password').val();\n                var tx_new_passwd = $('.tx_new_passwd').val();\n                $.startLoading('正在添加...');\n                $.ajax({\n                  url: prefix + '/product/change_base_password',\n                  type: 'post',\n                  data: {\n                    base_id: v,\n                    // type: 2,//2为密码，1为通信码\n                    // src_passwd: login_password,\n                    new_passwd: new_password,\n                    tx_new_passwd: tx_new_passwd\n                  },\n                  success: function({code, msg, data}){\n                    $.clearLoading();\n                    if (0 == code) {\n                      // jc_warn.close();\n                      jc.close();\n                      $.omsAlert(msg);\n                      // jc_warn = null;\n                      jc = null;\n                    }else{\n                      $.omsAlert(msg);\n                    }\n\n\n                  },\n                  error: function(){\n                    $.clearLoading();\n                  }\n                });\n              }\n            });\n          },\n          cancelButton: false\n        });\n      },\n      doChangeComunicationCode: function(v){\n        var jc = $.confirm({\n          title: '修改通信码',\n          content: `<form id=\"usercode-form\" class=\"common-form\" style=\"margin-left: 40px;margin-top: 30px;\">\n              <span style=\"display:none;\" class=\"user_id\"></span>\n              <div class=\"form-field\" style=\"margin-left: 20px;\">\n                  <label class=\"form-left\">账户</label>\n                  <span>`+ v +`</span>\n              </div>\n              <div class=\"form-field\" style=\"margin-left: 20px;\">\n                  <label class=\"form-left\">原通信码<b>*</b></label>\n                  <input name=\"login_code\" class=\"input-text login_code\" type=\"password\" placeholder=\"请输入原通信码\"  />\n              </div>\n              <div class=\"form-field\" style=\"margin-left: 20px;\">\n                  <label class=\"form-left\">新通信码<b>*</b></label>\n                  <input name=\"tx_new_passwd\" class=\"input-text tx_new_passwd\" type=\"password\" autocomplete=\"new_password\" placeholder=\"请输入新通信码\"  />\n              </div>\n              <div class=\"form-btns\" style=\"margin-left: 0;text-align: center;\">\n                  <button type=\"submit\" class=\"submit_btn\">确定</button>\n                  <div style=\"display:block;clear:both;\"></div>\n              </div>\n          </form>`,\n          closeIcon: true,\n          confirmButton: false,\n          cancelButton: false\n        });\n\n        $(\"#usercode-form\").validate({\n          'errorClass': 'confirm-tips',\n          // 'errorElement': 'div',\n          'rules': {\n            'login_code':{\n              checkPassword: true,\n              required: true\n            },\n            'tx_new_passwd': {\n              checkPassword: true,\n              required: true\n            }\n          },\n          messages: {\n            'login_code':{\n              checkPassword: '只允许输入字母与数字',\n              required: '请输入账户密码',\n            },\n            'tx_new_passwd':{\n              checkPassword: '只允许输入字母与数字',\n              required: '请输入通讯密码',\n            }\n          },\n          errorPlacement: function(error, element) {\n            error.appendTo(element.parents(\".form-field\"));\n          },\n          // errorElement: function(error, element) {\n          //   debugger;\n          //   error.appendTo(element.parents(\".form-field\").next(\"div\"));\n          // },\n          submitHandler: function (form) {\n            var jc_warn = $.confirm({\n              title: '',\n              content: `<div style=\"text-align: center;height: 150px;line-height: 150px;\"><i class=\"warn-icon\"></i>慎重！通信码修改过程中账号将无法下单，确认继续？</div>`,\n              closeIcon: true,\n              confirmButton: ' 确定 ',\n              confirm: function(){\n                var login_code = $('.login_code').val();\n                var tx_new_passwd = $('.tx_new_passwd').val();\n                $.startLoading('正在添加...');\n                $.ajax({\n                  url: prefix + '/product/change_base_password',\n                  type: 'post',\n                  data: {\n                    base_id: v,\n                    type: 1,//2为密码，1为通信码\n                    tx_src_passwd: login_code,\n                    tx_new_passwd: tx_new_passwd,\n                  },\n                  success: function({code, msg, data}){\n                    $.clearLoading();\n                    if (0 == code) {\n                      jc_warn.close();\n                      jc.close();\n                      $.omsAlert(msg);\n                      jc_warn = null;\n                      jc = null;\n                    }else{\n                      $.clearLoading();\n                      $.omsAlert(msg);\n                    }\n                  },\n                  error: function(){\n                    $.clearLoading();\n                  }\n                })\n              },\n              cancelButton: false\n            });\n          }\n        });\n      }\n    }\n  });\n\n  accountList.getAccountInfo();\n  accountList.getOrgInfo();\n\n  $(document).on('click', '.btn_search', function(){\n    accountList.searchAccountInfo();\n  });\n\n  // $(document).trigger('stopGetUpdateInfo');\n}\n"]}
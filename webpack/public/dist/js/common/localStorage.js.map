{"version":3,"sources":["common/localStorage.js"],"names":["__localStorage","getJsonItem","path","name","callback","data","localStorage","getItem","JSON","parse","code","msg","setJsonItem","dataArr","newData","forEach","e","value","Object","assign","setItem","stringify"],"mappings":";;AAAA;AACA;AACA;AACA,IAAIA,iBAAiB,EAArB;;AAEAA,eAAeC,WAAf,GAA6B,UAASC,IAAT,EAAeC,IAAf,EAAqBC,QAArB,EAA8B;AACzD,MAAIC,OAAOC,aAAaC,OAAb,CAAqBL,IAArB,CAAX;AACA,MAAIG,IAAJ,EAAU;AACRA,WAAOG,KAAKC,KAAL,CAAWJ,IAAX,CAAP;AACA,QAAIA,KAAKF,IAAL,CAAJ,EAAgB;AACdC,eAAS;AACPM,cAAM,CADC;AAEPC,aAAK,MAFE;AAGPN,cAAMA,KAAKF,IAAL;AAHC,OAAT;AAKD,KAND,MAMK;AACHC,eAAS;AACPM,cAAM,GADC;AAEPC,aAAK,YAAYR,IAFV;AAGPE,cAAM;AAHC,OAAT;AAKD;AACF,GAfD,MAeK;AACH;AACAD,aAAS;AACPM,YAAM,GADC;AAEPC,WAAK,YAAYT,IAFV;AAGPG,YAAM;AAHC,KAAT;AAKD;AACF,CAzBD;;AA2BAL,eAAeY,WAAf,GAA6B,UAASV,IAAT,EAAeW,OAAf,EAAwBT,QAAxB,EAAiC;AAC5D,MAAIU,UAAU,EAAd;AACAD,UAAQE,OAAR,CAAgB,UAACC,CAAD,EAAO;AACrBF,YAAQE,EAAEb,IAAV,IAAkBa,EAAEC,KAApB;AACD,GAFD;;AAIA,MAAIZ,OAAOC,aAAaC,OAAb,CAAqBL,IAArB,CAAX;AACA,MAAIG,IAAJ,EAAU;AACRA,WAAOG,KAAKC,KAAL,CAAWJ,IAAX,CAAP;AACAS,cAAUI,OAAOC,MAAP,CAAc,EAAd,EAAkBd,IAAlB,EAAwBS,OAAxB,CAAV;AACAR,iBAAac,OAAb,CAAqBlB,IAArB,EAA2BM,KAAKa,SAAL,CAAeP,OAAf,CAA3B;AACAV,aAAS;AACPM,YAAM,CADC;AAEPC,WAAK,MAFE;AAGPN,YAAM;AAHC,KAAT;AAKD,GATD,MASK;AACH;AACAC,iBAAac,OAAb,CAAqBlB,IAArB,EAA2BM,KAAKa,SAAL,CAAeP,OAAf,CAA3B;AACAV,aAAS;AACPM,YAAM,CADC;AAEPC,WAAK,MAFE;AAGPN,YAAM;AAHC,KAAT;AAKD;AACF,CAzBD","file":"localStorage.js","sourcesContent":["// 之前代码中遗留了localStorage的方法，特别是有清空localStorage的操作，后续需要避免。\n// 如果不能避免，也应该将localStorage的方法统一放在这个文件中。\n// 因为历史遗留问题，散落在各处的localStorage方法还未挪到本文件中。\nlet __localStorage = {};\n\n__localStorage.getJsonItem = function(path, name, callback){\n  let data = localStorage.getItem(path);\n  if (data) {\n    data = JSON.parse(data);\n    if (data[name]) {\n      callback({\n        code: 0,\n        msg: '读取成功',\n        data: data[name]\n      })\n    }else{\n      callback({\n        code: 201,\n        msg: '读不到该字段：' + name,\n        data: {}\n      })\n    }\n  }else{\n    // 没有获取到数据\n    callback({\n      code: 202,\n      msg: '读不到该文件：' + path,\n      data: {}\n    })\n  }\n};\n\n__localStorage.setJsonItem = function(path, dataArr, callback){\n  let newData = {};\n  dataArr.forEach((e) => {\n    newData[e.name] = e.value\n  });\n\n  let data = localStorage.getItem(path);\n  if (data) {\n    data = JSON.parse(data);\n    newData = Object.assign({}, data, newData);\n    localStorage.setItem(path, JSON.stringify(newData));\n    callback({\n      code: 0,\n      msg: '保存成功',\n      data: {}\n    })\n  }else{\n    // 没有获取到数据，新增\n    localStorage.setItem(path, JSON.stringify(newData));\n    callback({\n      code: 0,\n      msg: '保存成功',\n      data: {}\n    })\n  }\n};\n\n"]}
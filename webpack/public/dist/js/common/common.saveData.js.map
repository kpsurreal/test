{"version":3,"sources":["common/common.saveData.js"],"names":["fileName","common_storage","getItem","name","callback","__electron","fs","getFs","getJsonDataByName","rtn","Function","__localStorage","getJsonItem","setItem","value","setJsonDataByNames","setJsonItem"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMA,WAAW,mBAAjB;;AAEA,IAAIC,iBAAiB,EAArB;;AAEA;AACAA,eAAeC,OAAf,GAAyB,UAASC,IAAT,EAAeC,QAAf,EAAwB;AAC/C;AACA,MAAIC,WAAWC,EAAX,IAAkBD,WAAWE,KAAX,IAAoBF,WAAWE,KAAX,EAA1C,EAA+D;AAC7DF,eAAWG,iBAAX,CAA6BR,QAA7B,EAAuCG,IAAvC,EAA6C,UAACM,GAAD,EAAS;AACpD,UAAIL,oBAAoBM,QAAxB,EAAkC;AAChCN,iBAASK,GAAT;AACD;AACF,KAJD;AAKD,GAND,MAMK;AACHE,mBAAeC,WAAf,CAA2BZ,QAA3B,EAAqCG,IAArC,EAA2C,UAACM,GAAD,EAAS;AAClD,UAAIL,oBAAoBM,QAAxB,EAAkC;AAChCN,iBAASK,GAAT;AACD;AACF,KAJD;AAKD;AACF,CAfD;;AAiBA;AACAR,eAAeY,OAAf,GAAyB,UAASV,IAAT,EAAeW,KAAf,EAAsBV,QAAtB,EAA+B;AACtD;AACA,MAAGC,WAAWC,EAAX,IAAkBD,WAAWE,KAAX,IAAoBF,WAAWE,KAAX,EAAzC,EAA6D;AAC3DF,eAAWU,kBAAX,CAA8Bf,QAA9B,EAAwC,CAAC,EAACG,MAAMA,IAAP,EAAaW,OAAOA,KAApB,EAAD,CAAxC,EAAsE,UAACL,GAAD,EAAS;AAC7E,UAAIL,oBAAoBM,QAAxB,EAAkC;AAChCN,iBAASK,GAAT;AACD;AACF,KAJD;AAKD,GAND,MAMK;AACHE,mBAAeK,WAAf,CAA2BhB,QAA3B,EAAqC,CAAC,EAACG,MAAMA,IAAP,EAAaW,OAAOA,KAApB,EAAD,CAArC,EAAmE,UAACL,GAAD,EAAS;AAC1E,UAAIL,oBAAoBM,QAAxB,EAAkC;AAChCN,iBAASK,GAAT;AACD;AACF,KAJD;AAKD;AACF,CAfD","file":"common.saveData.js","sourcesContent":["// 数据处理\n// 具体操作依赖client.electron.js和localStorage.js里面提供的方法\n// 注意，所有与electron客户端打交道的方法，均必须在onload之后才能执行。\n\n// 就页面排序相关举例：\n// 1. 报表产品组排序             {report_group__group_order: {field_sort: [00001, 00006, 00003, 00004, 00001]}}\n// 2. 报表产品内部表格排序        {report_group__grid_order: {field_sort: [\"security_type_name\", \"security_id\"], order: \"desc\", order_by: \"security_type_name\"}}\n// 3. 数据查询页面：资产查询列表   {report_list__assets_order: {field_sort: [], order: \"desc\", order_by: \"security_type_name\"}}\n// 4. 数据查询页面：委托查询列表   {report_list__entrust_order: {field_sort: [], order: \"desc\", order_by: \"security_type_name\"}}\n// 5. 数据查询页面：成交查询列表   {report_list__deal_order: {field_sort: [], order: \"desc\", order_by: \"security_type_name\"}}\n// 6. 数据查询页面：持仓查询列表   {report_list__position_order: {field_sort: [], order: \"desc\", order_by: \"security_type_name\"}}\n\nconst fileName = 'localStorage.json';\n\nlet common_storage = {};\n\n// 查询数据\ncommon_storage.getItem = function(name, callback){\n  // 判断是否有fs方法，即是否在electron客户端打开\n  if (__electron.fs || (__electron.getFs && __electron.getFs())) {\n    __electron.getJsonDataByName(fileName, name, (rtn) => {\n      if (callback instanceof Function) {\n        callback(rtn);\n      }\n    })\n  }else{\n    __localStorage.getJsonItem(fileName, name, (rtn) => {\n      if (callback instanceof Function) {\n        callback(rtn);\n      }\n    });\n  }\n}\n\n// 保存数据\ncommon_storage.setItem = function(name, value, callback){\n  // 判断是否有fs方法，即是否在electron客户端打开\n  if(__electron.fs || (__electron.getFs && __electron.getFs())){\n    __electron.setJsonDataByNames(fileName, [{name: name, value: value}], (rtn) => {\n      if (callback instanceof Function) {\n        callback(rtn);\n      }\n    })\n  }else{\n    __localStorage.setJsonItem(fileName, [{name: name, value: value}], (rtn) => {\n      if (callback instanceof Function) {\n        callback(rtn);\n      }\n    })\n  }\n};"]}